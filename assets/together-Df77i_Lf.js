import{c as De,i as ct,g as xt,a as mt,r as b,e as ut,o as _e,d as w,j as e,H as ht,S as pe,X as q,n as pt,s as ft,u as E,h as bt,p as Se,t as Le,q as U,m as gt}from"./x-vdu6PxPT.js";import{L as ze,S as jt,B as ee,R as ie,C as F,a as yt,b as $e,P as vt}from"./step-back-ah_wnjl-.js";import{S as Ee}from"./shield-YRjbg8Vk.js";import{Z as Pe}from"./zap-BEeOHqdt.js";import{H as je}from"./hand-D9d9Q_H-.js";import{T as ye}from"./triangle-alert-CO8fZ1I9.js";import{C as Re}from"./crown-DhFWzZA3.js";import{U as Nt}from"./user-hi-jrCL7.js";import{U as wt}from"./users-Dsm1N_Bg.js";import{T as Ct}from"./trash-2-CC3Hg-Aa.js";import{H as Te}from"./history-r3RmdCN7.js";import{D as Oe}from"./door-open-Dw7N36nG.js";import{T as ce}from"./trophy-CV5zFLFQ.js";import{F as Ue}from"./file-text-D_zMkP4d.js";import{H as Ye}from"./house-BdFnrmDF.js";import{G as He}from"./gift-D4oExXx0.js";import{L as kt}from"./layers-DEJ-WQdn.js";import{A as Be}from"./arrow-right-88Wq9XMb.js";import{I as Fe}from"./info-D-_2aBr4.js";import{H as qe}from"./handshake-Oe-COxTK.js";const It=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],_t=De("hash",It);const St=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],de=De("refresh-cw",St),Ae="/rawfids-gamehub/assets/together_cover-DVfrzIpr.png",Lt={apiKey:"AIzaSyBjIjK53vVJW1y5RaqEFGSFp0ECVDBEe1o",authDomain:"game-hub-ff8aa.firebaseapp.com",projectId:"game-hub-ff8aa",storageBucket:"game-hub-ff8aa.firebasestorage.app",messagingSenderId:"586559578902",appId:"1:586559578902:web:91da4fa4ace038d16aa637"},Ve=ct(Lt),fe=xt(Ve),C=mt(Ve),S=typeof __app_id<"u"?__app_id:"together-game",Et="23",Ge={MAGENTA:{id:"M",bg:"bg-pink-600",border:"border-pink-400",text:"text-white"},LEMON:{id:"L",bg:"bg-yellow-400",border:"border-yellow-200",text:"text-yellow-900"}},T=[{id:"A",name:"Team Magenta",color:"text-pink-400",bg:"bg-pink-900/30",border:"border-pink-500/50",badgeBg:"bg-pink-900"},{id:"B",name:"Team Lemon",color:"text-yellow-400",bg:"bg-yellow-900/30",border:"border-yellow-500/50",badgeBg:"bg-yellow-900"},{id:"C",name:"Team Cyan",color:"text-cyan-400",bg:"bg-cyan-900/30",border:"border-cyan-500/50",badgeBg:"bg-cyan-900"}],Pt=[{id:"run_3",text:"Run of 3",points:2,type:"RUN",count:3,desc:"Collect any 3 sequential cards (e.g., 5, 6, 7). Colors can be mixed."},{id:"set_3",text:"3 of a Kind",points:2,type:"SET",count:3,desc:"Collect 3 cards of the same number. Colors can be mixed."},{id:"pair_1s",text:"Paired 1s",points:2,type:"EXACT_SET",val:1,count:2,desc:"Collect two cards showing the number 1."},{id:"odd_colors",text:"Odd Color Pair",points:2,type:"ODD_COLORS",desc:"Collect two Odd-numbered cards: one must be Lemon and one Magenta."},{id:"sum_18_3",text:"Sum of 18",points:3,type:"SUM",count:3,target:18,desc:"Collect 3 cards that add up to exactly 18."},{id:"low_sum_6",text:"Low Sum 6",points:3,type:"SUM",count:3,target:6,desc:"Collect 3 cards that add up to exactly 6."},{id:"arith_pair",text:"Arithmetic Pair",points:3,type:"ARITHMETIC_PAIR",desc:"Collect a Lemon card (X) and a Magenta card (Y) where (Y = X + 3)."},{id:"two_pairs",text:"Two Pairs",points:3,type:"TWO_PAIRS",desc:"Collect two pairs of numbers (e.g., two 3s and two 8s). Colors can be mixed."},{id:"run_4_mixed",text:"Run of 4",points:3,type:"RUN",count:4,desc:"Collect any 4 sequential cards (e.g., 2, 3, 4, 5). Colors can be mixed."},{id:"run_3_blue",text:"Lemon Run",points:3,type:"RUN",count:3,specificColor:"L",desc:"Collect 3 sequential cards that are all Lemon."},{id:"set_6s",text:"Set of 6's",points:3,type:"EXACT_SET",val:6,count:3,desc:"Collect three cards showing the number 6."},{id:"set_odd",text:"Odd Set",points:3,type:"SET_PARITY",count:3,parity:"ODD",desc:"Collect 3 cards of the same number, where that number is Odd."},{id:"set_even",text:"Even Set",points:3,type:"SET_PARITY",count:3,parity:"EVEN",desc:"Collect 3 cards of the same number, where that number is Even."},{id:"even_blues",text:"Even Lemons",points:3,type:"COLOR_PARITY",count:3,color:"L",parity:"EVEN",desc:"Collect 3 Lemon cards that are all Even numbers."},{id:"odd_magentas",text:"Odd Magentas",points:3,type:"COLOR_PARITY",count:3,color:"M",parity:"ODD",desc:"Collect 3 Magenta cards that are all Odd numbers."},{id:"run_low",text:"Low Run",points:4,type:"EXACT_SEQ",seq:[1,2,3,4],desc:"Collect the exact sequence 1, 2, 3, 4. Colors can be mixed."},{id:"run_high",text:"High Run",points:4,type:"EXACT_SEQ",seq:[5,6,7,8],desc:"Collect the exact sequence 5, 6, 7, 8. Colors can be mixed."},{id:"run_odd",text:"Odd Run",points:4,type:"EXACT_SEQ",seq:[3,5,7],desc:"Collect the exact sequence 3, 5, 7. Colors can be mixed."},{id:"set_4",text:"4 of a Kind",points:4,type:"SET",count:4,desc:"Collect 4 cards of the same number. Colors can be mixed."},{id:"full_house",text:"Full House",points:4,type:"FULL_HOUSE",desc:"Collect a Set of 3 and a Pair (e.g., three 5s and two 8s)."},{id:"mixed_pair",text:"Mixed Pairs",points:4,type:"MIXED_PAIRS",desc:"Collect one Pair of Lemon cards and one Pair of Magenta cards."},{id:"blue_odds",text:"Lemon Odds",points:4,type:"COLOR_PARITY",count:4,color:"L",parity:"ODD",desc:"Collect 4 Lemon cards that are all Odd numbers."},{id:"mag_evens",text:"Magenta Evens",points:4,type:"COLOR_PARITY",count:4,color:"M",parity:"EVEN",desc:"Collect 4 Magenta cards that are all Even numbers."},{id:"sum_10_blue",text:"Lemon 10",points:4,type:"SUM_COLOR",count:3,target:10,color:"L",desc:"Collect 3 Lemon cards that add up to exactly 10."},{id:"sum_20_mag",text:"Magenta 20",points:4,type:"SUM_COLOR",count:3,target:20,color:"M",desc:"Collect 3 Magenta cards that add up to exactly 20."},{id:"even_sum_14",text:"Even Sum 14",points:4,type:"SUM_PARITY",count:3,target:14,parity:"EVEN",desc:"Collect 3 Even-numbered cards that add up to exactly 14."},{id:"odd_sum_15",text:"Odd Sum 15",points:4,type:"SUM_PARITY",count:3,target:15,parity:"ODD",desc:"Collect 3 Odd-numbered cards that add up to exactly 15."},{id:"doubler",text:"Doubler",points:4,type:"DOUBLER_SUM",desc:"Collect 3 cards where two of the same color add up to the number on the other color card."},{id:"blue_low",text:"Lemon Low",points:4,type:"COLOR_RANGE",count:4,color:"L",max:4,desc:"Collect 4 Lemon cards with numbers 4 or lower."},{id:"mag_high",text:"Magenta High",points:4,type:"COLOR_RANGE",count:4,color:"M",min:5,desc:"Collect 4 Magenta cards with numbers 5 or higher."},{id:"tri_color_set_3",text:"Color Set (3's)",points:4,type:"SPECIFIC_SET_MIXED",val:3,countL:2,countM:1,desc:"Collect three 3s: exactly two must be Lemon and one must be Magenta."},{id:"sum_12_tri",text:"Unique Sum 12",points:4,type:"SUM_DIFF",count:3,target:12,desc:"Collect 3 cards with different numbers that add up to exactly 12."},{id:"run_5",text:"Run of 5",points:5,type:"RUN",count:5,desc:"Collect any 5 sequential cards (e.g., 2, 3, 4, 5, 6). Colors can be mixed."},{id:"run_4_col",text:"Color Run 4",points:5,type:"RUN",count:4,sameColor:!0,desc:"Collect 4 sequential cards that share the same color."},{id:"set_4_8s",text:"Four 8s",points:5,type:"EXACT_SET",val:8,count:4,desc:"Collect four cards showing the number 8."},{id:"four_sum_28",text:"Four 7s",points:5,type:"EXACT_SET",val:7,count:4,desc:"Collect four cards showing the number 7."},{id:"pure_blue",text:"Pure Lemon",points:4,type:"PURE_COLOR",count:5,color:"L",desc:"Collect any 5 Lemon cards, regardless of number."},{id:"pure_mag",text:"Pure Magenta",points:4,type:"PURE_COLOR",count:5,color:"M",desc:"Collect any 5 Magenta cards, regardless of number."},{id:"sum_25_4",text:"Sum of 25",points:5,type:"SUM",count:4,target:25,desc:"Collect 4 cards that add up to exactly 25."},{id:"color_run_4",text:"Split Color Run",points:5,type:"COLOR_SPLIT_RUN",desc:"Collect a run of 4 cards: the lower two must be Lemon and the higher two Magenta."},{id:"high_pairs",text:"High Pairs",points:5,type:"SPECIFIC_PAIRS",vals:[7,8],desc:"Collect a pair of 7s and a pair of 8s."},{id:"max_min",text:"Max/Min Pairs",points:5,type:"SPECIFIC_PAIRS",vals:[1,8],desc:"Collect a pair of 1s and a pair of 8s."},{id:"blue_even_run",text:"Lemon Even Run",points:5,type:"RUN_COLOR_PARITY",color:"L",parity:"EVEN",desc:"Collect 3 Lemon cards that form an Even sequence (2, 4, 6 or 4, 6, 8)."},{id:"mag_odd_set",text:"Magenta Odd Set",points:5,type:"SET_PARITY_COLOR",count:3,parity:"ODD",color:"M",desc:"Collect 3 Magenta cards of the same Odd number."},{id:"all_four_7s",text:"Four Split color 7s",points:6,type:"ALL_FOUR_7S",desc:"Collect four 7s: exactly two must be Lemon and two must be Magenta."},{id:"odd_full_house_blue",text:"Odd Lemon House",points:6,type:"FULL_HOUSE_COLOR_PARITY",color:"L",parity:"ODD",desc:"Collect a Full House (Set of 3 + Pair) using only Odd-numbered Lemon cards."}],Xe=a=>{let n=a.length,r;for(;n!==0;)r=Math.floor(Math.random()*n),n--,[a[n],a[r]]=[a[r],a[n]];return a},Rt=()=>{let a=[];for(let n=0;n<4;n++)for(let r=1;r<=8;r++)a.push({id:`M-${n}-${r}`,color:"M",value:r}),a.push({id:`L-${n}-${r}`,color:"L",value:r});return Xe(a)},be=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(qe,{size:12,className:"text-pink-600"}),e.jsx("span",{className:"text-[10px] font-black tracking-widest text-pink-600 uppercase",children:"TOGETHER"})]}),Me=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(qe,{size:22,className:"text-pink-600"}),e.jsx("span",{className:"text-[20px] font-black tracking-widest text-pink-600 uppercase",children:"TOGETHER"})]}),Tt=(a,n)=>{if(!a||a.length===0)return!1;const r=a.map(p=>p.value).sort((p,h)=>p-h),u=a.map(p=>p.color),f=r.reduce((p,h)=>p+h,0);switch(n.type){case"RUN":if(a.length!==n.count)return!1;for(let l=0;l<r.length-1;l++)if(r[l]+1!==r[l+1])return!1;return!(n.sameColor&&!u.every(l=>l===u[0])||n.specificColor&&!u.every(l=>l===n.specificColor));case"EXACT_SEQ":return a.length!==n.seq.length?!1:r.every((l,I)=>l===n.seq[I]);case"SET":return a.length!==n.count?!1:r.every(l=>l===r[0]);case"TWO_PAIRS":return a.length!==4?!1:r[0]===r[1]&&r[2]===r[3]&&r[1]!==r[2];case"FULL_HOUSE":if(a.length!==5)return!1;const p=r.filter(l=>l===r[0]).length,h=r.filter(l=>l===r[4]).length;return p===3&&h===2||p===2&&h===3;case"SET_PARITY":return a.length!==n.count||!r.every(l=>l===r[0])?!1:n.parity==="ODD"?r[0]%2!==0:r[0]%2===0;case"EXACT_SET":return a.length!==n.count?!1:r.every(l=>l===n.val);case"COLOR_PARITY":return a.length!==n.count||!u.every(l=>l===n.color)?!1:n.parity==="ODD"?r.every(l=>l%2!==0):r.every(l=>l%2===0);case"COLOR_RANGE":return a.length!==n.count||!u.every(l=>l===n.color)?!1:n.max?r.every(l=>l<=n.max):n.min?r.every(l=>l>=n.min):!1;case"MIXED_PAIRS":if(a.length!==4)return!1;const v=a.filter(l=>l.color==="L").map(l=>l.value),t=a.filter(l=>l.color==="M").map(l=>l.value);return v.length!==2||t.length!==2?!1:v[0]===v[1]&&t[0]===t[1];case"PURE_COLOR":return a.length!==n.count?!1:u.every(l=>l===n.color);case"SUM":return a.length!==n.count?!1:f===n.target;case"SUM_COLOR":return a.length!==n.count||!u.every(l=>l===n.color)?!1:f===n.target;case"SUM_PARITY":if(a.length!==n.count||f!==n.target)return!1;const J=n.parity==="ODD";return r.every(l=>l%2!==0===J);case"SUM_DIFF":return a.length!==n.count||f!==n.target?!1:new Set(r).size===r.length;case"DOUBLER_SUM":if(a.length!==3)return!1;for(let l=0;l<3;l++){const I=a[l],H=a.filter((X,me)=>me!==l);if(H[0].color===H[1].color&&H[0].value+H[1].value===I.value)return!0}return!1;case"COLOR_SPLIT_RUN":if(a.length!==4)return!1;for(let l=0;l<r.length-1;l++)if(r[l]+1!==r[l+1])return!1;const k=[...a].sort((l,I)=>l.value-I.value),N=k[0].color,O=k[1].color,D=k[2].color,z=k[3].color;return N==="L"&&O==="L"&&D==="M"&&z==="M";case"SPECIFIC_PAIRS":return a.length!==4||r[0]!==r[1]||r[2]!==r[3]?!1:r[0]===n.vals[0]&&r[2]===n.vals[1];case"ODD_COLORS":return a.length!==2||r.some(l=>l%2===0)?!1:u.includes("L")&&u.includes("M");case"ALL_FOUR_7S":if(a.length!==4||!r.every(l=>l===7))return!1;const ae=u.filter(l=>l==="L").length,j=u.filter(l=>l==="M").length;return ae===2&&j===2;case"ARITHMETIC_PAIR":if(a.length!==2)return!1;const Y=a.find(l=>l.color==="L"),A=a.find(l=>l.color==="M");return!Y||!A?!1:A.value===Y.value+3;case"FULL_HOUSE_COLOR_PARITY":if(a.length!==5||!u.every(l=>l===n.color))return!1;const le=n.parity==="ODD";if(!r.every(l=>l%2!==0===le))return!1;const V=r.filter(l=>l===r[0]).length,P=r.filter(l=>l===r[4]).length;return V===3&&P===2||V===2&&P===3;case"RUN_COLOR_PARITY":if(a.length!==3||!u.every(l=>l===n.color))return!1;const Z=n.parity==="ODD";return r.every(l=>l%2!==0===Z)?r[1]===r[0]+2&&r[2]===r[1]+2:!1;case"SET_PARITY_COLOR":if(a.length!==n.count||!u.every(l=>l===n.color)||!r.every(l=>l===r[0]))return!1;const L=n.parity==="ODD";return r[0]%2!==0===L;case"SPECIFIC_SET_MIXED":if(a.length!==3||!r.every(l=>l===n.val))return!1;const xe=u.filter(l=>l==="L").length,re=u.filter(l=>l==="M").length;return xe===n.countL&&re===n.countM;default:return!1}},te=()=>e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_center,var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-black"}),e.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-96 h-96 bg-pink-600/30 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-yellow-400/30 rounded-full blur-3xl animate-pulse delay-700"})]}),Ot=({event:a,onClose:n,currentUserId:r})=>{if(!a)return null;const{type:u,actorName:f,data:p,actorId:h,targetId:v}=a,t=r===v;if(r===h)return null;let k=null,N="",O=null;switch(u){case"GOAL_CHANGE":N="Goal Changed",O=e.jsx(de,{className:"text-purple-400",size:32}),k=e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"text-center text-slate-300",children:[e.jsx("span",{className:"font-bold text-white",children:f})," changed"," ",p.goalType==="PERSONAL"?"their":"the"," ",e.jsx("span",{className:"font-bold text-purple-400",children:p.goalType==="PERSONAL"?"Personal":"Public"})," ","Goal!"]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs("div",{className:"opacity-60 scale-75 origin-right",children:[e.jsx(Q,{goal:p.oldGoal,small:!0}),e.jsx("div",{className:"text-center text-xs mt-1 text-slate-500",children:"OLD"})]}),e.jsx(Be,{className:"text-slate-500"}),e.jsxs("div",{className:"scale-90 origin-left",children:[e.jsx(Q,{goal:p.newGoal,small:!0}),e.jsx("div",{className:"text-center text-xs mt-1 text-green-400",children:"NEW"})]})]})]});break;case"GOAL_CLAIM":N="Goal Completed!",O=e.jsx(ce,{className:"text-yellow-400",size:32}),k=e.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[e.jsxs("div",{className:"text-center text-slate-300",children:[e.jsx("span",{className:"font-bold text-white",children:f})," completed"," ",p.goalType==="PERSONAL"?"their":"the"," ",e.jsx("span",{className:"font-bold text-yellow-400",children:p.goalType})," ","goal!"]}),e.jsx(Q,{goal:p.goal}),e.jsx("div",{className:"flex gap-1 justify-center bg-slate-800/50 p-2 rounded-xl mt-2",children:p.cards.map((D,z)=>e.jsx(se,{card:D,tiny:!0},z))})]});break;case"TRADE":t?(N="Trade Received",O=e.jsx(He,{className:"text-blue-400",size:32}),k=e.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[e.jsxs("div",{className:"text-center text-slate-300",children:[e.jsx("span",{className:"font-bold text-white",children:f})," sent you cards!"]}),e.jsx("div",{className:"flex gap-2 justify-center",children:p.cards.map((D,z)=>e.jsx(se,{card:D,small:!0},z))})]})):(N="Trade Occurred",O=e.jsx(je,{className:"text-blue-400",size:32}),k=e.jsx("div",{className:"flex flex-col gap-4 items-center",children:e.jsxs("div",{className:"text-center text-slate-300 text-lg",children:[e.jsx("span",{className:"font-bold text-white",children:f})," gave"," ",e.jsxs("span",{className:"font-bold text-blue-400",children:[p.count," card",p.count>1?"s":""]})," ","to ",e.jsx("span",{className:"font-bold text-white",children:p.targetName}),"."]})}));break;default:return null}return e.jsx("div",{className:"fixed inset-0 z-200 flex items-center justify-center p-4 animate-in fade-in duration-300 pointer-events-none",children:e.jsxs("div",{className:"bg-slate-900/95 border-2 border-slate-700 rounded-2xl max-w-sm w-full p-6 shadow-2xl relative pointer-events-auto transform transition-all scale-100",children:[e.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-slate-500 hover:text-white",children:e.jsx(q,{size:24})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-4 bg-slate-800 p-3 rounded-full border border-slate-700",children:O}),e.jsx("h3",{className:"text-2xl font-black text-white mb-4",children:N}),k,e.jsx("button",{onClick:n,className:"w-full mt-6 bg-slate-800 hover:bg-slate-700 text-white font-bold py-3 rounded-xl transition-colors",children:"Dismiss"})]})]})})},ge=({onConfirmLeave:a,onConfirmLobby:n,onCancel:r,isHost:u,inGame:f})=>e.jsx("div",{className:"fixed inset-0 z-200 bg-black/90 flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl max-w-sm w-full p-6 text-center shadow-2xl",children:[e.jsx(ye,{className:"mx-auto text-red-500 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Leave Game?"}),e.jsx("p",{className:"text-slate-400 mb-6",children:f?"Leaving now will disrupt the game!":"You will be removed from the lobby."}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:r,className:"bg-slate-800 hover:bg-slate-700 text-white font-bold py-3 rounded-xl transition-colors",children:"Stay (Cancel)"}),u&&f&&e.jsxs("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ye,{size:18})," Return Everyone to Lobby"]}),e.jsxs("button",{onClick:a,className:"bg-red-600 hover:bg-red-500 text-white font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx($e,{size:18})," ",u&&f?"End Game for All":"Leave Room"]})]})]})}),At=({goal:a,onClose:n})=>e.jsx("div",{className:"fixed inset-0 z-100 bg-black/80 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:n,children:e.jsxs("div",{className:"bg-slate-900 border-2 border-slate-700 rounded-2xl max-w-sm w-full p-6 shadow-2xl relative",onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-slate-500 hover:text-white",children:e.jsx(q,{size:24})}),e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-800 flex items-center justify-center mb-2",children:e.jsx(Fe,{size:32,className:"text-pink-400"})}),e.jsx("h3",{className:"text-2xl font-black text-white",children:a.text}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700 w-full",children:e.jsx("p",{className:"text-slate-300 font-medium text-lg leading-relaxed",children:a.desc||"No description available."})}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(ce,{className:"text-yellow-400",size:20}),e.jsxs("span",{className:"text-xl font-bold text-yellow-400",children:[a.points," Points"]})]}),e.jsx("button",{onClick:n,className:"w-full bg-slate-800 hover:bg-slate-700 text-white font-bold py-3 rounded-xl mt-4 transition-colors",children:"Got it"})]})]})}),Gt=({completedGoals:a,onClose:n})=>{const r=[...a].sort((u,f)=>u.teamId.localeCompare(f.teamId));return e.jsx("div",{className:"fixed inset-0 z-200 bg-black/95 flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl max-w-4xl w-full max-h-[90vh] flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-800/50 rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:e.jsx(Ue,{className:"text-white",size:24})}),e.jsx("h2",{className:"text-2xl font-black text-white",children:"Game Report Card"})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-700 rounded-full transition-colors text-slate-400 hover:text-white",children:e.jsx(q,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:T.map(u=>{const f=r.filter(p=>p.teamId===u.id);return f.length===0?null:e.jsxs("div",{className:`border-l-4 ${u.border} pl-6 py-2`,children:[e.jsx("h3",{className:`text-xl font-black mb-4 ${u.color}`,children:u.name}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map((p,h)=>e.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 border border-slate-700 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white text-lg",children:p.goal.text}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Completed by ",p.playerName]})]}),e.jsxs("div",{className:"bg-yellow-400/10 text-yellow-400 font-bold px-2 py-1 rounded text-xs border border-yellow-400/20",children:["+",p.points," pts"]})]}),e.jsx("div",{className:"flex gap-1 justify-center bg-slate-900/50 p-2 rounded-lg",children:p.cards.map((v,t)=>e.jsx(se,{card:v,tiny:!0},t))})]},h))})]},u.id)})}),e.jsx("div",{className:"p-4 border-t border-slate-800 text-center bg-slate-800/30 rounded-b-2xl",children:e.jsx("button",{onClick:n,className:"bg-white text-slate-900 font-bold px-8 py-3 rounded-xl hover:scale-105 transition-transform",children:"Close Report"})})]})})},se=({card:a,onClick:n,selected:r,small:u,disabled:f,tiny:p})=>{if(!a)return e.jsx("div",{className:`border-2 border-dashed border-gray-700 rounded-xl bg-gray-800/50 ${u?"w-10 h-14":"w-20 h-28"}`});const h=a.color==="M"?Ge.MAGENTA:Ge.LEMON;return p?e.jsx("div",{className:`w-6 h-8 rounded flex items-center justify-center text-xs font-black ${h.bg} ${h.text} border border-white/20 shadow-sm`,children:a.value}):e.jsxs("button",{onClick:f?void 0:n,disabled:f,className:`
        relative rounded-xl font-black flex flex-col items-center justify-center transition-all shadow-lg select-none
        ${u?"w-12 h-16 text-xl":"w-20 h-28 md:w-24 md:h-32 text-4xl md:text-5xl"}
        ${h.bg} ${h.text} ${h.border} border-b-4
        ${r?"ring-2 ring-white -translate-y-2 z-10 scale-105":""}
        ${f?"opacity-40 cursor-not-allowed grayscale-[0.3]":"hover:brightness-110 cursor-pointer active:scale-95"}
      `,children:[e.jsx("span",{children:a.value}),!u&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"absolute top-1 left-2 text-[10px] opacity-70",children:h.id}),e.jsx("span",{className:"absolute bottom-1 right-2 text-[10px] opacity-70 rotate-180",children:h.id})]})]})},Q=({goal:a,isPublic:n,isPersonal:r,completed:u,onClick:f,selected:p,small:h})=>e.jsxs("div",{onClick:f,className:`
      relative rounded-xl border flex flex-col items-center justify-center text-center overflow-hidden transition-all
      ${u?"bg-green-900/40 border-green-500 opacity-60":n?"bg-indigo-900/60 border-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.2)]":"bg-slate-800 border-slate-600"}
      ${p?"ring-2 ring-white scale-105 z-20":""}
      ${h?"w-24 h-16 p-1":"w-full h-full min-h-[100px] p-2 hover:bg-slate-700 cursor-pointer"}
    `,children:[n&&!h&&e.jsx("div",{className:"absolute top-0 inset-x-0 bg-indigo-600 text-[9px] font-bold text-white uppercase tracking-widest py-0.5",children:"Public Goal"}),r&&!h&&e.jsx("div",{className:"absolute top-0 inset-x-0 bg-pink-600 text-[9px] font-bold text-white uppercase tracking-widest py-0.5",children:"My Goal"}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-1",children:e.jsx("p",{className:`text-white font-bold ${h?"text-[9px] leading-tight line-clamp-2":"text-xs md:text-sm leading-tight"}`,children:a?.text||"???"})}),!h&&e.jsxs("div",{className:"mt-1 flex items-center gap-1 bg-black/40 px-2 rounded-full",children:[e.jsx(ce,{size:10,className:"text-yellow-400"}),e.jsxs("span",{className:"text-yellow-400 font-bold text-xs",children:[a?.points," pts"]})]}),u&&e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center backdrop-blur-[1px]",children:e.jsx(F,{className:"text-green-500 drop-shadow-lg",size:h?20:32})})]}),Mt=({onStart:a})=>{const[n,r]=b.useState(!1),[u,f]=b.useState(!1),[p,h]=b.useState(!1);return b.useEffect(()=>{const v=localStorage.getItem("together_game_roomId");r(!!v);const t=new Image;t.src=Ae,t.onload=()=>{f(!0),setTimeout(()=>{h(!0)},2e3)}},[]),e.jsxs("div",{className:"fixed inset-0 z-[200] bg-black flex flex-col items-center justify-end pb-20 md:justify-center md:pb-0 font-sans overflow-hidden",children:[!u&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-50 text-pink-500/50",children:[e.jsx(ze,{size:48,className:"animate-spin mb-4"}),e.jsx("div",{className:"font-mono text-xs tracking-[0.3em] animate-pulse",children:"INITIALIZING SYSTEM..."})]}),e.jsxs("div",{className:`absolute inset-0 z-0 overflow-hidden transition-opacity duration-1000 ${u?"opacity-100":"opacity-0"}`,children:[e.jsx("div",{className:`w-full h-full bg-cover bg-center transition-transform duration-[2000ms] ease-out ${u?"scale-100":"scale-130"}`,style:{backgroundImage:`url(${Ae})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/40"})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center gap-8 animate-in fade-in slide-in-from-bottom-10 duration-1000",children:e.jsx("div",{className:`transform transition-all duration-1000 ease-out ${p?"translate-y-0 opacity-100":"translate-y-32 opacity-0"}`,children:e.jsxs("button",{onClick:a,className:"group relative px-12 py-5 bg-pink-600/20 hover:bg-pink-600/40 border border-pink-500/50 hover:border-pink-400 text-pink-300 font-black text-2xl tracking-widest rounded-none transform transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(34,211,238,0.4)] backdrop-blur-md overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-pink-400/10 to-transparent translate-y-[-100%] animate-[scan_2s_infinite_linear]"}),e.jsx("span",{className:"relative z-10 flex items-center gap-3 animate-pulse",children:n?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"animate-spin-slow"})," RESUME"]}):e.jsxs(e.Fragment,{children:[e.jsx(vt,{})," PLAY"]})})]})})}),e.jsxs("div",{className:"absolute bottom-4 text-slate-600 text-xs text-center",children:["Inspired by Duos. A tribute game.",e.jsx("br",{}),"Developed by ",e.jsx("strong",{children:"RAWFID K SHUVO"}),"."]}),e.jsx("style",{children:`
        @keyframes scan {
          0% { transform: translateY(-100%); }
          100% { transform: translateY(200%); }
        }
      `})]})};function Dt(){const[a,n]=b.useState(null),[r,u]=b.useState("splash"),[f,p]=b.useState(""),[h,v]=b.useState(""),[t,J]=b.useState(null),[k,N]=b.useState(""),[O,D]=b.useState(!1),[z,ae]=b.useState(!1),[j,Y]=b.useState([]),[A,le]=b.useState(!1),[V,P]=b.useState(!1),[Z,L]=b.useState(!1),[xe,re]=b.useState(!1),[l,I]=b.useState(!1),[H,X]=b.useState(null),[me,ve]=b.useState(null),[Ne,We]=b.useState(0),[W,B]=b.useState(null),[we,ue]=b.useState(null),[G,Ke]=b.useState(()=>localStorage.getItem("gameHub_playerName")||"");b.useEffect(()=>{G&&localStorage.setItem("gameHub_playerName",G)},[G]),b.useEffect(()=>{(async()=>typeof __initial_auth_token<"u"&&__initial_auth_token?await pt(fe,__initial_auth_token):await ft(fe))(),ut(fe,n)},[]);const Qe=()=>{const o=localStorage.getItem("together_game_roomId");o&&(I(!0),v(o)),u("menu")};b.useEffect(()=>{const o=_e(w(C,"game_hub_settings","config"),d=>{d.exists()&&d.data()[Et]?.maintenance?D(!0):D(!1)});return()=>o()},[]),b.useEffect(()=>{if(!h||!a)return;const o=_e(w(C,"artifacts",S,"public","data","rooms",h),d=>{if(d.exists()){const x=d.data();if(!x.players.some(c=>c.id===a.uid)){v(""),localStorage.removeItem("together_game_roomId"),u("menu"),N("You were removed.");return}J(x),u(x.status==="lobby"?"lobby":"game"),x.lastEvent&&x.lastEvent.id!==Ne&&(We(x.lastEvent.id),ve(x.lastEvent))}else v(""),localStorage.removeItem("together_game_roomId"),u("menu"),N("Room ended.")});return()=>o()},[h,a,Ne]);const Je=async()=>{if(!t||!a)return;const o=t.players.map(d=>d.id===a.uid?{...d,ready:!d.ready}:d);await E(w(C,"artifacts",S,"public","data","rooms",h),{players:o})},Ze=async()=>{if(!G)return N("Name required");I(!0);const o="123456789ABCDEFGHIJKLMNPQRSTUVWXYZ";let d="";for(let c=0;c<6;c++)d+=o.charAt(Math.floor(Math.random()*o.length));const x={roomId:d,hostId:a.uid,status:"lobby",players:[{id:a.uid,name:G,teamId:"A",hand:[],ready:!1}],logs:[],completedGoals:[],lastEvent:null};await bt(w(C,"artifacts",S,"public","data","rooms",d),x),v(d),localStorage.setItem("together_game_roomId",d),u("lobby"),I(!1)},et=async()=>{if(!f||!G)return N("Enter Code and Name");I(!0);const o=w(C,"artifacts",S,"public","data","rooms",f),d=await Se(o);if(!d.exists())return I(!1),N("Room not found");const x=d.data();if(x.status!=="lobby")return I(!1),N("Game in progress");if(x.players.length>=6)return I(!1),N("Room full");x.players.length;const c=[...x.players,{id:a.uid,name:G,teamId:null,hand:[],ready:!1}];await E(o,{players:c}),v(f),localStorage.setItem("together_game_roomId",f),I(!1)},tt=()=>{const o=t.roomId,d=()=>{ae(!0),setTimeout(()=>ae(!1),2e3),triggerFeedback&&triggerFeedback("neutral","COPIED!","",F)};try{navigator.clipboard.writeText(o),d()}catch{const c=document.createElement("textarea");c.value=o,document.body.appendChild(c),c.select(),document.execCommand("copy"),document.body.removeChild(c),d()}},Ce=async()=>{const o=t.players.length;if(o!==4&&o!==6){alert("Strictly 4 or 6 players required.");return}const d=[...t.players],x=o===4?["A","B"]:["A","B","C"];d.forEach((y,$)=>{o===4?y.teamId=$%2===0?"A":"B":y.teamId=$%3===0?"A":$%3===1?"B":"C",y.hand=[],y.score=0,y.ready=!1});const c=Rt(),s=Xe([...Pt]),m=[c.pop(),c.pop(),c.pop()],i=s.pop();d.forEach((y,$)=>{const dt=$===0?1:$===1?2:3;for(let Ie=0;Ie<dt;Ie++)y.hand.push(c.pop());y.personalGoal=s.pop()});const g={};x.forEach(y=>{g[y]={goals:0,points:0}});const K=d[0].hand.length>6?"CHECK_LIMIT":"PLAYING";await E(w(C,"artifacts",S,"public","data","rooms",h),{status:"playing",players:d,deck:c,market:m,goalDeck:s,publicGoal:i,turnIndex:0,turnPhase:K,cardsDrawn:0,tradesPerformed:0,goalChanged:!1,teamScores:g,completedGoals:[],lastEvent:{id:Date.now(),type:"GAME_START",actorName:"System"},logs:[{id:Date.now(),text:"Game Started! Good Luck.",type:"neutral"}]})},he=async()=>{if(!h||!a)return;const o=w(C,"artifacts",S,"public","data","rooms",h);try{const d=await Se(o);if(d.exists()){const x=d.data();if(x.hostId===a.uid)await Le(o);else{const c=x.players.findIndex(m=>m.id===a.uid),s=x.players.filter(m=>m.id!==a.uid);if(s.length===0)await Le(o);else{let m=x.turnIndex,i=!1;c<x.turnIndex?m=Math.max(0,x.turnIndex-1):c===x.turnIndex&&(i=!0),m>=s.length&&(m=0);const g={players:s,turnIndex:m,logs:U({id:Date.now(),text:`${G} left the game.`,type:"danger"})};if(i&&s.length>0){const M=s[m];g.turnPhase=M.hand.length>6?"CHECK_LIMIT":"PLAYING",g.cardsDrawn=0,g.tradesPerformed=0,g.goalChanged=!1}await E(o,g)}}}}catch(d){console.error("Error leaving room",d)}v(""),localStorage.removeItem("together_game_roomId"),u("menu"),J(null),L(!1)},ne=async()=>{if(!t||t.hostId!==a.uid)return;const o=t.players.map(d=>({...d,hand:[],ready:!1,score:0,personalGoal:null}));await E(w(C,"artifacts",S,"public","data","rooms",h),{status:"lobby",players:o,deck:[],market:[],goalDeck:[],publicGoal:null,logs:[],teamScores:{},completedGoals:[],turnIndex:0,lastEvent:null}),L(!1)},st=async()=>{await Ce()},at=async o=>{if(!t||t.hostId!==a.uid)return;const d=t.players.filter(x=>x.id!==o);await E(w(C,"artifacts",S,"public","data","rooms",h),{players:d})},lt=async o=>{const d=t.players.findIndex(m=>m.id===a.uid),x=t.players[d],c=x.hand.filter(m=>m.id!==o.id),s={};s.players=[...t.players],s.players[d].hand=c,s.deck=[o,...t.deck],c.length<=6&&(s.turnPhase="PLAYING"),s.logs=U({id:Date.now(),text:`${x.name} discarded a card (Recycled).`,type:"neutral"}),await E(w(C,"artifacts",S,"public","data","rooms",h),s)},ke=async o=>{if(t.cardsDrawn>=2){alert("You have already drawn 2 cards this turn.");return}const d=t.players.findIndex(g=>g.id===a.uid),x=t.players[d];let c,s={players:[...t.players],deck:[...t.deck],market:[...t.market]};o===-1?c=s.deck.pop():(c=s.market[o],s.market[o]=s.deck.length>0?s.deck.pop():null),s.players[d].hand.push(c);const m=t.cardsDrawn+1;s.cardsDrawn=m;let i=o===-1?"drew from deck":`took ${c.value} from market`;s.logs=U({id:Date.now(),text:`${x.name} ${i}.`,type:"neutral"}),await E(w(C,"artifacts",S,"public","data","rooms",h),s)},rt=async o=>{if(t.goalChanged){alert("You can only change a goal once per turn.");return}const d=t.players.findIndex(i=>i.id===a.uid),x=t.players[d],c={players:[...t.players],goalDeck:[...t.goalDeck],publicGoal:t.publicGoal};let s,m;o==="PERSONAL"?(s=x.personalGoal,c.goalDeck.unshift(s),m=c.goalDeck.pop(),c.players[d].personalGoal=m):(s=t.publicGoal,c.goalDeck.unshift(s),m=c.goalDeck.pop(),c.publicGoal=m),c.goalChanged=!0,c.logs=U({id:Date.now(),text:`${x.name} changed the ${o==="PERSONAL"?"Personal":"Public"} Goal.`,type:"neutral"}),c.lastEvent={id:Date.now(),type:"GOAL_CHANGE",actorId:a.uid,actorName:x.name,data:{oldGoal:s,newGoal:m,goalType:o}},await E(w(C,"artifacts",S,"public","data","rooms",h),c)},nt=async o=>{const d=t.players.findIndex(y=>y.id===a.uid),x=t.players[d],c=o==="PERSONAL"?x.personalGoal:t.publicGoal;if(!Tt(j,c)){alert("Invalid selection for this goal!");return}const s={players:[...t.players],goalDeck:[...t.goalDeck],teamScores:{...t.teamScores},deck:[...t.deck]},m=j.map(y=>y.id);s.players[d].hand=x.hand.filter(y=>!m.includes(y.id)),s.deck=[...j,...s.deck];const i=x.teamId;s.teamScores[i].goals+=1,s.teamScores[i].points+=c.points;const g={id:Date.now(),teamId:i,playerName:x.name,goal:c,cards:j,points:c.points};s.completedGoals=U(g),o==="PERSONAL"?s.players[d].personalGoal=s.goalDeck.pop():s.publicGoal=s.goalDeck.pop();let M="success",K=`${x.name} claimed ${c.text} (+${c.points}pts)!`;s.teamScores[i].goals>=8&&(s.status="finished",K=`GAME OVER! ${T.find(y=>y.id===i).name} completed 8 goals!`),s.logs=U({id:Date.now(),text:K,type:M}),s.lastEvent={id:Date.now(),type:"GOAL_CLAIM",actorId:a.uid,actorName:x.name,data:{goal:c,cards:j,goalType:o}},Y([]),await E(w(C,"artifacts",S,"public","data","rooms",h),s)},ot=async o=>{if(t.tradesPerformed>=2){alert("Max 2 cards per turn.");return}if(j.length!==1&&j.length!==2){alert("Select 1 or 2 cards.");return}if(t.tradesPerformed+j.length>2){alert("Can only trade 2 total.");return}const d=t.players.findIndex(i=>i.id===a.uid),x=t.players.findIndex(i=>i.id===o),c=t.players[x],s={players:[...t.players]},m=j.map(i=>i.id);s.players[d].hand=s.players[d].hand.filter(i=>!m.includes(i.id)),s.players[x].hand.push(...j),s.tradesPerformed=t.tradesPerformed+j.length,s.logs=U({id:Date.now(),text:`${t.players[d].name} gave ${j.length} card(s) to ${t.players[x].name}.`,type:"neutral"}),s.lastEvent={id:Date.now(),type:"TRADE",actorId:a.uid,actorName:t.players[d].name,targetId:o,targetName:c.name,data:{count:j.length,cards:j,targetName:c.name}},Y([]),ue(null),await E(w(C,"artifacts",S,"public","data","rooms",h),s)},it=async()=>{if(t.cardsDrawn<2){alert("You must draw 2 cards before passing your turn.");return}const o=(t.turnIndex+1)%t.players.length,d=t.players[o],x=d.hand.length>6?"CHECK_LIMIT":"PLAYING";await E(w(C,"artifacts",S,"public","data","rooms",h),{turnIndex:o,turnPhase:x,cardsDrawn:0,tradesPerformed:0,goalChanged:!1,logs:U({id:Date.now(),text:`Turn passed to ${d.name}`,type:"neutral"})})};if(O)return e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white p-4 text-center",children:[e.jsx(Me,{}),e.jsxs("div",{className:"bg-orange-500/10 p-8 rounded-2xl border border-orange-500/30",children:[e.jsx(ht,{size:64,className:"text-orange-500 mx-auto mb-4 animate-bounce"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Under Maintenance"}),e.jsx("p",{className:"text-gray-400",children:"The bond is broken. Take some time to rescue your friendship."})]}),e.jsx("div",{className:"h-8"}),e.jsx("a",{href:"/rawfids-gamehub/",children:e.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:e.jsx("div",{className:"text-center pb-12 animate-pulse",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-4 bg-slate-900/50 rounded-full border border-indigo-500/20 text-indigo-300 font-bold tracking-widest text-sm uppercase backdrop-blur-sm",children:[e.jsx(pe,{size:16})," Visit Gamehub...Try our other releases..."," ",e.jsx(pe,{size:16})]})})})}),e.jsx(be,{})]});if(!a)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center text-pink-500 animate-pulse",children:"Alliance Awakens..."});if(h&&!t&&!k)return e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white p-4",children:[e.jsx(te,{}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur p-8 rounded-2xl border border-zinc-700 shadow-2xl flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsx(ze,{size:48,className:"text-pink-500 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Reconnecting..."}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Resuming your session"})]})]})]});if(r==="splash")return e.jsx(Mt,{onStart:Qe});if(r==="menu")return e.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col items-center justify-center p-4 relative overflow-y-auto font-sans",children:[e.jsx(te,{}),e.jsx("nav",{className:"absolute top-0 left-0 w-full p-4 z-50",children:e.jsxs("a",{href:"/rawfids-gamehub/",className:`flex items-center gap-2 text-pink-800 rounded-lg 
			font-bold shadow-md hover:text-pink-400 transition-colors w-fit animate-pulse`,children:[e.jsx(jt,{}),e.jsx("span",{children:"Back to Gamehub"})]})}),V&&e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900 max-w-3xl w-full max-h-[85vh] overflow-y-auto rounded-2xl border border-slate-700 shadow-2xl relative flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-800 bg-slate-900 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-pink-600 p-2 rounded-xl",children:e.jsx(ee,{className:"text-white",size:24})}),e.jsx("h2",{className:"text-3xl font-black text-white tracking-tight",children:"Code of Conduct"})]}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 bg-slate-800 rounded-full text-slate-400 hover:text-white transition-colors border border-slate-700 hover:bg-slate-700",children:e.jsx(q,{size:20})})]}),e.jsxs("div",{className:"p-8 space-y-10 text-slate-300",children:[e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(Ee,{className:"text-pink-500"})," The Basics"]}),e.jsxs("p",{className:"leading-relaxed text-lg",children:["Together is a ",e.jsx("strong",{children:"cooperative team game"}),". You are paired with the player sitting opposite you. Your goal is to complete specific patterns called"," ",e.jsx("strong",{children:"Goal Cards"})," faster than the other teams."]})]}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 shadow-inner",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-16 bg-pink-600 rounded-lg border-2 border-pink-400"}),e.jsx("div",{className:"w-12 h-16 bg-yellow-400 rounded-lg border-2 border-yellow-200"}),e.jsxs("div",{className:"text-sm font-bold text-slate-400",children:["The Deck has numbers ",e.jsx("strong",{children:"1-8"})," in two colors:"," ",e.jsx("span",{className:"text-pink-400",children:"Magenta"})," &"," ",e.jsx("span",{className:"text-yellow-400",children:"Lemon"}),"."]})]}),e.jsxs("div",{className:"text-xs bg-slate-900 p-3 rounded-lg text-slate-400",children:[e.jsx("strong",{children:"Winning Condition:"})," The game ends when a team claims ",e.jsx("strong",{children:"8 Goals"}),". The team with the highest score wins!"]})]})]}),e.jsx("hr",{className:"border-slate-800"}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(ie,{className:"text-blue-400"})," Turn Structure"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 p-5 rounded-xl border border-slate-700/50 relative overflow-hidden group hover:border-blue-500/30 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 font-black text-6xl group-hover:opacity-20 transition-opacity",children:"1"}),e.jsx("h4",{className:"font-bold text-white text-lg mb-2",children:"Cleanup"}),e.jsxs("p",{className:"text-sm",children:["If you start your turn with"," ",e.jsx("strong",{children:"more than 6 cards"}),", you must discard down to 6 before doing anything else."]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-5 rounded-xl border border-slate-700/50 relative overflow-hidden group hover:border-blue-500/30 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 font-black text-6xl group-hover:opacity-20 transition-opacity",children:"2"}),e.jsx("h4",{className:"font-bold text-white text-lg mb-2",children:"Actions (Any Order)"}),e.jsxs("p",{className:"text-sm",children:["You can Draw, Trade, or Claim goals in any order. BUT you ",e.jsx("strong",{children:"MUST draw 2 cards"})," before passing."]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-5 rounded-xl border border-slate-700/50 relative overflow-hidden group hover:border-blue-500/30 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 font-black text-6xl group-hover:opacity-20 transition-opacity",children:"3"}),e.jsx("h4",{className:"font-bold text-white text-lg mb-2",children:"Pass"}),e.jsxs("p",{className:"text-sm",children:["Once you have drawn your 2 cards and finished your moves, ",e.jsx("strong",{children:"Pass"})," the turn."]})]})]})]}),e.jsx("hr",{className:"border-slate-800"}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(Pe,{className:"text-yellow-400"})," Valid Actions"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-green-500/20 p-3 rounded-lg text-green-400 shrink-0",children:e.jsx(F,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:"Claim a Goal"}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Select cards from your hand that match your"," ",e.jsx("strong",{children:"Personal Goal"})," or the shared"," ",e.jsx("strong",{children:"Public Goal"}),". If valid, you score points and get a new goal."]})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-blue-500/20 p-3 rounded-lg text-blue-400 shrink-0",children:e.jsx(je,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:"Trade Cards"}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Give 1 or 2 cards from your hand to your partner. You cannot receive cards, only give.",e.jsx("strong",{children:"Limit:"})," Max 2 cards traded per turn."]})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-purple-500/20 p-3 rounded-lg text-purple-400 shrink-0",children:e.jsx(de,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:"Cycle Goal"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Once per turn, you can discard your current Personal Goal or the Public Goal and draw a new one. Use this if a goal seems impossible!"})]})]})]})]}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 p-4 rounded-xl flex gap-4 items-center",children:[e.jsx("div",{className:"bg-red-500/20 p-2 rounded-full text-red-400",children:e.jsx(ye,{size:24})}),e.jsxs("p",{className:"text-sm font-medium text-red-200",children:[e.jsx("strong",{children:"Communication Rule:"}),' You strictly cannot talk about the specific numbers or colors in your hand. You CAN say "I need high cards" or "I can help with that goal," but not "I have a Magenta 5."']})]})]}),e.jsx("div",{className:"p-6 border-t border-slate-800 bg-slate-900 sticky bottom-0 text-center",children:e.jsx("button",{onClick:()=>P(!1),className:"bg-white text-slate-900 font-bold py-4 px-12 rounded-xl hover:scale-105 transition-transform shadow-xl",children:"Got It, Let's Play!"})})]})}),e.jsxs("div",{className:"z-10 bg-slate-900/80 backdrop-blur-xl border border-slate-700 p-8 rounded-3xl w-full max-w-md shadow-2xl flex flex-col gap-6 my-auto",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex justify-center gap-2 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-pink-600 rounded-xl rotate-3 flex items-center justify-center shadow-lg shadow-pink-500/20",children:e.jsx(_t,{className:"text-white",size:24})}),e.jsx("div",{className:"w-12 h-12 bg-yellow-400 rounded-xl -rotate-6 flex items-center justify-center shadow-lg shadow-yellow-400/20",children:e.jsx(pe,{className:"text-yellow-900",size:24})})]}),e.jsx("h1",{className:"text-5xl font-black text-white tracking-tighter mb-1",children:"TOGETHER"}),e.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"UNITED WE STAND"})]}),k&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-200 p-3 rounded-xl text-center text-sm font-bold",children:k}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-slate-400 text-xs font-bold uppercase ml-1",children:"Your Name"}),e.jsx("input",{className:"w-full bg-slate-950/50 border border-slate-700 focus:border-pink-500 p-4 rounded-xl text-white font-bold outline-none transition-all placeholder:text-slate-600",placeholder:"Enter Name",value:G,onChange:o=>Ke(o.target.value)})]}),e.jsxs("button",{onClick:Ze,disabled:l,className:"w-full bg-linear-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white p-4 rounded-xl font-black shadow-lg shadow-pink-900/20 active:scale-95 transition-all flex items-center justify-center gap-2",children:[e.jsx(Re,{size:20})," CREATE CO-OPERATION"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-900 px-2 text-slate-500 font-bold",children:"Or Join"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{className:"w-full sm:flex-1 bg-slate-950/50 border border-slate-700 focus:border-yellow-400 p-4 rounded-xl text-white font-mono uppercase outline-none placeholder:text-slate-600",placeholder:"ROOM CODE",value:f,onChange:o=>p(o.target.value.toUpperCase())}),e.jsx("button",{onClick:et,disabled:l,className:"w-full sm:w-auto bg-yellow-400 hover:bg-yellow-300 text-yellow-900 px-8 py-4 rounded-xl font-black shadow-lg shadow-yellow-900/20 active:scale-95 transition-all",children:"JOIN"})]})]}),e.jsxs("button",{onClick:()=>P(!0),className:"flex items-center justify-center gap-2 text-slate-500 hover:text-white transition-colors text-sm font-bold mt-2",children:[e.jsx(ee,{size:16})," Code of Conduct"]})]})]});const R=t?.players[t.turnIndex]?.id===a?.uid,_=t?.players.find(o=>o.id===a?.uid),oe=T.find(o=>o.id===_?.teamId);if(t?.players.find(o=>o.teamId===_?.teamId&&o.id!==a?.uid),r==="lobby"&&t){const o=t.hostId===a.uid,d=t.players.length,x=d===4||d===6;return e.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col items-center justify-center p-6 text-white relative",children:[e.jsx(te,{}),e.jsx(Me,{}),Z&&e.jsx(ge,{onCancel:()=>L(!1),onConfirmLeave:he,onConfirmLobby:()=>{ne(),L(!1)},isHost:o,inGame:!1}),e.jsxs("div",{className:"z-10 w-full max-w-4xl bg-slate-900/90 backdrop-blur p-8 rounded-3xl border border-slate-700 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl text-pink-500 font-bold uppercase",children:"Co-ops Code"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-mono text-white font-black",children:t.roomId}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:tt,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:z?e.jsx(F,{size:16,className:"text-green-500"}):e.jsx(yt,{size:16})}),z&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-pink-500 text-black text-xs font-bold px-2 py-1 rounded shadow-lg animate-fade-in-up whitespace-nowrap",children:"Copied!"})]})]})]}),e.jsx("button",{onClick:()=>L(!0),className:"p-3 bg-red-500/20 hover:bg-red-500/40 text-red-200 rounded-xl transition-colors",children:e.jsx($e,{size:24})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[t.players.map((c,s)=>{const m=d===4?s%2===0?"A":"B":s%3===0?"A":s%3===1?"B":"C",i=T.find(g=>g.id===m);return e.jsxs("div",{className:`bg-slate-800 border-2 ${i?i.border:"border-slate-700"} p-4 rounded-2xl flex items-center justify-between gap-4`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-xl ${i?i.bg:"bg-slate-700"} ${i?i.color:"text-slate-400"}`,children:c.name[0]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(Nt,{size:16,className:"text-slate-400"}),c.name,t.hostId===c.id&&e.jsx(Re,{size:14,className:"text-yellow-400"})]}),e.jsxs("div",{className:`text-xs font-bold uppercase flex items-center gap-2 mt-1 ${i?i.color:"text-slate-500"}`,children:[e.jsx(wt,{size:14}),i?i.name:"Waiting..."]})]})]}),o&&c.id!==a.uid&&e.jsx("button",{onClick:()=>at(c.id),className:"text-slate-600 hover:text-red-500 transition-colors",title:"Kick Player",children:e.jsx(Ct,{size:18})})]},c.id)}),Array.from({length:Math.max(0,(d<4?4:6)-d)}).map((c,s)=>e.jsx("div",{className:"border-2 border-dashed border-slate-800 rounded-2xl p-4 flex items-center justify-center text-slate-700 font-bold",children:"Waiting for Player..."},s))]}),o?e.jsx("button",{onClick:Ce,disabled:!x,className:`w-full py-6 rounded-2xl font-black text-2xl tracking-widest shadow-xl transition-all ${x?"bg-green-600 hover:bg-green-500 text-white hover:scale-[1.02]":"bg-slate-800 text-slate-600 cursor-not-allowed"}`,children:x?"START TOGETHER":`WAITING FOR ${d<4?"4":"4 or 6"} PLAYERS`}):e.jsx("div",{className:"text-center py-8 bg-slate-900/50 rounded-2xl animate-pulse text-slate-500 font-bold",children:"Waiting for Host to start..."})]}),e.jsx(be,{})]})}if(r==="game"&&t){const o=t.players[t.turnIndex],d=t.hostId===a.uid,x=t.players.filter(s=>s.id!==t.hostId).every(s=>s.ready);if(t.status==="finished"){const s=Object.keys(t.teamScores).reduce((i,g)=>t.teamScores[i].points>t.teamScores[g].points?i:g),m=T.find(i=>i.id===s);return e.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col items-center justify-center p-8 text-center text-white font-sans relative",children:[e.jsx(te,{}),xe&&e.jsx(Gt,{completedGoals:t.completedGoals||[],onClose:()=>re(!1)}),Z&&e.jsx(ge,{onConfirmLeave:he,onConfirmLobby:()=>{ne(),L(!1)},onCancel:()=>L(!1),isHost:d,inGame:!0}),e.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-slate-900 border-b border-slate-800 p-2 md:p-4 flex items-center justify-between shadow-md z-40 backdrop-blur-md bg-opacity-90",children:[e.jsx("div",{className:"flex gap-2 md:gap-4 overflow-x-auto",children:T.map(i=>{if(!t.teamScores[i.id]||t.players.length===4&&i.id==="C")return null;const g=t.teamScores[i.id],M=_?.teamId===i.id;return e.jsxs("div",{className:`flex flex-col md:flex-row items-center gap-1 md:gap-3 px-3 py-1 rounded-lg border ${_?.teamId===i.id?i.border:"border-transparent"}`,children:[e.jsx("span",{className:`font-black text-xs md:text-sm uppercase ${i.color}`,children:i.name}),e.jsxs("div",{className:"flex gap-2 text-xs font-bold text-slate-400",children:[e.jsxs("span",{children:[g.goals,"/8 Goals"]}),M&&e.jsxs("span",{children:[g.points," Pts"]})]})]},i.id)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>P(!0),className:"p-2 rounded-full text-slate-500 hover:bg-slate-800",title:"How to Play",children:e.jsx(ee,{size:20})}),e.jsx("button",{onClick:()=>le(!A),className:`p-2 rounded-full ${A?"bg-slate-800 text-white":"text-slate-500 hover:bg-slate-800"}`,children:e.jsx(Te,{size:20})}),e.jsx("button",{onClick:()=>L(!0),className:"p-2 rounded-full text-red-500 hover:bg-red-900/20",title:"Leave Game",children:e.jsx(Oe,{size:20})})]})]}),A&&e.jsxs("div",{className:"fixed top-16 md:top-20 right-4 w-72 max-h-64 bg-slate-900/95 backdrop-blur shadow-2xl rounded-xl border border-slate-700 z-50 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-slate-800 p-2 text-xs font-bold text-slate-400 uppercase border-b border-slate-700",children:"Game Log"}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:t.logs.slice().reverse().map(i=>e.jsx("div",{className:`text-xs p-2 rounded ${i.type==="success"?"bg-green-900/30 text-green-400 border border-green-900/50":"bg-slate-800 text-slate-400"}`,children:i.text},i.id))})]}),V&&e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4 text-left",children:e.jsxs("div",{className:"bg-slate-900 max-w-3xl w-full max-h-[85vh] overflow-y-auto rounded-2xl border border-slate-700 p-6 relative",children:[e.jsx("button",{onClick:()=>P(!1),className:"absolute top-4 right-4 text-slate-500",children:e.jsx(q,{})}),e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Game Rules"}),e.jsx("p",{className:"text-slate-400",children:"See main menu for full rules."})]})}),e.jsxs("div",{className:"z-10 bg-slate-900/80 backdrop-blur p-8 rounded-3xl border border-slate-700 shadow-2xl max-w-2xl w-full mt-20",children:[e.jsx(ce,{size:80,className:"text-yellow-400 mb-6 mx-auto animate-bounce"}),e.jsxs("h1",{className:"text-6xl font-black mb-2",children:[m.name," Wins!"]}),e.jsx("div",{className:"grid grid-cols-2 gap-8 my-8",children:T.map(i=>t.teamScores[i.id]?e.jsxs("div",{className:`bg-slate-800 p-6 rounded-2xl border ${i.border}`,children:[e.jsx("h2",{className:`text-2xl font-bold ${i.color}`,children:i.name}),e.jsxs("div",{className:"text-4xl font-black mt-2",children:[t.teamScores[i.id].points," pts"]}),e.jsxs("div",{className:"text-sm text-slate-400",children:[t.teamScores[i.id].goals," goals"]})]},i.id):null)}),e.jsxs("button",{onClick:()=>re(!0),className:"w-full bg-slate-800 hover:bg-slate-700 text-white font-bold py-3 rounded-xl mb-8 border border-slate-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ue,{size:20})," View Game Report Card"]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:t.players.map(i=>e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm border flex items-center gap-2 ${i.ready?"border-green-500 bg-green-900/20 text-green-300":"border-gray-700 bg-gray-800 text-gray-400"}`,children:[i.name," ",i.ready&&e.jsx(F,{size:12})]},i.id))}),d?e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:st,disabled:!x,className:`flex-1 py-3 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-transform ${x?"bg-green-600 hover:bg-green-500 text-white hover:scale-105":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(ie,{size:20})," Restart Game"]}),e.jsxs("button",{onClick:ne,disabled:!x,className:`flex-1 py-3 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-transform ${x?"bg-blue-600 hover:bg-blue-500 text-white hover:scale-105":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(Ye,{size:20})," Return to Lobby"]})]}):_.ready?e.jsx("div",{className:"text-green-400 font-bold animate-pulse border border-green-500/30 bg-green-900/10 p-4 rounded-xl",children:"Waiting for Host..."}):e.jsx("button",{onClick:Je,className:"w-full py-4 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold text-lg shadow-lg hover:scale-105 transition-transform animate-pulse",children:"Ready for Next Game"})]})]})}const c=({type:s,goal:m})=>e.jsxs("div",{className:"absolute inset-0 bg-slate-900/90 backdrop-blur-sm z-30 flex flex-col items-center justify-center gap-2 rounded-xl animate-in fade-in duration-200",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex gap-4 items-center justify-center",children:[e.jsxs("button",{onClick:()=>{nt(s),B(null)},disabled:j.length===0,className:"flex flex-col items-center justify-center gap-1 group text-green-400 disabled:opacity-30 disabled:cursor-not-allowed hover:text-green-300 transition-colors",title:"Claim Goal (Select Cards First)",children:[e.jsx("div",{className:"bg-green-900/40 p-2 rounded-full border border-green-500/50 group-hover:scale-110 transition-transform",children:e.jsx(F,{size:20})}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-wider",children:"Done"})]}),e.jsxs("button",{onClick:()=>{rt(s),B(null)},disabled:t.goalChanged,className:"flex flex-col items-center justify-center gap-1 group text-purple-400 disabled:opacity-30 disabled:cursor-not-allowed hover:text-purple-300 transition-colors",title:"Cycle Goal",children:[e.jsx("div",{className:"bg-purple-900/40 p-2 rounded-full border border-purple-500/50 group-hover:scale-110 transition-transform",children:e.jsx(de,{size:20})}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-wider",children:"Change"})]})]}),e.jsxs("button",{onClick:()=>{X(m),B(null)},className:"flex items-center gap-1 text-[10px] font-bold text-slate-400 hover:text-white transition-colors mt-1 bg-white/5 px-2 py-0.5 rounded-full",children:[e.jsx(Fe,{size:10})," Details"]}),e.jsx("button",{onClick:()=>B(null),className:"absolute top-1 right-1 text-slate-500 hover:text-white p-1 hover:bg-white/10 rounded-full transition-colors",children:e.jsx(q,{size:14})})]});return e.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col font-sans relative overflow-x-hidden overflow-y-auto text-slate-200",onClick:()=>{B(null),ue(null)},children:[e.jsx(te,{}),H&&e.jsx(At,{goal:H,onClose:()=>X(null)}),e.jsx(Ot,{event:me,onClose:()=>ve(null),currentUserId:a.uid}),V&&e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900 max-w-3xl w-full max-h-[85vh] overflow-y-auto rounded-2xl border border-slate-700 shadow-2xl relative flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-800 bg-slate-900 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-pink-600 p-2 rounded-xl",children:e.jsx(ee,{className:"text-white",size:24})}),e.jsx("h2",{className:"text-3xl font-black text-white tracking-tight",children:"Code of Conduct"})]}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 bg-slate-800 rounded-full text-slate-400 hover:text-white transition-colors border border-slate-700 hover:bg-slate-700",children:e.jsx(q,{size:20})})]}),e.jsxs("div",{className:"p-8 space-y-10 text-slate-300",children:[e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(Ee,{className:"text-pink-500"})," The Basics"]}),e.jsxs("p",{className:"leading-relaxed text-lg",children:["Together is a ",e.jsx("strong",{children:"cooperative team game"}),". You are paired with the player sitting opposite you. Your goal is to complete specific patterns called"," ",e.jsx("strong",{children:"Goal Cards"})," faster than the other teams."]})]}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 shadow-inner",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-16 bg-pink-600 rounded-lg border-2 border-pink-400"}),e.jsx("div",{className:"w-12 h-16 bg-yellow-400 rounded-lg border-2 border-yellow-200"}),e.jsxs("div",{className:"text-sm font-bold text-slate-400",children:["The Deck has numbers ",e.jsx("strong",{children:"1-8"})," in two colors:"," ",e.jsx("span",{className:"text-pink-400",children:"Magenta"})," &"," ",e.jsx("span",{className:"text-yellow-400",children:"Lemon"}),"."]})]}),e.jsxs("div",{className:"text-xs bg-slate-900 p-3 rounded-lg text-slate-400",children:[e.jsx("strong",{children:"Winning Condition:"})," The game ends when a team claims ",e.jsx("strong",{children:"8 Goals"}),". The team with the highest score wins!"]})]})]}),e.jsx("hr",{className:"border-slate-800"}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(ie,{className:"text-blue-400"})," Turn Structure"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 p-5 rounded-xl border border-slate-700/50 relative overflow-hidden group hover:border-blue-500/30 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 font-black text-6xl group-hover:opacity-20 transition-opacity",children:"1"}),e.jsx("h4",{className:"font-bold text-white text-lg mb-2",children:"Cleanup"}),e.jsxs("p",{className:"text-sm",children:["If you start your turn with"," ",e.jsx("strong",{children:"more than 6 cards"}),", you must discard down to 6 before doing anything else."]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-5 rounded-xl border border-slate-700/50 relative overflow-hidden group hover:border-blue-500/30 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 font-black text-6xl group-hover:opacity-20 transition-opacity",children:"2"}),e.jsx("h4",{className:"font-bold text-white text-lg mb-2",children:"Actions (Any Order)"}),e.jsxs("p",{className:"text-sm",children:["You can Draw, Trade, or Claim goals in any order. BUT you ",e.jsx("strong",{children:"MUST draw 2 cards"})," before passing."]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-5 rounded-xl border border-slate-700/50 relative overflow-hidden group hover:border-blue-500/30 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 font-black text-6xl group-hover:opacity-20 transition-opacity",children:"3"}),e.jsx("h4",{className:"font-bold text-white text-lg mb-2",children:"Pass"}),e.jsxs("p",{className:"text-sm",children:["Once you have drawn your 2 cards and finished your moves, ",e.jsx("strong",{children:"Pass"})," the turn."]})]})]})]}),e.jsx("hr",{className:"border-slate-800"}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(Pe,{className:"text-yellow-400"})," Valid Actions"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-green-500/20 p-3 rounded-lg text-green-400 shrink-0",children:e.jsx(F,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:"Claim a Goal"}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Select cards from your hand that match your"," ",e.jsx("strong",{children:"Personal Goal"})," or the shared"," ",e.jsx("strong",{children:"Public Goal"}),". If valid, you score points and get a new goal."]})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-blue-500/20 p-3 rounded-lg text-blue-400 shrink-0",children:e.jsx(je,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:"Trade Cards"}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Give 1 or 2 cards from your hand to your partner. You cannot receive cards, only give.",e.jsx("strong",{children:"Limit:"})," Max 2 cards traded per turn."]})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-purple-500/20 p-3 rounded-lg text-purple-400 shrink-0",children:e.jsx(de,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:"Cycle Goal"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Once per turn, you can discard your current Personal Goal or the Public Goal and draw a new one. Use this if a goal seems impossible!"})]})]})]})]}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 p-4 rounded-xl flex gap-4 items-center",children:[e.jsx("div",{className:"bg-red-500/20 p-2 rounded-full text-red-400",children:e.jsx(ye,{size:24})}),e.jsxs("p",{className:"text-sm font-medium text-red-200",children:[e.jsx("strong",{children:"Communication Rule:"}),' You strictly cannot talk about the specific numbers or colors in your hand. You CAN say "I need high cards" or "I can help with that goal," but not "I have a Magenta 5."']})]})]}),e.jsx("div",{className:"p-6 border-t border-slate-800 bg-slate-900 sticky bottom-0 text-center",children:e.jsx("button",{onClick:()=>P(!1),className:"bg-white text-slate-900 font-bold py-4 px-12 rounded-xl hover:scale-105 transition-transform shadow-xl",children:"Got It, Let's Play!"})})]})}),Z&&e.jsx(ge,{onConfirmLeave:he,onConfirmLobby:()=>{ne(),L(!1)},onCancel:()=>L(!1),isHost:d,inGame:!0}),e.jsxs("div",{className:"bg-slate-900 border-b border-slate-800 p-2 md:p-4 flex items-center justify-between shadow-md z-160 sticky top-0 backdrop-blur-md bg-opacity-90",children:[e.jsx("div",{className:"flex gap-2 md:gap-4 overflow-x-auto",children:T.map(s=>{if(!t.teamScores[s.id]||t.players.length===4&&s.id==="C")return null;const m=t.teamScores[s.id],i=o.teamId===s.id,g=_?.teamId===s.id;return e.jsxs("div",{className:`flex flex-col md:flex-row items-center gap-1 md:gap-3 px-3 py-1 rounded-lg border ${i?s.bg+" "+s.border:"bg-transparent border-transparent"}`,children:[e.jsx("span",{className:`font-black text-xs md:text-sm uppercase ${s.color}`,children:s.name}),e.jsxs("div",{className:"flex gap-2 text-xs font-bold text-slate-400",children:[e.jsxs("span",{children:[m.goals,"/8 Goals"]}),g&&e.jsxs("span",{children:[m.points," Pts"]})]})]},s.id)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>P(!0),className:"p-2 rounded-full text-slate-500 hover:bg-slate-800",title:"How to Play",children:e.jsx(ee,{size:20})}),e.jsx("button",{onClick:()=>le(!A),className:`p-2 rounded-full ${A?"bg-pink-900 text-pink-400":"text-gray-400 hover:bg-gray-800"}`,children:e.jsx(Te,{size:20})}),e.jsx("button",{onClick:()=>L(!0),className:"p-2 rounded-full text-red-500 hover:bg-red-900/20",title:"Leave Game",children:e.jsx(Oe,{size:20})})]})]}),A&&e.jsxs("div",{className:"fixed top-16 right-4 w-64 max-h-60 bg-gray-900/95 border border-gray-700 rounded-xl z-155 overflow-y-auto p-2 shadow-2xl",children:[e.jsx("div",{className:"bg-slate-800 p-2 text-xs font-bold text-slate-400 uppercase border-b border-slate-700",children:"Game Log"}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:t.logs.slice().reverse().map(s=>e.jsx("div",{className:`text-xs p-2 rounded ${s.type==="success"?"bg-green-900/30 text-green-400 border border-green-900/50":"bg-slate-800 text-slate-400"}`,children:s.text},s.id))})]}),e.jsxs("div",{className:"flex-1 flex flex-col max-w-7xl mx-auto w-full p-2 md:p-4 gap-2 z-10",children:[e.jsx("div",{className:"overflow-x-auto pb-2 min-h-[100px]",children:e.jsx("div",{className:"flex justify-center gap-2 md:gap-4 w-fit mx-auto px-4",children:t.players.map((s,m)=>{if(s.id===a.uid)return null;const i=t.turnIndex===m,g=T.find(y=>y.id===s.teamId),M=s.teamId===_.teamId,K=we===s.id&&R&&M&&j.length>0&&j.length<=2;return e.jsxs("div",{className:`relative flex flex-col items-center min-w-[80px] transition-all ${i?"scale-105 opacity-100":"opacity-70"}`,children:[K&&e.jsxs("button",{onClick:y=>{y.stopPropagation(),ot(s.id)},className:"absolute z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-blue-600 text-white font-bold text-xs px-4 py-2 rounded-full shadow-lg hover:bg-blue-500 animate-in zoom-in duration-200 flex items-center gap-1 ring-2 ring-white",children:[e.jsx(He,{size:14})," GIVE"]}),e.jsxs("div",{className:`relative w-10 h-10 rounded-full border-2 ${i?"border-white ring-2 ring-blue-500":g.border} bg-slate-800 flex items-center justify-center font-bold text-sm shadow-md cursor-pointer`,onClick:y=>{y.stopPropagation(),M&&R&&j.length>0&&j.length<=2&&ue(we===s.id?null:s.id)},children:[s.name[0],e.jsx("div",{className:`absolute -bottom-1 px-1.5 py-0.5 rounded text-[7px] font-black uppercase text-white ${g.bg.replace("/30","")}`,children:g.name.split(" ")[1]})]}),e.jsx("span",{className:"text-[9px] font-bold text-slate-400 mt-1 max-w-[70px] truncate",children:s.name}),e.jsx("div",{className:"mt-1 w-20 scale-90 origin-top",children:e.jsx(Q,{goal:s.personalGoal,small:!0,isPersonal:!0,onClick:()=>X(s.personalGoal)})}),e.jsxs("div",{className:"mt-1 flex -space-x-1",children:[Array.from({length:Math.min(5,s.hand.length)}).map((y,$)=>e.jsx("div",{className:"w-2.5 h-3 bg-slate-700 rounded border border-slate-500"},$)),s.hand.length>5&&e.jsx("div",{className:"w-2.5 h-3 bg-red-500 rounded border border-slate-500"})]})]},s.id)})})}),e.jsxs("div",{className:"flex-1 bg-slate-900/50 backdrop-blur-md rounded-3xl border border-slate-800 shadow-xl p-4 flex flex-col md:flex-row items-center justify-center gap-8 md:gap-6 mb-4 md:mb-0 relative",children:[e.jsxs("div",{className:"flex flex-col w-32 h-24 md:w-48 md:h-32 shrink-0",children:[e.jsx("div",{className:"text-center text-[10px] font-bold text-slate-500 mb-1 uppercase",children:"Public Goal"}),e.jsx("div",{className:"relative flex-1 w-full h-full",children:t.publicGoal?e.jsxs(e.Fragment,{children:[e.jsx(Q,{goal:t.publicGoal,isPublic:!0,selected:W==="PUBLIC",onClick:s=>{s.stopPropagation(),R&&t.turnPhase==="PLAYING"?B(W==="PUBLIC"?null:"PUBLIC"):X(t.publicGoal)}}),W==="PUBLIC"&&e.jsx(c,{type:"PUBLIC",goal:t.publicGoal})]}):e.jsx("div",{className:"h-full border-2 border-dashed border-slate-700 rounded-lg flex items-center justify-center text-slate-600",children:"Empty"})})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 mt-2 md:mt-0",children:[e.jsx("div",{className:"flex gap-2",children:t.market.map((s,m)=>e.jsx(se,{card:s,small:!0,disabled:!R||t.turnPhase==="CHECK_LIMIT"||t.cardsDrawn>=2,onClick:()=>ke(m)},m))}),e.jsxs("button",{onClick:()=>ke(-1),disabled:!R||t.turnPhase==="CHECK_LIMIT"||t.cardsDrawn>=2,className:"w-full h-10 bg-slate-800 border border-slate-700 rounded-xl flex items-center justify-center gap-2 text-slate-300 text-sm font-bold hover:bg-slate-700 active:scale-95 disabled:opacity-50 transition-all shadow-lg",children:[e.jsx(kt,{size:16})," Draw Blind"]})]})]}),e.jsxs("div",{className:"bg-slate-900 rounded-t-3xl shadow-[0_-10px_40px_rgba(0,0,0,0.3)] p-4 pt-14 border-t border-slate-800 relative mt-auto",children:[e.jsxs("div",{className:"absolute top-0 left-0 bg-slate-800 border-b border-r border-slate-700 rounded-br-2xl px-4 py-2 flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${oe.bg} ${oe.color}`,children:_.name[0]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-sm leading-none",children:_.name}),e.jsx("div",{className:`text-[10px] uppercase font-black tracking-wider ${oe.color}`,children:oe.name})]})]}),R&&t.turnPhase==="PLAYING"&&e.jsxs("button",{onClick:it,disabled:t.cardsDrawn<2,className:"absolute top-4 right-4 bg-slate-700 text-white px-6 py-2 rounded-xl font-bold shadow hover:bg-slate-600 active:scale-95 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:["PASS"," ",t.cardsDrawn<2&&e.jsxs("span",{className:"text-[10px] opacity-70",children:["(Draw ",2-t.cardsDrawn," more)"]}),e.jsx(Be,{size:16})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"relative w-28 md:w-36 shrink-0 self-center md:self-end mb-4 md:mb-0 flex flex-col gap-2",children:[e.jsxs("div",{className:"mb-2 text-center md:text-left",children:[e.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1",children:"Current Turn"}),e.jsx("div",{className:`text-lg font-black animate-bounce  ${T.find(s=>s.id===o.teamId).color}`,children:R?"YOUR TURN":o.name}),R&&e.jsx("div",{className:"text-[10px] font-bold bg-slate-800 text-blue-400 border border-blue-900/50 px-2 py-1 rounded-full mt-1 inline-block shadow-lg animate-pulse",children:t.turnPhase==="CHECK_LIMIT"?"Discard down to 6":t.cardsDrawn<2?`Draw ${2-t.cardsDrawn} more`:"Actions or Pass"})]}),e.jsx("div",{className:"relative w-full flex-1 min-h-[100px]",children:_.personalGoal?e.jsxs(e.Fragment,{children:[e.jsx(Q,{goal:_.personalGoal,isPersonal:!0,selected:W==="PERSONAL",onClick:s=>{s.stopPropagation(),R&&t.turnPhase==="PLAYING"?B(W==="PERSONAL"?null:"PERSONAL"):X(_.personalGoal)}}),W==="PERSONAL"&&e.jsx(c,{type:"PERSONAL",goal:_.personalGoal})]}):e.jsx("div",{className:"h-full bg-slate-800 rounded-lg flex items-center justify-center text-xs text-slate-500 font-bold border-2 border-dashed border-slate-700",children:"Completed!"})})]}),e.jsx("div",{className:"flex-1 overflow-x-auto pb-4 pt-16 px-2 w-full min-h-[200px]",children:e.jsx("div",{className:"flex gap-2 items-end w-fit mx-auto",children:_.hand.sort((s,m)=>s.value-m.value).map(s=>e.jsxs("div",{className:"relative group shrink-0 w-20 h-28 md:w-24 md:h-32",children:[R&&t.turnPhase==="CHECK_LIMIT"&&e.jsx("button",{onClick:()=>lt(s),className:"absolute -top-12 left-1/2 -translate-x-1/2 bg-red-500 text-white text-[10px] font-bold px-3 py-1.5 rounded-full opacity-100 z-50 shadow-xl animate-pulse border-2 border-slate-900",children:"DISCARD"}),e.jsx("div",{className:"w-full h-full",children:e.jsx(se,{card:s,selected:j.some(m=>m.id===s.id),disabled:!R||t.turnPhase!=="PLAYING"&&t.turnPhase!=="CHECK_LIMIT",onClick:()=>{t.turnPhase==="PLAYING"&&(j.some(m=>m.id===s.id)?Y(j.filter(m=>m.id!==s.id)):Y([...j,s]))}})})]},s.id))})})]})]})]}),e.jsx(be,{})]})}return null}gt.createRoot(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(Dt,{})}));
