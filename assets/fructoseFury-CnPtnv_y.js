import{c as Te,i as qe,g as Je,a as Xe,r as m,e as Qe,o as je,d as g,j as e,H as et,S as we,X as J,n as tt,s as st,h as at,p as rt,u as v,q as T,t as ve,m as lt}from"./x-vdu6PxPT.js";import{G as nt}from"./gem-CsLWdnoM.js";import{F as ot,L as it}from"./leaf-C1HduOXV.js";import{B as P,C as dt}from"./citrus-DDA9mzQF.js";import{G as ct,A as xt,C as De}from"./grape-BVuBiulH.js";import{L as Re,S as mt,P as X,B as Ne,C as B,a as ut,b as ke,R as ht}from"./step-back-ah_wnjl-.js";import{U as L}from"./user-hi-jrCL7.js";import{T as _e}from"./trash-2-CC3Hg-Aa.js";import{H as ft}from"./history-r3RmdCN7.js";import{T as Se}from"./trophy-CV5zFLFQ.js";import{T as Ae}from"./triangle-alert-CO8fZ1I9.js";import{S as Be}from"./skull--JE29QMg.js";import{H as Q}from"./hand-D9d9Q_H-.js";import{I as bt}from"./info-D-_2aBr4.js";import{S as gt}from"./shield-check-D0f25w0J.js";const pt=[["path",{d:"M12 4V2",key:"1k5q1u"}],["path",{d:"M5 10v4a7.004 7.004 0 0 0 5.277 6.787c.412.104.802.292 1.102.592L12 22l.621-.621c.3-.3.69-.488 1.102-.592A7.003 7.003 0 0 0 19 14v-4",key:"1tgyif"}],["path",{d:"M12 4C8 4 4.5 6 4 8c-.243.97-.919 1.952-2 3 1.31-.082 1.972-.29 3-1 .54.92.982 1.356 2 2 1.452-.647 1.954-1.098 2.5-2 .595.995 1.151 1.427 2.5 2 1.31-.621 1.862-1.058 2.5-2 .629.977 1.162 1.423 2.5 2 1.209-.548 1.68-.967 2-2 1.032.916 1.683 1.157 3 1-1.297-1.036-1.758-2.03-2-3-.5-2-4-4-8-4Z",key:"tnsqj"}]],yt=Te("nut",pt);const jt=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],wt=Te("sun",jt),Ie="/rawfids-gamehub/assets/fructose_cover-B48_Zd8a.png",vt={apiKey:"AIzaSyBjIjK53vVJW1y5RaqEFGSFp0ECVDBEe1o",authDomain:"game-hub-ff8aa.firebaseapp.com",projectId:"game-hub-ff8aa",storageBucket:"game-hub-ff8aa.firebasestorage.app",messagingSenderId:"586559578902",appId:"1:586559578902:web:91da4fa4ace038d16aa637"},$e=qe(vt),K=Je($e),p=Xe($e),y=typeof __app_id<"u"?__app_id:"fructose-fury-game",Nt="20",I={CHERRY:{name:"Strawberry",val:1,count:11,color:"text-red-400",bg:"bg-red-900/50",border:"border-red-500",icon:De},CITRUS:{name:"Tangerine",val:2,count:11,color:"text-orange-400",bg:"bg-orange-900/50",border:"border-orange-500",icon:dt},APPLE:{name:"Peach",val:3,count:11,color:"text-pink-400",bg:"bg-pink-900/50",border:"border-pink-500",icon:xt},GRAPE:{name:"Grape",val:4,count:11,color:"text-purple-400",bg:"bg-purple-900/50",border:"border-purple-500",icon:ct},BANANA:{name:"Banana",val:5,count:11,color:"text-yellow-400",bg:"bg-yellow-900/50",border:"border-yellow-500",icon:P},NUT:{name:"Coconut",val:6,count:7,color:"text-stone-400",bg:"bg-stone-800/80",border:"border-stone-500",icon:yt},LEAF:{name:"Pear",val:7,count:7,color:"text-lime-400",bg:"bg-lime-900/50",border:"border-lime-500",icon:it},FLOWER:{name:"Dragonfruit",val:8,count:7,color:"text-fuchsia-400",bg:"bg-fuchsia-900/50",border:"border-fuchsia-500",icon:ot},SUN:{name:"Melon",val:9,count:7,color:"text-amber-300",bg:"bg-amber-900/50",border:"border-amber-500",icon:wt},GEM:{name:"Pineapple",val:10,count:7,color:"text-cyan-300",bg:"bg-cyan-900/50",border:"border-cyan-500",icon:nt}},U=[];Object.keys(I).forEach(a=>{const o=I[a].count;for(let d=0;d<o;d++)U.push(a)});const V=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(P,{size:12,className:"text-yellow-400"}),e.jsx("span",{className:"text-[10px] font-black tracking-widest text-yellow-400 uppercase",children:"FRUCTOSE FURY"})]}),Ce=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(P,{size:20,className:"text-yellow-400"}),e.jsx("span",{className:"text-[20px] font-black tracking-widest text-yellow-400 uppercase",children:"FRUCTOSE FURY"})]}),q=a=>{let o=a.length,d;for(;o!==0;)d=Math.floor(Math.random()*o),o--,[a[o],a[d]]=[a[d],a[o]];return a},D=a=>!a||!Array.isArray(a)?0:a.reduce((o,d)=>o+(I[d]?.val||0),0),G=({isShaking:a})=>e.jsxs("div",{className:`absolute inset-0 overflow-hidden pointer-events-none z-0 ${a?"animate-shake bg-red-900/20":""}`,children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,var(--tw-gradient-stops))] from-yellow-900/20 via-gray-950 to-black"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[...Array(20)].map((o,d)=>{const n=Object.keys(I),x=I[n[d%n.length]].icon;return e.jsx("div",{className:"absolute animate-float text-white/60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${10+Math.random()*20}s`,transform:`scale(${.5+Math.random()})`},children:e.jsx(x,{size:32})},d)})}),e.jsx("style",{children:`
      @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
      }
      .animate-float { animation: float infinite ease-in-out; }
      
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
      .animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
    `})]}),S=({type:a,size:o="md",animate:d=!1})=>{const n=I[a];if(!n)return e.jsx("div",{className:"w-16 h-24 bg-gray-800 rounded-lg"});const x=o==="sm"?"w-10 h-14 md:w-12 md:h-16 p-1":o==="lg"?"w-32 h-48 p-4":"w-20 h-28 md:w-24 md:h-32 p-2",j=n.icon;return e.jsxs("div",{className:`
      ${x} rounded-xl border-2 ${n.bg} ${n.border} 
      flex flex-col items-center justify-center shadow-lg relative overflow-hidden
      ${d?"animate-in zoom-in duration-300":""}
    `,children:[e.jsx("div",{className:"absolute -right-2 -top-2 opacity-20 rotate-12",children:e.jsx(j,{size:o==="lg"?80:40})}),e.jsx(j,{className:`${n.color} drop-shadow-md z-10`,size:o==="sm"?20:o==="lg"?64:32}),o!=="sm"&&e.jsx("span",{className:"font-bold uppercase tracking-wider text-[10px] md:text-xs mt-2 text-white/90 z-10 text-center leading-none",children:n.name}),e.jsx("div",{className:"absolute bottom-1 right-1 bg-black/50 px-1 rounded text-white/80 text-[10px] md:text-xs font-mono font-bold",children:n.val})]})},kt=({event:a,currentUserId:o})=>{if(!a||a.type==="STEAL"&&a.targetIds&&a.targetIds.includes(o)||a.type==="STEAL"&&a.thiefId===o||a.type==="BANK"&&a.playerId===o)return null;let d=bt,n="text-white",x="bg-gray-800";return a.type==="BUST"?(d=Be,n="text-red-500",x="bg-red-900/90"):a.type==="STEAL"?(d=Q,n="text-orange-500",x="bg-orange-900/90"):a.type==="BANK"&&(d=B,n="text-green-500",x="bg-green-900/90"),e.jsx("div",{className:"fixed inset-0 pointer-events-none z-200 flex items-center justify-center p-4",children:e.jsxs("div",{className:`p-6 md:p-8 rounded-3xl ${x} border-4 border-white/20 shadow-2xl flex flex-col items-center animate-in zoom-in fade-in duration-300 transform scale-110 max-w-sm w-full text-center`,children:[e.jsx(d,{size:48,className:`${n} mb-4 animate-bounce`}),e.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white uppercase drop-shadow-lg",children:a.title}),e.jsx("p",{className:"text-lg md:text-xl text-white/90 font-bold mt-2",children:a.message})]})})},St=({event:a,onClose:o})=>(m.useEffect(()=>{const d=setTimeout(o,2500);return()=>clearTimeout(d)},[o]),e.jsx("div",{className:"fixed inset-0 z-210 flex items-center justify-center pointer-events-none animate-in fade-in zoom-in slide-in-from-top-5",children:e.jsxs("div",{className:"bg-red-950/90 border-2 border-red-500 p-4 rounded-2xl max-w-xs w-full text-center shadow-2xl backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(Ae,{size:32,className:"text-red-500 animate-pulse"}),e.jsx("h2",{className:"text-2xl font-black text-white uppercase",children:"ROBBED!"})]}),e.jsx("p",{className:"text-red-200 text-sm mb-4 font-bold",children:a.message||"Someone stole your fruits!"}),a.cardType&&e.jsxs("div",{className:"flex flex-col items-center gap-1 mb-2",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-red-300 tracking-widest",children:"Stolen Fruit"}),e.jsx("div",{className:"transform scale-90",children:e.jsx(S,{type:a.cardType,size:"md"})})]})]})})),It=({data:a,onClose:o})=>(m.useEffect(()=>{const d=setTimeout(o,2500);return()=>clearTimeout(d)},[o]),e.jsx("div",{className:"fixed inset-0 z-210 flex items-center justify-center pointer-events-none animate-in fade-in zoom-in slide-in-from-top-5",children:e.jsxs("div",{className:"bg-green-950/90 border-2 border-green-500 p-4 rounded-2xl max-w-xs w-full text-center shadow-2xl backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(gt,{size:32,className:"text-green-400 animate-bounce"}),e.jsx("h2",{className:"text-2xl font-black text-white uppercase",children:"SECURED!"})]}),e.jsxs("p",{className:"text-green-100 text-sm mb-3 font-bold",children:["You secured"," ",e.jsx("span",{className:"text-yellow-300 text-xl font-black",children:a.amount})," ","points!"]}),a.cards&&a.cards.length>0&&e.jsx("div",{className:"flex flex-wrap justify-center gap-1 opacity-90 max-h-24 overflow-hidden",children:a.cards.map((d,n)=>e.jsx("div",{className:"transform scale-75",children:e.jsx(S,{type:d,size:"sm"})},n))})]})})),Ct=({targets:a,fruitType:o,onSteal:d,onPass:n})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-100 flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl border-4 border-yellow-500 p-4 md:p-6 max-w-md w-full text-center shadow-[0_0_50px_rgba(234,179,8,0.3)] relative overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-500/10 animate-pulse pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[e.jsx("h3",{className:"text-2xl md:text-3xl font-black text-white mb-2 uppercase italic transform -rotate-2",children:"Sweet Opportunity!"}),e.jsxs("p",{className:"text-gray-300 mb-4 text-sm md:text-base",children:["You drew a"," ",e.jsx("strong",{className:"text-yellow-400",children:I[o].name}),"! The following players have them ripe for the taking:"]}),e.jsx("div",{className:"flex justify-center mb-4 shrink-0",children:e.jsx(S,{type:o,size:"lg",animate:!0})}),e.jsx("div",{className:"bg-black/40 rounded-xl p-3 mb-4 overflow-y-auto border border-gray-700 flex-1 min-h-0",children:a.map((x,j)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-700 last:border-0",children:[e.jsxs("span",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(L,{size:16,className:"text-gray-400"})," ",x.name]}),e.jsxs("span",{className:"bg-yellow-900/50 text-yellow-200 px-2 py-1 rounded text-xs font-mono border border-yellow-500/30",children:["Has ",x.count]})]},j))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-auto",children:[e.jsx("button",{onClick:n,className:"bg-gray-700 hover:bg-gray-600 text-gray-300 py-3 rounded-xl font-bold transition-all text-sm md:text-base",children:"Pass"}),e.jsxs("button",{onClick:d,className:"bg-linear-to-r from-orange-600 to-red-600 hover:from-orange-500 hover:to-red-500 text-white py-3 rounded-xl font-black text-sm md:text-xl shadow-lg transform hover:scale-105 transition-all flex items-center justify-center gap-2",children:[e.jsx(Q,{size:18})," STEAL ALL!"]})]})]})]})}),Ee=({onConfirm:a,onCancel:o,isHost:d,onReturnToLobby:n})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6 max-w-sm w-full text-center shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Abandon the Harvest?"}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Leaving now will forfeit your gathered fruits."}),e.jsxs("div",{className:"flex flex-col gap-3",children:[d&&n&&e.jsx("button",{onClick:n,className:"w-full bg-orange-700 hover:bg-orange-600 text-white py-3 rounded font-bold transition-colors border border-orange-500 shadow-lg mb-2",children:"Return Group to Lobby"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:o,className:"bg-gray-700 hover:bg-gray-600 text-white py-3 rounded font-bold transition-colors",children:"Stay"}),e.jsx("button",{onClick:a,className:"bg-red-600 hover:bg-red-500 text-white py-3 rounded font-bold transition-colors",children:"Leave"})]})]})]})}),Et=({players:a,destroyedCards:o,onClose:d})=>e.jsx("div",{className:"fixed inset-0 z-250 bg-black/95 flex items-center justify-center p-4 animate-in fade-in zoom-in duration-300",children:e.jsxs("div",{className:"bg-gray-900 border-2 border-yellow-600 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden relative",children:[e.jsxs("div",{className:"p-6 bg-gray-950 border-b border-gray-800 flex justify-between items-center shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-transparent bg-clip-text bg-linear-to-r from-yellow-400 to-orange-500 uppercase italic",children:"Harvest Report"}),e.jsx("p",{className:"text-gray-400 text-sm font-bold",children:"All cards collected and destroyed"})]}),e.jsx("button",{onClick:d,className:"bg-gray-800 hover:bg-gray-700 text-white p-3 rounded-full transition-colors",children:e.jsx(J,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[e.jsxs("div",{className:"bg-red-950/30 rounded-2xl p-4 border border-red-900/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-red-400",children:[e.jsx(_e,{size:24}),e.jsx("h3",{className:"text-xl font-bold uppercase",children:"Rotten Fruit (Destroyed)"}),e.jsxs("span",{className:"bg-red-900/50 px-2 py-0.5 rounded text-xs text-red-200",children:[o?.length||0," Cards"]})]}),!o||o.length===0?e.jsx("p",{className:"text-gray-500 italic text-sm",children:"No fruits were harmed in this game."}):e.jsx("div",{className:"flex flex-wrap gap-2",children:o.sort().map((n,x)=>e.jsx("div",{className:"transform scale-75 origin-top-left -mr-4 -mb-4",children:e.jsx(S,{type:n,size:"sm"})},x))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(n=>e.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("span",{className:"font-bold text-yellow-500 text-lg flex items-center gap-2",children:[e.jsx(L,{size:18})," ",n.name]}),e.jsxs("span",{className:"text-white font-mono font-bold bg-gray-900 px-2 py-1 rounded",children:["Score: ",D(n.bank)]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 min-h-[60px] content-start bg-black/20 p-2 rounded-xl",children:n.bank&&n.bank.length>0?n.bank.sort().map((x,j)=>e.jsx("div",{className:"transform scale-75 origin-top-left -mr-3 -mb-3",children:e.jsx(S,{type:x,size:"sm"})},j)):e.jsx("span",{className:"text-gray-600 text-xs italic w-full text-center py-2",children:"Empty Basket"})})]},n.id))})]}),e.jsx("div",{className:"p-4 bg-gray-950 border-t border-gray-800 shrink-0 flex justify-center",children:e.jsx("button",{onClick:d,className:"bg-yellow-600 hover:bg-yellow-500 text-black font-black text-xl py-3 px-12 rounded-xl shadow-lg hover:scale-105 transition-transform",children:"SEE WINNER"})})]})}),ze=({onClose:a})=>e.jsx("div",{className:"fixed inset-0 bg-black/95 z-150 flex items-center justify-center p-0 md:p-4",children:e.jsxs("div",{className:"bg-gray-900 md:rounded-2xl w-full max-w-3xl h-full md:h-auto md:max-h-[90vh] overflow-hidden border border-yellow-500/30 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-950",children:[e.jsx("h2",{className:"text-2xl font-black text-transparent bg-clip-text bg-linear-to-r from-yellow-400 to-orange-500 uppercase italic",children:"Farming Guide"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-800 rounded-full text-gray-400",children:e.jsx(J,{})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto space-y-6 text-gray-300",children:[e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-yellow-500/20 p-3 rounded-lg text-yellow-500",children:e.jsx(X,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:"1. Push Your Luck"}),e.jsxs("p",{className:"text-sm",children:["Draw fruits from the deck. They enter your"," ",e.jsx("strong",{className:"text-red-400",children:"Risk Zone"}),"."]})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-red-500/20 p-3 rounded-lg text-red-500",children:e.jsx(Be,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:"2. The Bust Rule"}),e.jsxs("p",{className:"text-sm",children:["You are safe if you have ",e.jsx("strong",{children:"3 or fewer cards"})," in your Risk Zone.",e.jsx("br",{}),e.jsx("strong",{children:"Only if you have 3+ cards:"})," Drawing a fruit that matches one ",e.jsx("em",{children:"already"})," in your Risk Zone causes a"," ",e.jsx("strong",{children:"BUST"}),"! All fruits from this turn are lost.",e.jsx("br",{}),e.jsx("em",{children:"Note: Stealing does NOT cause a Bust, but having 3+ cards after stealing puts you in danger for your NEXT draw!"})]})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-orange-500/20 p-3 rounded-lg text-orange-500",children:e.jsx(Q,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:"3. Steal!"}),e.jsxs("p",{className:"text-sm",children:["If you draw a fruit that an opponent has in their"," ",e.jsx("strong",{className:"text-orange-400",children:"Danger Zone"})," (Table), you can ",e.jsx("strong",{children:"STEAL"})," them! They are added to your Risk Zone. Watch out: this increases your card count, making a Bust more likely on your next draw!"]})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-green-500/20 p-3 rounded-lg text-green-500",children:e.jsx(B,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:"4. Bank & Win"}),e.jsxs("p",{className:"text-sm",children:["Stop before busting to move fruits to your"," ",e.jsx("strong",{children:"Danger Zone"}),". At the start of your ",e.jsx("em",{children:"next"})," ","turn, they move to your ",e.jsx("strong",{children:"Safe Zone"}),".",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Winning:"})," The player with the highest total"," ",e.jsx("strong",{children:"VALUE"})," (not count) of banked fruits wins!"]})]})]})]}),e.jsx("div",{className:"p-4 bg-gray-900 border-t border-gray-800 text-center",children:e.jsx("button",{onClick:a,className:"bg-yellow-600 hover:bg-yellow-500 text-white px-8 py-3 rounded-lg font-bold",children:"Got it!"})})]})}),zt=({onStart:a})=>{const[o,d]=m.useState(!1),[n,x]=m.useState(!1),[j,R]=m.useState(!1);return m.useEffect(()=>{const M=localStorage.getItem("fructose_room_id");d(!!M);const t=new Image;t.src=Ie,t.onload=()=>{x(!0),setTimeout(()=>{R(!0)},2e3)}},[]),e.jsxs("div",{className:"fixed inset-0 z-[200] bg-black flex flex-col items-center justify-end pb-20 md:justify-center md:pb-0 font-sans overflow-hidden",children:[!n&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-50 text-yellow-500/50",children:[e.jsx(Re,{size:48,className:"animate-spin mb-4"}),e.jsx("div",{className:"font-mono text-xs tracking-[0.3em] animate-pulse",children:"INITIALIZING SYSTEM..."})]}),e.jsxs("div",{className:`absolute inset-0 z-0 overflow-hidden transition-opacity duration-1000 ${n?"opacity-100":"opacity-0"}`,children:[e.jsx("div",{className:`w-full h-full bg-cover bg-center transition-transform duration-[2000ms] ease-out ${n?"scale-100":"scale-130"}`,style:{backgroundImage:`url(${Ie})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/40"})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center gap-8 animate-in fade-in slide-in-from-bottom-10 duration-1000",children:e.jsx("div",{className:`transform transition-all duration-1000 ease-out ${j?"translate-y-0 opacity-100":"translate-y-32 opacity-0"}`,children:e.jsxs("button",{onClick:a,className:"group relative px-12 py-5 bg-yellow-600/20 hover:bg-yellow-600/40 border border-yellow-500/50 hover:border-yellow-400 text-yellow-300 font-black text-2xl tracking-widest rounded-none transform transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(34,211,238,0.4)] backdrop-blur-md overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-yellow-400/10 to-transparent translate-y-[-100%] animate-[scan_2s_infinite_linear]"}),e.jsx("span",{className:"relative z-10 flex items-center gap-3 animate-pulse",children:o?e.jsxs(e.Fragment,{children:[e.jsx(ht,{className:"animate-spin-slow"})," RESUME"]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{})," PLAY"]})})]})})}),e.jsxs("div",{className:"absolute bottom-4 text-slate-600 text-xs text-center",children:["Inspired by Fruit Fight. A tribute game.",e.jsx("br",{}),"Developed by ",e.jsx("strong",{children:"RAWFID K SHUVO"}),"."]}),e.jsx("style",{children:`
        @keyframes scan {
          0% { transform: translateY(-100%); }
          100% { transform: translateY(200%); }
        }
      `})]})};function Tt(){const[a,o]=m.useState(null),[d,n]=m.useState("splash"),[x,j]=m.useState(""),[R,M]=m.useState(""),[t,Le]=m.useState(null),[H,_]=m.useState(""),[ee,C]=m.useState(!1),[Pe,te]=m.useState(!1),[se,ae]=m.useState(!1),[re,F]=m.useState(!1),[le,A]=m.useState(!1),[O,ne]=m.useState(!1),[W,oe]=m.useState(null),[Me,ie]=m.useState(!1),[de,ce]=m.useState(null),[xe,me]=m.useState(null),[k,Fe]=m.useState(()=>localStorage.getItem("gameHub_playerName")||"");m.useEffect(()=>{k&&localStorage.setItem("gameHub_playerName",k)},[k]);const ue=m.useRef(null),Ge=()=>{const r=localStorage.getItem("fructose_room_id");r&&(C(!0),j(r)),n("menu")};m.useEffect(()=>{t?.status==="finished"&&ie(!0)},[t?.status]),m.useEffect(()=>{(async()=>typeof __initial_auth_token<"u"&&__initial_auth_token?await tt(K,__initial_auth_token):await st(K))();const s=Qe(K,o);return()=>s()},[]),m.useEffect(()=>{const r=je(g(p,"game_hub_settings","config"),s=>{s.exists()&&(s.data()[Nt]?.maintenance?te(!0):te(!1))});return()=>r()},[]),m.useEffect(()=>{if(!x||!a)return;const r=je(g(p,"artifacts",y,"public","data","rooms",x),s=>{if(s.exists()){const l=s.data();if(!l.players.find(u=>u.id===a.uid)){j(""),n("menu"),_("You were kicked by the host."),localStorage.removeItem("fructose_room_id");return}Le(l),l.status==="playing"||l.status==="finished"?n("game"):l.status==="lobby"&&n("lobby"),l.lastEvent&&l.lastEvent.id!==ue.current&&(l.lastEvent.timestamp||Date.now())>Date.now()-1e4&&(ue.current=l.lastEvent.id,oe(l.lastEvent),l.lastEvent.type==="STEAL"&&l.lastEvent.targetIds&&l.lastEvent.targetIds.includes(a.uid)&&me(l.lastEvent),l.lastEvent.type==="BANK"&&l.lastEvent.playerId===a.uid&&ce({amount:l.lastEvent.amount,cards:l.lastEvent.cards}),setTimeout(()=>oe(null),3e3))}else j(""),n("menu"),_("The Fruit Stand has closed (Host left)."),localStorage.removeItem("fructose_room_id")});return()=>r()},[x,a]);const Ue=async()=>{if(!k)return _("Name required");C(!0);const r="123456789ABCDEFGHIJKLMNPQRSTUVWXYZ";let s="";for(let u=0;u<6;u++)s+=r.charAt(Math.floor(Math.random()*r.length));const l=q([...U]),c={roomId:s,hostId:a.uid,status:"lobby",players:[{id:a.uid,name:k,hand:[],table:[],bank:[],ready:!1}],deck:l,turnIndex:0,turnPhase:"IDLE",stealTargetIds:[],destroyedCards:[],drawnCard:null,lastEvent:null,logs:[]};await at(g(p,"artifacts",y,"public","data","rooms",s),c),localStorage.setItem("fructose_room_id",s),j(s),M(s),C(!1)},He=async()=>{if(!R||!k)return _("Code and Name required");C(!0);const r=g(p,"artifacts",y,"public","data","rooms",R),s=await rt(r);if(!s.exists()){_("Room not found"),C(!1);return}const l=s.data();if(l.status!=="lobby"){_("Game already started"),C(!1);return}if(l.players.length>=6){_("Room full"),C(!1);return}l.players.find(c=>c.id===a.uid)||await v(r,{players:T({id:a.uid,name:k,hand:[],table:[],bank:[],ready:!1})}),localStorage.setItem("fructose_room_id",R),j(R),C(!1)},Oe=()=>{const r=t.roomId,s=()=>{ae(!0),setTimeout(()=>ae(!1),2e3),triggerFeedback&&triggerFeedback("neutral","COPIED!","",B)};try{navigator.clipboard.writeText(r),s()}catch{const c=document.createElement("textarea");c.value=r,document.body.appendChild(c),c.select(),document.execCommand("copy"),document.body.removeChild(c),s()}},he=async()=>{if(t.hostId!==a.uid)return;const r=q([...U]),s=t.players.map(c=>({...c,ready:!1,hand:[],table:[],bank:[]})),l=Math.floor(Math.random()*s.length);await v(g(p,"artifacts",y,"public","data","rooms",x),{status:"playing",players:s,deck:r,turnIndex:l,turnPhase:"DRAWING",logs:[{text:"The Harvest Begins! Draw fruits without busting.",type:"neutral"}],stealTargetIds:[],destroyedCards:[],drawnCard:null,lastEvent:null})},fe=async()=>{if(t.hostId!==a.uid)return;const r=t.players.map(s=>({...s,hand:[],table:[],bank:[],ready:!1}));await v(g(p,"artifacts",y,"public","data","rooms",x),{status:"lobby",players:r,deck:q([...U]),logs:[],turnIndex:0,destroyedCards:[]}),A(!1)},be=async()=>{if(!x)return;localStorage.removeItem("fructose_room_id");const r=g(p,"artifacts",y,"public","data","rooms",x);if(t.hostId===a.uid)await ve(r);else if(t.players.length<=1)await ve(r);else{const s=t.players.findIndex(f=>f.id===a.uid),l=t.players.filter(f=>f.id!==a.uid);let c=t.turnIndex,u=!1;s<t.turnIndex?c=Math.max(0,t.turnIndex-1):s===t.turnIndex&&(u=!0),l.length>0?c>=l.length&&(c=0):c=0;let h=t.status;t.status==="playing"&&l.length<2&&(h="finished");const w={players:l,status:h,turnIndex:c,logs:T({text:`${k} left the game.`,type:"danger"})};u&&(w.turnPhase="DRAWING",w.drawnCard=null,w.stealTargetIds=[]),await v(r,w)}j(""),n("menu"),A(!1)},ge=async(r,s,l=[],c=null)=>{let u=(t.turnIndex+1)%r.length;const h=r[u];let w=null;if(h.table.length>0){const f=D(h.table),N=[...h.table];h.bank=[...h.bank||[],...h.table],h.table=[],l.push({text:`${h.name} banked ${f} points!`,type:"success"}),w={id:Date.now(),timestamp:Date.now(),type:"BANK",playerId:h.id,amount:f,cards:N,title:"SECURED!",message:`${h.name} banked ${f} points!`}}await v(g(p,"artifacts",y,"public","data","rooms",x),{players:r,deck:s,turnIndex:u,turnPhase:"DRAWING",drawnCard:null,stealTargetIds:[],lastEvent:c||w||null,logs:T(...l)})},We=(r,s)=>r.length<3?!1:r.includes(s),Y=r=>r.map(s=>({...s,bank:[...s.bank,...s.table,...s.hand],table:[],hand:[]})),Ye=async()=>{if(t.deck.length===0)return;const r=[...t.players],s=[...t.deck],l=r[t.turnIndex],c=s.pop();if(We(l.hand,c)){const h=[...l.hand,c],f=[...t.destroyedCards||[],...h],N={id:Date.now(),timestamp:Date.now(),type:"BUST",title:"BUSTED!",message:`${l.name} got greedy!`},i=[{text:`${l.name} drew ${I[c].name} and BUSTED!`,type:"danger"}];if(s.length===0){l.hand=[];const E=Y(r);await v(g(p,"artifacts",y,"public","data","rooms",x),{players:E,deck:s,status:"finished",lastEvent:N,destroyedCards:f,logs:T(...i,{text:"Deck Empty on a Bust! Game Over!",type:"neutral"}),drawnCard:c,turnPhase:"BUSTED"});return}await v(g(p,"artifacts",y,"public","data","rooms",x),{players:r,deck:s,lastEvent:N,destroyedCards:f,logs:T(...i),drawnCard:c,turnPhase:"BUSTED"});const b=JSON.parse(JSON.stringify(r));b[t.turnIndex].hand=[],setTimeout(()=>ge(b,s,[],null),2500);return}const u=[];for(let h of r)h.id!==l.id&&h.table.includes(c)&&u.push(h.id);if(u.length>0)await v(g(p,"artifacts",y,"public","data","rooms",x),{deck:s,drawnCard:c,turnPhase:"STEALING",stealTargetIds:u});else if(l.hand.push(c),s.length===0){const h=Y(r);await v(g(p,"artifacts",y,"public","data","rooms",x),{players:h,deck:s,status:"finished",logs:T({text:"Deck Empty! Game Over!",type:"neutral"})})}else await v(g(p,"artifacts",y,"public","data","rooms",x),{players:r,deck:s})},pe=async r=>{const s=[...t.players],l=t.turnIndex,c=s[l],u=t.drawnCard,h=[];let w=null;if(c.hand.push(u),r){let f=0;const N=[],i=[];t.stealTargetIds.forEach(b=>{const E=s.findIndex($=>$.id===b);if(E===-1)return;const z=s[E],Z=z.table.filter($=>$===u),Ve=z.table.filter($=>$!==u);Z.length>0&&(z.table=Ve,c.hand=[...c.hand,...Z],f+=Z.length,N.push(z.name),i.push(b))}),h.push({text:`${c.name} stole ${f} ${I[u].name}(s) from ${N.join(", ")}!`,type:"warning"}),w={id:Date.now(),timestamp:Date.now(),type:"STEAL",title:"THIEF!",message:`${c.name} stole ${f} fruits from ${N.join(", ")}!`,targetIds:i,thiefId:c.id,cardType:u}}else h.push({text:`${c.name} passed on stealing.`,type:"neutral"});if(t.deck.length===0){const f=Y(s);await v(g(p,"artifacts",y,"public","data","rooms",x),{players:f,status:"finished",logs:T(...h,{text:"Deck Empty! Game Over!",type:"neutral"})})}else await v(g(p,"artifacts",y,"public","data","rooms",x),{players:s,turnPhase:"DRAWING",stealTargetIds:[],drawnCard:null,lastEvent:w,logs:T(...h)})},Ze=async()=>{const r=[...t.players],s=r[t.turnIndex];s.hand.length,s.table=[...s.table,...s.hand],s.hand=[];const l=[{text:`${s.name} stopped safely.`,type:"neutral"}];await ge(r,t.deck,l)},ye=async()=>{if(!x)return;const r=[...t.players],s=r.findIndex(l=>l.id===a.uid);r[s].ready=!r[s].ready,await v(g(p,"artifacts",y,"public","data","rooms",x),{players:r})},Ke=async r=>{const s=t.players.filter(l=>l.id!==r);await v(g(p,"artifacts",y,"public","data","rooms",x),{players:s})};if(Pe)return e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white p-4 text-center",children:[e.jsx(Ce,{}),e.jsxs("div",{className:"bg-orange-500/10 p-8 rounded-2xl border border-orange-500/30",children:[e.jsx(et,{size:64,className:"text-orange-500 mx-auto mb-4 animate-bounce"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Under Maintenance"}),e.jsx("p",{className:"text-gray-400",children:"The farmers are tending to the trees. Come back later for fresh fruit."})]}),e.jsx("div",{className:"h-8"}),e.jsx("a",{href:"/rawfids-gamehub/",children:e.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:e.jsx("div",{className:"text-center pb-12 animate-pulse",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-4 bg-slate-900/50 rounded-full border border-indigo-500/20 text-indigo-300 font-bold tracking-widest text-sm uppercase backdrop-blur-sm",children:[e.jsx(we,{size:16})," Visit Gamehub...Try our other releases..."," ",e.jsx(we,{size:16})]})})})}),e.jsx(V,{})]});if(!a)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center text-yellow-500 animate-pulse",children:"Harvest approaching..."});if(x&&!t&&!H)return e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white p-4",children:[e.jsx(G,{}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur p-8 rounded-2xl border border-zinc-700 shadow-2xl flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsx(Re,{size:48,className:"text-yellow-500 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Reconnecting..."}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Resuming your session"})]})]})]});if(d==="splash")return e.jsx(zt,{onStart:Ge});if(d==="menu")return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-4 relative overflow-hidden font-sans",children:[e.jsx(G,{}),e.jsx("nav",{className:"absolute top-0 left-0 w-full p-4 z-50",children:e.jsxs("a",{href:"/rawfids-gamehub/",className:`flex items-center gap-2 text-yellow-800 rounded-lg 
			font-bold shadow-md hover:text-yellow-400 transition-colors w-fit animate-pulse`,children:[e.jsx(mt,{}),e.jsx("span",{children:"Back to Gamehub"})]})}),e.jsxs("div",{className:"z-10 text-center mb-10",children:[e.jsxs("div",{className:"flex justify-center gap-2 mb-4 animate-bounce",children:[e.jsx(P,{size:48,className:"text-yellow-400"}),e.jsx(De,{size:48,className:"text-red-500"})]}),e.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-linear-to-r from-yellow-400 via-orange-500 to-red-500 font-serif tracking-tight drop-shadow-xl italic transform -rotate-2",children:"FRUCTOSE FURY"}),e.jsx("p",{className:"text-white/60 tracking-[0.5em] uppercase mt-4 text-sm font-bold",children:"Juicy Risks & Sweet Rewards"})]}),e.jsxs("div",{className:"bg-gray-900/80 backdrop-blur border border-yellow-500/30 p-8 rounded-2xl w-full max-w-md shadow-2xl z-10 animate-in slide-in-from-bottom-10 duration-700 delay-100",children:[H&&e.jsx("div",{className:"bg-red-900/50 text-red-200 p-2 mb-4 rounded text-center text-sm border border-red-800",children:H}),e.jsx("input",{className:"w-full bg-black/50 border border-gray-600 p-3 rounded-xl mb-4 text-white placeholder-gray-500 focus:border-yellow-500 outline-none transition-colors",placeholder:"Farmer Name",value:k,onChange:r=>Fe(r.target.value)}),e.jsxs("button",{onClick:Ue,disabled:ee,className:"w-full bg-linear-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 p-4 rounded-xl font-bold mb-4 flex items-center justify-center gap-2 shadow-lg transform hover:scale-105 transition-all text-white",children:[e.jsx(X,{size:20,fill:"currentColor"})," Open New Stand"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsx("input",{className:"w-full sm:flex-1 bg-black/50 border border-gray-600 p-3 rounded-xl text-white placeholder-gray-500 uppercase font-mono tracking-wider focus:border-yellow-500 outline-none",placeholder:"ROOM CODE",value:R,onChange:r=>M(r.target.value.toUpperCase())}),e.jsx("button",{onClick:He,disabled:ee,className:"w-full sm:w-auto bg-gray-800 hover:bg-gray-700 border border-gray-600 px-6 py-3 rounded-xl font-bold transition-colors",children:"Join"})]}),e.jsxs("button",{onClick:()=>F(!0),className:"w-full text-center text-gray-400 hover:text-white text-sm flex items-center justify-center gap-2",children:[e.jsx(Ne,{size:14})," Farming Guide"]})]}),re&&e.jsx(ze,{onClose:()=>F(!1)})]});if(d==="lobby"&&t){const r=t.hostId===a.uid;return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-6 relative",children:[e.jsx(G,{}),e.jsx(Ce,{}),e.jsxs("div",{className:"z-10 w-full max-w-lg bg-gray-900/90 backdrop-blur p-8 rounded-2xl border border-orange-500/30 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl text-yellow-500 font-bold uppercase tracking-wider",children:"Fruit Stand"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-3xl font-mono text-white font-black tracking-widest",children:t.roomId}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:Oe,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:se?e.jsx(B,{size:16,className:"text-green-500"}):e.jsx(ut,{size:16})}),se&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-yellow-500 text-black text-xs font-bold px-2 py-1 rounded shadow-lg animate-fade-in-up whitespace-nowrap",children:"Copied!"})]})]})]}),e.jsx("button",{onClick:()=>A(!0),className:"p-2 bg-red-900/30 hover:bg-red-900/50 rounded-full text-red-400 transition-colors",children:e.jsx(ke,{size:20})})]}),e.jsxs("div",{className:"space-y-3 mb-8",children:[t.players.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-3 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${s.ready?"bg-green-500 text-black":"bg-gray-700 text-gray-400"}`,children:e.jsx(L,{size:18})}),e.jsx("span",{className:`font-bold ${s.id===a.uid?"text-yellow-400":"text-gray-300"}`,children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.ready&&e.jsx("span",{className:"text-green-500 text-xs font-bold uppercase tracking-wider",children:"Ready"}),r&&s.id!==a.uid&&e.jsx("button",{onClick:()=>Ke(s.id),className:"text-gray-600 hover:text-red-500",children:e.jsx(_e,{size:16})})]})]},s.id)),t.players.length<2&&e.jsx("div",{className:"text-center text-gray-500 py-4 italic",children:"Waiting for more farmers..."})]}),r?e.jsx("button",{onClick:he,disabled:t.players.length<2,className:`w-full py-4 rounded-xl font-black text-xl uppercase tracking-widest shadow-lg transition-all ${t.players.length>=2?"bg-green-600 hover:bg-green-500 text-white hover:scale-105":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:"Start Harvest"}):e.jsx("div",{className:"w-full py-4 rounded-xl font-bold text-xl text-center text-gray-500 bg-gray-800/50 border border-gray-700 animate-pulse",children:"Waiting for Host to Start..."})]}),le&&e.jsx(Ee,{onConfirm:be,onCancel:()=>A(!1),isHost:r}),e.jsx(V,{})]})}if(d==="game"&&t){const r=t.players.find(i=>i.id===a.uid);if(!r)return e.jsx("div",{className:"text-white text-center mt-20",children:"Syncing game data..."});const s=t.players[t.turnIndex];if(!s)return e.jsx("div",{className:"text-white text-center mt-20",children:"Syncing turn data..."});const l=s.id===a.uid,c=t.players.filter(i=>i.id!==a.uid),u=t.turnPhase==="STEALING",h=W&&W.type==="BUST";let w=[];u&&t.stealTargetIds&&(w=t.stealTargetIds.map(i=>{const b=t.players.find(z=>z.id===i);if(!b)return null;const E=b.table.filter(z=>z===t.drawnCard).length;return{name:b.name,count:E}}).filter(i=>i!==null));let f=null;t.status==="finished"&&(f=[...t.players].sort((i,b)=>D(b.bank)-D(i.bank))[0]);const N=t.players.every(i=>i.id===t.hostId||i.ready);return e.jsxs("div",{className:`h-screen bg-gray-950 text-white flex flex-col relative overflow-hidden transition-colors duration-100 ${h?"animate-shake bg-red-900!":""}`,children:[e.jsx(G,{}),e.jsx(kt,{event:W,currentUserId:a.uid}),xe&&e.jsx(St,{event:xe,onClose:()=>me(null)}),de!==null&&e.jsx(It,{data:de,onClose:()=>ce(null)}),e.jsxs("div",{className:"h-14 bg-gray-900/90 border-b border-gray-800 flex items-center justify-between px-4 z-160 sticky top-0 backdrop-blur-md shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"text-yellow-500",size:20}),e.jsx("span",{className:"font-black uppercase tracking-tight text-lg hidden md:block",children:"Fructose Fury"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(!0),className:"p-2 text-gray-400 hover:bg-gray-800 rounded-full",children:e.jsx(Ne,{size:20})}),e.jsx("button",{onClick:()=>ne(!O),className:`p-2 rounded-full ${O?"bg-yellow-900 text-yellow-400":"text-gray-400 hover:bg-gray-800"}`,children:e.jsx(ft,{size:20})}),e.jsx("button",{onClick:()=>A(!0),className:"p-2 text-red-400 hover:bg-red-900/20 rounded-full",children:e.jsx(ke,{size:20})})]})]}),u&&l&&e.jsx(Ct,{targets:w,fruitType:t.drawnCard,onSteal:()=>pe(!0),onPass:()=>pe(!1)}),re&&e.jsx(ze,{onClose:()=>F(!1)}),le&&e.jsx(Ee,{onConfirm:be,onCancel:()=>A(!1),isHost:t.hostId===a.uid,onReturnToLobby:fe}),O&&e.jsx("div",{className:"fixed top-16 right-4 w-64 max-h-60 bg-gray-900/95 border border-gray-700 rounded-xl z-155 overflow-y-auto p-2 shadow-2xl",children:e.jsxs("div",{className:"bg-gray-900 w-full max-w-md h-[70vh] rounded-2xl flex flex-col border border-gray-700",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold",children:"Log"}),e.jsx("button",{onClick:()=>ne(!1),children:e.jsx(J,{})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[...t.logs].reverse().map((i,b)=>e.jsx("div",{className:`p-2 rounded text-sm border-l-2 ${i.type==="danger"?"border-red-500 bg-red-900/20":i.type==="warning"?"border-orange-500 bg-orange-900/20":"border-gray-500 bg-gray-800"}`,children:i.text},b))})]})}),Me&&e.jsx(Et,{players:t.players,destroyedCards:t.destroyedCards||[],onClose:()=>ie(!1)}),t.status==="finished"&&e.jsxs("div",{className:"fixed inset-0 top-14 z-150 bg-black/95 flex flex-col items-center justify-center p-6 text-center animate-in zoom-in overflow-y-auto",children:[e.jsx(Se,{size:80,className:"text-yellow-400 mb-6 animate-bounce"}),e.jsx("h1",{className:"text-5xl font-black text-white mb-2 uppercase",children:"Harvest Complete!"}),e.jsxs("p",{className:"text-2xl text-gray-300 mb-8",children:["The Master Farmer is"," ",e.jsx("span",{className:"text-yellow-400 font-bold",children:f?.name})," ","with ",D(f?.bank||[])," points!"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 max-w-md w-full mb-8",children:t.players.map(i=>e.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl flex justify-between items-center border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i.ready&&e.jsx(B,{size:16,className:"text-green-500"}),e.jsx("span",{className:i.id===f.id?"text-yellow-400 font-bold":"text-gray-400",children:i.name})]}),e.jsx("span",{className:"font-mono text-xl",children:D(i.bank||[])})]},i.id))}),e.jsxs("div",{className:"flex flex-col gap-4 items-center w-full max-w-md pb-10",children:[t.hostId!==a.uid&&(r.ready?e.jsx("button",{onClick:ye,className:"w-full py-3 bg-gray-700 hover:bg-gray-600 rounded-xl font-bold text-green-400 border border-green-500/50",children:"Waiting for others..."}):e.jsx("button",{onClick:ye,className:"w-full py-3 bg-blue-600 hover:bg-blue-500 rounded-xl font-bold text-white shadow-lg animate-pulse",children:"Ready for Next Game"})),t.hostId===a.uid&&e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx("button",{onClick:fe,disabled:!N,className:`flex-1 py-3 rounded-xl font-bold transition-colors ${N?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-800 text-gray-500 cursor-not-allowed border border-gray-700"}`,children:"Lobby"}),e.jsx("button",{onClick:he,disabled:!N,className:`flex-1 py-3 rounded-xl font-bold text-white shadow-lg transition-all ${N?"bg-green-600 hover:bg-green-500 hover:scale-105":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:"New Harvest"})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col w-full max-w-6xl mx-auto p-2 md:p-4 gap-2 md:gap-4 overflow-hidden",children:[e.jsx("div",{className:"flex-none flex items-stretch gap-3 overflow-x-auto py-4 px-2 no-scrollbar md:flex-wrap md:justify-center min-h-[25vh] md:min-h-0",children:c.map(i=>e.jsxs("div",{className:`bg-gray-900/80 p-3 rounded-xl border-2 flex flex-col gap-2 
                  min-w-[150px] md:min-w-[160px] 
                  transition-all relative group
                  ${t.players[t.turnIndex].id===i.id?"border-yellow-500 shadow-yellow-900/20 shadow-lg scale-[1.02] animate-pulse":"border-gray-800 opacity-90"}`,children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-700 pb-1",children:[e.jsx("span",{className:"font-bold text-sm truncate max-w-[90px]",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1 bg-green-900/30 px-1.5 rounded text-green-400 text-xs",children:[e.jsx(Se,{size:10})," ",D(i.bank||[])]})]}),e.jsx("div",{className:"flex flex-wrap content-start gap-1 flex-1 bg-black/20 rounded p-1 overflow-y-auto min-h-[80px] max-h-[160px]",children:i.table.length===0?e.jsx("span",{className:"text-[10px] text-gray-600 w-full text-center py-4",children:"Safe"}):i.table.map((b,E)=>e.jsx("div",{className:"transform scale-75 origin-top-left -mr-3 -mb-3 hover:z-10 hover:scale-100 transition-transform",children:e.jsx(S,{type:b,size:"sm"})},E))})]},i.id))}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-2 relative min-h-0",children:[e.jsx("div",{className:"absolute top-0 pointer-events-none w-full flex justify-center z-10",children:t.logs.length>0&&e.jsx("div",{className:"bg-black/60 backdrop-blur px-4 py-1 rounded-full text-xs text-yellow-100/80 border border-yellow-500/20 animate-in fade-in slide-in-from-top-2 text-center max-w-[90%] truncate shadow-lg",children:t.logs[t.logs.length-1].text})}),e.jsxs("div",{className:"flex items-center gap-4 md:gap-16 w-full justify-center",children:[e.jsxs("button",{onClick:l&&!u&&t.turnPhase!=="BUSTED"?Ye:void 0,disabled:!l||u||t.turnPhase==="BUSTED",className:`relative w-24 h-36 md:w-32 md:h-48 bg-gray-800 rounded-xl border-4 border-gray-700 shadow-2xl flex items-center justify-center group transition-all shrink-0 ${l&&!u&&t.turnPhase!=="BUSTED"?"hover:scale-105 cursor-pointer hover:border-yellow-500 ring-4 ring-yellow-500/20":"opacity-80 cursor-default"}`,children:[e.jsx("div",{className:"absolute inset-2 border-2 border-dashed border-gray-600 rounded-lg"}),e.jsxs("div",{className:"text-center z-10",children:[e.jsx("span",{className:"block font-black text-xl md:text-2xl text-gray-500",children:t.deck.length}),e.jsx("span",{className:"text-[10px] uppercase text-gray-600 font-bold",children:"Cards"})]}),l&&!u&&t.turnPhase!=="BUSTED"&&e.jsx("div",{className:"absolute -bottom-4 md:-bottom-8 bg-yellow-500 text-black text-[10px] md:text-xs font-bold px-3 py-1 rounded-full animate-bounce shadow-lg z-20",children:"DRAW!"})]}),e.jsxs("div",{className:"flex items-center justify-start p-2 pl-4 pt-10 pb-4 bg-gray-900/50 rounded-3xl border-2 border-dashed border-gray-700 h-[160px] md:h-[180px] w-full max-w-[500px] overflow-x-auto no-scrollbar relative",children:[t.drawnCard&&t.turnPhase==="BUSTED"&&e.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-3xl animate-in fade-in",children:e.jsxs("div",{className:"transform rotate-12 scale-110 shadow-2xl shadow-red-500/50",children:[e.jsx(S,{type:t.drawnCard,size:"lg"}),e.jsx("div",{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 bg-red-600 text-white font-black px-2 py-1 rounded text-xs uppercase tracking-widest whitespace-nowrap",children:"Fatal Draw"})]})}),s.hand.length===0&&!t.drawnCard?e.jsx("div",{className:"w-full text-center",children:e.jsx("span",{className:"text-gray-600 font-bold uppercase tracking-widest text-xs md:text-sm",children:"Risk Zone Empty"})}):e.jsx("div",{className:"flex -space-x-8 md:-space-x-12 px-2",children:s.hand.map((i,b)=>e.jsx("div",{className:"transform transition-transform duration-200 hover:-translate-y-6 hover:scale-110 z-0 hover:z-30 shrink-0 shadow-xl",children:e.jsx(S,{type:i,animate:b===s.hand.length-1})},b))})]})]}),l&&s.hand.length>0&&!u&&e.jsx("div",{className:"flex gap-4 animate-in slide-in-from-bottom-4 z-20 mt-2",children:e.jsxs("button",{onClick:Ze,className:"bg-green-600 hover:bg-green-500 text-white px-8 md:px-12 py-3 md:py-4 rounded-xl font-black text-lg md:text-xl shadow-lg shadow-green-900/20 transform hover:scale-105 transition-all flex items-center gap-2 border-b-4 border-green-800 active:border-b-0 active:translate-y-1",children:[e.jsx(B,{size:20})," BANK IT!"]})}),!l&&e.jsxs("div",{className:"bg-gray-900/80 px-4 md:px-6 py-2 md:py-3 rounded-full border border-gray-700 text-gray-400 font-mono text-xs md:text-sm animate-pulse text-center mt-2",children:["Waiting for ",s.name,"..."]})]}),e.jsx("div",{className:`flex-none bg-gray-900 p-3 md:p-4 rounded-t-3xl border-t-4 ${l?"border-yellow-500":"border-gray-800"} shadow-[0_-10px_40px_rgba(0,0,0,0.5)] z-20 pb-6 md:pb-4`,children:e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-gray-800 rounded-full border-2 border-gray-600 flex items-center justify-center overflow-hidden",children:[e.jsx(L,{size:24,className:"text-gray-400 md:hidden"}),e.jsx(L,{size:32,className:"text-gray-400 hidden md:block"})]}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-green-600 text-white w-6 h-6 md:w-8 md:h-8 rounded-full flex items-center justify-center font-bold text-xs md:text-base shadow-lg border-2 border-gray-900",children:D(r.bank||[])})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm md:text-xl font-bold text-white",children:[r.name," (You)"]}),e.jsx("div",{className:"text-[10px] md:text-xs text-green-400 font-bold uppercase tracking-wider",children:"Safe Zone"})]})]}),e.jsxs("div",{className:"flex-1 ml-4 md:ml-8 flex flex-col items-end overflow-hidden",children:[e.jsxs("span",{className:"text-[10px] md:text-xs text-orange-400 font-bold uppercase tracking-wider mb-1 md:mb-2 flex items-center gap-1 whitespace-nowrap",children:[e.jsx(Ae,{size:12})," Danger Zone (Next Turn)"]}),e.jsx("div",{className:"flex flex-wrap justify-end gap-1 md:gap-2 bg-black/30 p-2 rounded-xl border border-gray-800 w-full md:w-auto min-h-[60px] md:min-h-[70px] max-h-[100px] min-w-[120px] overflow-y-auto",children:r.table.length===0?e.jsx("span",{className:"text-gray-600 text-[10px] md:text-xs self-center mx-auto",children:"Empty"}):r.table.map((i,b)=>e.jsx("div",{className:"transform scale-75 hover:scale-100 transition-transform origin-bottom shrink-0 z-10",children:e.jsx(S,{type:i,size:"sm"})},b))})]})]})})]}),e.jsx(V,{})]})}return null}lt.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(Tt,{})}));
