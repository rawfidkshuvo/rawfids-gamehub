import{c as Te,i as Ee,g as Me,a as Le,r as h,e as Ge,o as oe,d as j,j as e,H as Pe,S as ie,n as Be,s as Oe,h as De,p as de,u as I,q as G,t as He,X as Ue,m as qe}from"./x-vdu6PxPT.js";import{L as Fe,S as We,B as ce,C as W,a as Ze,b as Y}from"./step-back-DgPuYW0s.js";import{S as P}from"./skull--JE29QMg.js";import{S as J}from"./syringe-DlCp0jrE.js";import{P as Ye}from"./play-u0q38rUa.js";import{U as Ve}from"./user-hi-jrCL7.js";import{C as xe}from"./crown-DhFWzZA3.js";import{T as Ke}from"./trash-2-CC3Hg-Aa.js";import{B as V}from"./biohazard-CQXSp3Bc.js";import{H as Qe}from"./history-r3RmdCN7.js";import{R as Xe}from"./rotate-ccw-B8nxxfV1.js";import{C as Je}from"./crosshair-S3deBiGz.js";import{P as et}from"./pill-u4hcJgoR.js";import{A as tt}from"./arrow-right-88Wq9XMb.js";import{U as st}from"./users-Dsm1N_Bg.js";import{H as at}from"./house-BdFnrmDF.js";const rt=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],me=Te("ban",rt),nt=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyBjIjK53vVJW1y5RaqEFGSFp0ECVDBEe1o",authDomain:"game-hub-ff8aa.firebaseapp.com",projectId:"game-hub-ff8aa",storageBucket:"game-hub-ff8aa.firebasestorage.app",messagingSenderId:"586559578902",appId:"1:586559578902:web:91da4fa4ace038d16aa637"},ge=Ee(nt),Q=Me(ge),w=Le(ge),N=typeof __app_id<"u"?__app_id:"last-of-us-game",lt="22",ot={2:14,3:12,4:11,5:10,6:9},it=()=>{const l=[];return Object.entries({1:2,3:4,5:6,7:8,9:6,11:4,13:2}).forEach(([u,x])=>{for(let g=0;g<x;g++)l.push({val:parseInt(u),type:"ZOMBIE"})}),Object.entries({2:3,4:5,6:7,8:7,10:5,12:3}).forEach(([u,x])=>{for(let g=0;g<x;g++)l.push({val:parseInt(u),type:"ANTIDOTE"})}),l},dt=l=>{let y=l.length,b;for(;y!==0;)b=Math.floor(Math.random()*y),y--,[l[y],l[b]]=[l[b],l[y]];return l},X=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(P,{size:12,className:"text-red-600"}),e.jsx("span",{className:"text-[10px] font-black tracking-widest text-red-600 uppercase",children:"LAST OF US"})]}),ue=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(P,{size:22,className:"text-red-600"}),e.jsx("span",{className:"text-[20px] font-black tracking-widest text-red-600 uppercase",children:"LAST OF US"})]}),fe={1:V,2:et,3:Je,4:P,5:J},Z=({isShaking:l})=>e.jsxs("div",{className:`absolute inset-0 overflow-hidden pointer-events-none z-0 ${l?"animate-shake bg-red-900/20":""}`,children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,var(--tw-gradient-stops))] from-slate-900/40 via-gray-950 to-black"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[...Array(20)].map((y,b)=>{const u=Object.keys(fe),x=u[b%u.length],g=fe[x];return e.jsx("div",{className:"absolute animate-float text-white/60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${10+Math.random()*20}s`,transform:`scale(${.5+Math.random()})`},children:e.jsx(g,{size:32})},b)})}),e.jsx("style",{children:`
      @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
      }
      .animate-float { animation: float infinite ease-in-out; }
      
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
      .animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
    `})]}),he=({val:l,type:y,count:b=1,size:u="md",selected:x=!1,onClick:g,disabled:S=!1,faded:K=!1,isBoard:r=!1})=>{const z=y==="ZOMBIE";let _="";r?_=z?"bg-red-900 border-red-600 shadow-red-900/40":"bg-lime-900 border-lime-500 shadow-lime-900/40":_=z?"bg-linear-to-b from-red-800 to-stone-900 border-red-600":"bg-linear-to-b from-lime-700 to-stone-900 border-lime-500";const E=z?"text-red-100":"text-lime-100",B=z?"text-red-500/30":"text-lime-400/30",C=u==="lg"?64:u==="md"?48:24,D=u==="lg"?"w-20 h-32 md:w-28 md:h-40 text-3xl md:text-5xl":u==="sm"?"w-10 h-14 text-xs":"w-16 h-24 md:w-20 md:h-28 text-xl md:text-2xl";return e.jsxs("div",{onClick:S?void 0:g,className:`
        ${D} rounded-xl border-2 flex flex-col items-center justify-center shadow-xl relative overflow-hidden transition-all duration-200 shrink-0
        ${_}
        ${x?"ring-4 ring-yellow-400 -translate-y-4 z-20 scale-110":""}
        ${S?K?"opacity-40 grayscale":"cursor-default":"cursor-pointer hover:scale-105"}
        ${!S&&!x?"hover:-translate-y-1":""}
      `,children:[e.jsx("div",{className:`absolute top-1 left-2 font-black opacity-70 text-[10px] ${E}`,children:z?"ZMB":"ANT"}),e.jsx("div",{className:`font-black ${E} z-10`,children:l}),z?e.jsx("div",{className:`absolute -bottom-2 -right-2 ${B}`,children:e.jsx(P,{size:C,strokeWidth:2.5})}):e.jsx("div",{className:`absolute -bottom-2 -right-2 ${B}`,children:e.jsx(J,{size:C,strokeWidth:2.5})}),b>1&&e.jsxs("div",{className:"absolute top-[-5px] right-[-5px] bg-yellow-500 text-black font-bold rounded-full w-6 h-6 flex items-center justify-center text-xs shadow-md border border-yellow-600 z-20",children:["x",b]})]})},pe=({onConfirmLeave:l,onConfirmLobby:y,onCancel:b,isHost:u,inGame:x})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-stone-900 rounded-xl border border-red-900/50 p-6 max-w-sm w-full text-center shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-linear-to-r from-red-600 to-transparent"}),e.jsxs("h3",{className:"text-xl font-bold text-white mb-2 flex items-center justify-center gap-2",children:[e.jsx(V,{className:"text-red-500"})," Abandon Zone?"]}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:u?"WARNING: As Host, leaving will disband the group and return everyone to the menu.":x?"Leaving now will disrupt the survival effort.":"Disconnect from the safe house?"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:b,className:"bg-gray-800 hover:bg-gray-700 text-white py-3 rounded font-bold transition-colors",children:"Stay (Cancel)"}),u&&x&&e.jsxs("button",{onClick:y,className:"py-3 rounded font-bold transition-colors flex items-center justify-center gap-2 bg-blue-700 hover:bg-blue-600 text-white shadow-lg",children:[e.jsx(at,{size:18})," Return Group to Lobby"]}),e.jsxs("button",{onClick:l,className:"bg-red-700 hover:bg-red-600 text-white py-3 rounded font-bold transition-colors flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(Y,{size:18})," ",u?"Disband Group":"Leave Game"]})]})]})}),be=({onClose:l})=>e.jsx("div",{className:"fixed inset-0 bg-black/95 z-150 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-stone-900 rounded-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden border border-red-900/30 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-black/50",children:[e.jsxs("h2",{className:"text-2xl font-black text-red-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(P,{})," Survival Guide"]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-800 rounded-full text-gray-400",children:e.jsx(Ue,{})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto space-y-6 text-gray-300 text-left",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-white font-bold text-lg mb-2 flex items-center gap-2",children:[e.jsx(V,{className:"text-green-500",size:20})," The Basics"]}),e.jsxs("p",{className:"text-sm",children:["Get rid of your cards. Be the last survivor. ",e.jsx("br",{})," Odd cards are"," ",e.jsx("strong",{children:"Zombies"}),". Even cards are ",e.jsx("strong",{children:"Antidotes"}),"."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-white font-bold text-lg mb-2 flex items-center gap-2",children:[e.jsx(tt,{className:"text-blue-400",size:20})," Placement Rules"]}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[e.jsxs("li",{children:["Cards on the board are arranged in"," ",e.jsx("strong",{children:"Ascending Order"}),"."]}),e.jsxs("li",{children:["You can play cards ",e.jsx("strong",{children:"Lower"})," than the minimum or"," ",e.jsx("strong",{children:"Higher"})," than the maximum."]}),e.jsx("li",{children:"You CANNOT play inside the cage (between min and max)."}),e.jsxs("li",{children:[e.jsx("strong",{children:"The Twist:"})," Two cards of the same type (Zombie/Zombie or Antidote/Antidote) CANNOT sit next to each other horizontally."]}),e.jsx("li",{children:"You CAN stack a matching card on top of an existing one."})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-white font-bold text-lg mb-2 flex items-center gap-2",children:[e.jsx(st,{className:"text-yellow-400",size:20})," Multi-Play & Quarantine"]}),e.jsxs("p",{className:"text-sm mb-2",children:["If you play on the edges, you must play ",e.jsx("strong",{children:"at least"})," as many cards as are currently on that edge stack. If you stack on top, just follow the same rule."]}),e.jsxs("p",{className:"text-sm border-l-4 border-red-600 pl-3 py-1 bg-red-900/10",children:[e.jsx("strong",{children:"Stuck?"})," Select ",e.jsx("strong",{children:"QUARANTINE"})," mode, then click a card on the board to take it as a penalty. You are out for the round."]})]})]}),e.jsx("div",{className:"p-4 bg-black/50 border-t border-gray-800 text-center",children:e.jsx("button",{onClick:l,className:"bg-red-700 hover:bg-red-600 text-white px-8 py-3 rounded-lg font-bold",children:"Survive"})})]})});function ct(){const[l,y]=h.useState(null),[b,u]=h.useState("menu"),[x,g]=h.useState(""),[S,K]=h.useState(""),[r,z]=h.useState(null),[_,E]=h.useState(""),[B,C]=h.useState(!1),[D,H]=h.useState(!1),[U,ye]=h.useState(!1),[ee,M]=h.useState(!1),[k,O]=h.useState([]),[q,F]=h.useState(!1),[ve,te]=h.useState(!1),[se,ae]=h.useState(!1),[A,je]=h.useState(()=>localStorage.getItem("gameHub_playerName")||"");h.useEffect(()=>{A&&localStorage.setItem("gameHub_playerName",A)},[A]);const R=t=>{E(t),setTimeout(()=>E(""),3e3)};h.useEffect(()=>{(async()=>typeof __initial_auth_token<"u"&&__initial_auth_token?await Be(Q,__initial_auth_token):await Oe(Q))(),Ge(Q,y)},[]),h.useEffect(()=>{const t=localStorage.getItem("lastofus_roomId");t&&g(t)},[]),h.useEffect(()=>{const t=oe(j(w,"game_hub_settings","config"),s=>{s.exists()&&s.data()[lt]?.maintenance?te(!0):te(!1)});return()=>t()},[]),h.useEffect(()=>{if(!x||!l)return;const t=oe(j(w,"artifacts",N,"public","data","rooms",x),s=>{if(s.exists()){const n=s.data();if(n.players&&!n.players.find(i=>i.id===l.uid)){g(""),u("menu"),localStorage.removeItem("lastofus_roomId"),R("You have been kicked from the safe house.");return}z(n),n.status==="playing"||n.status==="finished"?u("game"):n.status==="lobby"&&u("lobby"),n.turnIndex!==void 0&&n.players&&n.players[n.turnIndex]&&l&&(n.players[n.turnIndex].id===l.uid||F(!1))}else g(""),u("menu"),localStorage.removeItem("lastofus_roomId"),R("Safe house compromised (Room closed).")});return()=>t()},[x,l]);const we=(t,s)=>{if(t.length===0)return{valid:!1,msg:"Select cards."};const n=t[0].val,i=t[0].type,m=t.length;if(!t.every(d=>d.val===n))return{valid:!1,msg:"Must play identical cards."};if(s.length===0)return{valid:!0};const c=s[0],a=s[s.length-1],o=s.findIndex(d=>d.val===n);if(o!==-1){if(!(o===0||o===s.length-1))return{valid:!1,msg:"Cannot play inside the cage (even to stack)."};const p=s[o];return m<p.count?{valid:!1,msg:`Must play at least ${p.count} cards to stack on this edge.`}:{valid:!0,action:"STACK",index:o}}return n>c.val&&n<a.val?{valid:!1,msg:"Cannot play inside the cage."}:n<c.val?i===c.type?{valid:!1,msg:`Cannot place ${i} next to ${c.type}.`}:m<c.count?{valid:!1,msg:`Must play at least ${c.count} cards here (matches edge stack).`}:{valid:!0,action:"LEFT"}:n>a.val?i===a.type?{valid:!1,msg:`Cannot place ${i} next to ${a.type}.`}:m<a.count?{valid:!1,msg:`Must play at least ${a.count} cards here (matches edge stack).`}:{valid:!0,action:"RIGHT"}:{valid:!1,msg:"Invalid move."}},Ne=async()=>{if(!A)return R("Name required");C(!0);const t="123456789ABCDEFGHIJKLMNPQRSTUVWXYZ";let s="";for(let n=0;n<6;n++)s+=t.charAt(Math.floor(Math.random()*t.length));await De(j(w,"artifacts",N,"public","data","rooms",s),{roomId:s,hostId:l.uid,status:"lobby",players:[{id:l.uid,name:A,hand:[],quarantined:!1,ready:!1}],board:[],deck:[],turnIndex:0,activeRoundPlayers:[],logs:[],winner:null}),localStorage.setItem("lastofus_roomId",s),g(s),C(!1)},ke=async()=>{if(!S||!A)return R("Details required");C(!0);const t=j(w,"artifacts",N,"public","data","rooms",S),s=await de(t);if(!s.exists()){R("Room not found"),C(!1);return}const n=s.data();if(n.status!=="lobby"){R("Game in progress"),C(!1);return}if(n.players.length>=6){R("Room full"),C(!1);return}n.players.find(i=>i.id===l.uid)||await I(t,{players:G({id:l.uid,name:A,hand:[],quarantined:!1,ready:!1})}),localStorage.setItem("lastofus_roomId",S),g(S),C(!1)},Ce=async t=>{if(r.hostId!==l.uid)return;const s=r.players.filter(n=>n.id!==t);await I(j(w,"artifacts",N,"public","data","rooms",x),{players:s})},Ie=()=>{const t=r.roomId,s=()=>{ae(!0),setTimeout(()=>ae(!1),2e3),triggerFeedback&&triggerFeedback("neutral","COPIED!","",W)};try{navigator.clipboard.writeText(t),s()}catch{const i=document.createElement("textarea");i.value=t,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),s()}},re=async()=>{if(r.hostId!==l.uid)return;const t=r.players.length,s=dt(it()),n=ot[t]||10,i=r.players.map(a=>{const o=s.splice(0,n).sort((d,p)=>d.val-p.val);return{...a,hand:o,quarantined:!1,ready:!1}}),m=i.map(a=>a.id),c=Math.floor(Math.random()*i.length);await I(j(w,"artifacts",N,"public","data","rooms",x),{status:"playing",players:i,deck:s,board:[],activeRoundPlayers:m,turnIndex:c,logs:[{text:"Survival begins. Good luck.",type:"neutral"}]})},Se=async()=>{r.hostId===l.uid&&await re()},ne=async()=>{if(r.hostId!==l.uid)return;const t=r.players.map(s=>({...s,hand:[],quarantined:!1,ready:!1}));await I(j(w,"artifacts",N,"public","data","rooms",x),{status:"lobby",players:t,board:[],logs:[],activeRoundPlayers:[]}),M(!1)},ze=async()=>{if(!x||!l)return;const t=r.players.map(s=>s.id===l.uid?{...s,ready:!s.ready}:s);await I(j(w,"artifacts",N,"public","data","rooms",x),{players:t})},_e=async()=>{const t=r.players.findIndex($=>$.id===l.uid),s=r.players[t],n=k.map($=>s.hand[$]),i=we(n,r.board);if(!i.valid){R(i.msg);return}const m=[...r.board],c=n[0].val,a=n[0].type,o=n.length;i.action==="STACK"?m[i.index].count+=o:i.action==="LEFT"?m.unshift({val:c,type:a,count:o}):i.action==="RIGHT"?m.push({val:c,type:a,count:o}):m.push({val:c,type:a,count:o});const d=[...r.players],p=[];let f=0;for(let $ of s.hand)$.val===c&&f<o?f++:p.push($);if(d[t].hand=p,p.length===0){await I(j(w,"artifacts",N,"public","data","rooms",x),{players:d,board:m,status:"finished",winner:s,logs:G({text:`${s.name} survived! Game Over.`,type:"success"})}),O([]);return}let v=(r.turnIndex+1)%d.length,L=0;for(;(!r.activeRoundPlayers.includes(d[v].id)||d[v].quarantined)&&(v=(v+1)%d.length,L++,!(L>d.length)););await I(j(w,"artifacts",N,"public","data","rooms",x),{players:d,board:m,turnIndex:v,logs:G({text:`${s.name} played ${o}x ${c}.`,type:"neutral"})}),O([])},Ae=()=>{F(!0)},Re=async t=>{if(!q)return;const s=r.players.findIndex(f=>f.id===l.uid),n=r.players[s],i=[...r.board];if(i.length===0)return;const m=i[t],c={val:m.val,type:m.type};m.count>1?i[t].count-=1:i.splice(t,1);const a=[...n.hand,c].sort((f,v)=>f.val-v.val),o=[...r.players];o[s].hand=a,o[s].quarantined=!0;const d=r.activeRoundPlayers.filter(f=>f!==l.uid),p=[{text:`${n.name} quarantined and took ${c.val}.`,type:"danger"}];if(d.length===1){const f=d[0],v=o.find(T=>T.id===f);p.push({text:`${v.name} won the round! Board cleared.`,type:"success"});const L=o.map(T=>({...T,quarantined:!1})),$=L.findIndex(T=>T.id===f);await I(j(w,"artifacts",N,"public","data","rooms",x),{players:L,board:[],activeRoundPlayers:L.map(T=>T.id),turnIndex:$,logs:G(...p)})}else{let f=(r.turnIndex+1)%o.length;for(;!d.includes(o[f].id)||o[f].quarantined;)f=(f+1)%o.length;await I(j(w,"artifacts",N,"public","data","rooms",x),{players:o,board:i,activeRoundPlayers:d,turnIndex:f,logs:G(...p)})}F(!1),E("")},le=async()=>{if(!(!x||!l)){try{const t=j(w,"artifacts",N,"public","data","rooms",x),s=await de(t);if(s.exists()){const n=s.data();if(n.hostId===l.uid)await He(t);else{const m=n.players.filter(d=>d.id!==l.uid);let c=n.status,a=n.winner;n.status==="playing"&&m.length<2&&(c="finished",m.length>0&&(a=m[0]));const o={players:m,status:c,logs:G({text:`${A} fled.`,type:"danger"})};a&&(o.winner=a),await I(t,o)}}}catch(t){console.error("Error leaving room:",t)}localStorage.removeItem("lastofus_roomId"),g(""),u("menu"),z(null),M(!1)}},$e=(t,s)=>{if(k.includes(s))O(k.filter(n=>n!==s));else{if(k.length>0){const n=k[0];if(r.players.find(c=>c.id===l.uid).hand[n].val!==t.val){O([s]);return}}O([...k,s])}};if(ve)return e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white p-4 text-center",children:[e.jsx(ue,{}),e.jsxs("div",{className:"bg-orange-500/10 p-8 rounded-2xl border border-orange-500/30",children:[e.jsx(Pe,{size:64,className:"text-orange-500 mx-auto mb-4 animate-bounce"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Under Maintenance"}),e.jsx("p",{className:"text-gray-400",children:"Zombies are lurking around. Wait for the sunlight to scare them away."})]}),e.jsx("div",{className:"h-8"}),e.jsx("a",{href:"/rawfids-gamehub/",children:e.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:e.jsx("div",{className:"text-center pb-12 animate-pulse",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-4 bg-slate-900/50 rounded-full border border-indigo-500/20 text-indigo-300 font-bold tracking-widest text-sm uppercase backdrop-blur-sm",children:[e.jsx(ie,{size:16})," Visit Gamehub...Try our other releases..."," ",e.jsx(ie,{size:16})]})})})}),e.jsx(X,{})]});if(!l)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center text-red-500 animate-pulse",children:"Vital boost incoming..."});if(x&&!r&&!_)return e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white p-4",children:[e.jsx(Z,{}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur p-8 rounded-2xl border border-zinc-700 shadow-2xl flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsx(Fe,{size:48,className:"text-red-500 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Reconnecting..."}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Resuming your session"})]})]})]});if(b==="menu")return e.jsxs("div",{className:"min-h-screen bg-stone-950 text-white flex flex-col items-center justify-center p-4 relative overflow-hidden font-sans",children:[e.jsx(Z,{}),e.jsx("nav",{className:"absolute top-0 left-0 w-full p-4 z-50",children:e.jsxs("a",{href:"/rawfids-gamehub/",className:`flex items-center gap-2 text-red-800 rounded-lg 
			font-bold shadow-md hover:text-red-400 transition-colors w-fit animate-pulse`,children:[e.jsx(We,{}),e.jsx("span",{children:"Back to Gamehub"})]})}),e.jsxs("div",{className:"z-10 text-center mb-10",children:[e.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[e.jsx(P,{size:50,className:"text-red-600 animate-bounce"}),e.jsx(J,{size:50,className:"text-lime-500 animate-bounce delay-75"})]}),e.jsx("h1",{className:"text-4xl md:text-7xl font-black text-transparent bg-clip-text bg-linear-to-r from-red-500 to-stone-500 uppercase tracking-tighter",children:"Last of Us"}),e.jsx("p",{className:"text-stone-500 tracking-[0.5em] uppercase mt-2 font-bold text-xs md:text-sm",children:"Survive the Horde"})]}),e.jsxs("div",{className:"bg-stone-900/80 backdrop-blur border border-red-900/30 p-6 md:p-8 rounded-2xl w-full max-w-md shadow-2xl z-10 mx-4",children:[_&&e.jsx("div",{className:"bg-red-900/50 text-red-200 p-2 mb-4 rounded text-center text-sm border border-red-800",children:_}),e.jsx("input",{className:"w-full bg-black/50 border border-stone-700 p-3 rounded-xl mb-4 text-white focus:border-red-500 outline-none text-sm",placeholder:"Survivor Name",value:A,onChange:t=>je(t.target.value)}),e.jsxs("button",{onClick:Ne,disabled:B,className:"w-full bg-red-800 hover:bg-red-700 p-4 rounded-xl font-bold mb-4 flex items-center justify-center gap-2 transition-all shadow-lg text-sm md:text-base",children:[e.jsx(Ye,{size:20})," New Survival Zone"]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{className:"flex-1 bg-black/50 border border-stone-700 p-3 rounded-xl text-white focus:border-red-500 outline-none uppercase text-sm",placeholder:"CODE",value:S,onChange:t=>K(t.target.value.toUpperCase())}),e.jsx("button",{onClick:ke,disabled:B,className:"bg-stone-700 hover:bg-stone-600 px-6 rounded-xl font-bold transition-all text-sm",children:"Join"})]}),e.jsxs("button",{onClick:()=>H(!0),className:"w-full text-center text-stone-500 hover:text-stone-300 text-sm flex items-center justify-center gap-2",children:[e.jsx(ce,{size:14})," Survival Guide"]})]}),D&&e.jsx(be,{onClose:()=>H(!1)}),e.jsxs("div",{className:"absolute bottom-4 text-slate-600 text-xs text-center",children:["Inspired by I'm Out. A tribute game.",e.jsx("br",{}),"Developed by ",e.jsx("strong",{children:"RAWFID K SHUVO"}),". Visit"," ",e.jsx("a",{href:"/rawfids-gamehub/",rel:"noopener noreferrer",className:"text-red-500 underline hover:text-red-600",children:"GAMEHUB"})," ","for more games."]})]});if(b==="lobby"&&r){const t=r.hostId===l.uid;return e.jsxs("div",{className:"min-h-screen bg-stone-950 text-white flex flex-col items-center justify-center p-6 relative",children:[e.jsx(Z,{}),e.jsx(ue,{}),ee&&e.jsx(pe,{onConfirmLeave:le,onConfirmLobby:null,onCancel:()=>M(!1),isHost:t,inGame:!1}),e.jsxs("div",{className:"z-10 w-full max-w-lg bg-stone-900/90 backdrop-blur p-8 rounded-2xl border border-red-900/30 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-stone-800",children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl text-red-600 font-bold uppercase",children:"Safe Zone"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-mono text-white font-black",children:r.roomId}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:Ie,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:se?e.jsx(W,{size:16,className:"text-green-500"}):e.jsx(Ze,{size:16})}),se&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-red-500 text-black text-xs font-bold px-2 py-1 rounded shadow-lg animate-fade-in-up whitespace-nowrap",children:"Copied!"})]})]})]})}),e.jsx("button",{onClick:()=>M(!0),className:"p-2 bg-red-900/30 text-red-400 rounded-full hover:bg-red-900/50",children:e.jsx(Y,{size:20})})]}),e.jsxs("div",{className:"space-y-3 mb-8",children:[r.players.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-3 rounded-xl border border-stone-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-stone-800",children:e.jsx(Ve,{size:18,className:"text-stone-400"})}),e.jsx("span",{className:`font-bold ${s.id===l.uid?"text-red-500":"text-stone-400"}`,children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.id===r.hostId&&e.jsx(xe,{size:16,className:"text-yellow-500"}),t&&s.id!==l.uid&&e.jsx("button",{onClick:()=>Ce(s.id),className:"text-stone-600 hover:text-red-500 p-1 transition-colors",title:"Kick Player",children:e.jsx(Ke,{size:18})})]})]},s.id)),r.players.length<2&&e.jsx("div",{className:"text-center text-stone-600 py-4 italic",children:"Need at least 2 survivors..."})]}),t?e.jsx("button",{onClick:re,disabled:r.players.length<2,className:"w-full py-4 rounded-xl font-black text-xl uppercase tracking-widest bg-red-700 hover:bg-red-600 text-white shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Start Survival"}):e.jsx("div",{className:"w-full py-4 rounded-xl font-bold text-center text-stone-500 bg-stone-800/50 border border-stone-700 animate-pulse",children:"Waiting for Host..."})]}),e.jsx(X,{})]})}if(b==="game"&&r){const t=r.players.find(a=>a.id===l.uid);if(!t)return e.jsx("div",{className:"min-h-screen bg-stone-950 flex items-center justify-center text-white",children:"Loading..."});const n=r.players[r.turnIndex]?.id===l.uid,i=r.players.filter(a=>a.id!==l.uid),m=r.logs.slice(-2).reverse(),c=r.players.filter(a=>a.id!==r.hostId).every(a=>a.ready);return e.jsxs("div",{className:"h-screen bg-stone-950 text-white flex flex-col relative overflow-hidden font-sans",children:[e.jsx(Z,{}),ee&&e.jsx(pe,{onConfirmLeave:le,onConfirmLobby:ne,onCancel:()=>M(!1),isHost:r.hostId===l.uid,inGame:!0}),D&&e.jsx(be,{onClose:()=>H(!1)}),e.jsxs("div",{className:"h-14 bg-stone-900/90 border-b border-stone-800 flex items-center justify-between px-4 z-160 sticky top-0 backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"text-red-600",size:24}),e.jsx("span",{className:"font-black uppercase hidden md:block",children:"Last of Us"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>H(!0),className:"p-2 text-stone-400 hover:bg-stone-800 rounded-full",children:e.jsx(ce,{size:20})}),e.jsx("button",{onClick:()=>ye(!U),className:`p-2 rounded-full ${U?"bg-red-900/50 text-red-200":"text-stone-400 hover:bg-stone-800"}`,children:e.jsx(Qe,{size:20})}),e.jsx("button",{onClick:()=>M(!0),className:"p-2 text-red-400 hover:bg-red-900/20 rounded-full",children:e.jsx(Y,{size:20})})]})]}),U&&e.jsx("div",{className:"fixed top-16 right-4 z-155 bg-stone-900/95 border border-stone-700 p-2 rounded-xl max-h-60 overflow-y-auto w-64 shadow-2xl",children:[...r.logs].reverse().map((a,o)=>e.jsx("div",{className:`text-xs p-2 mb-1 rounded border-l-2 ${a.type==="danger"?"bg-red-900/20 border-red-500 text-red-200":"bg-stone-800 border-stone-600 text-gray-400"}`,children:a.text},o))}),r.status==="finished"&&e.jsxs("div",{className:"fixed inset-0 top-14 z-150 bg-black/95 flex flex-col items-center justify-center p-6 text-center animate-in zoom-in",children:[e.jsx(xe,{size:80,className:"text-yellow-500 mb-6 animate-bounce"}),e.jsx("h1",{className:"text-5xl font-black text-white mb-4",children:"Survivor Found!"}),e.jsxs("p",{className:"text-2xl text-stone-300 mb-8",children:[r.winner?r.winner.name:"Unknown Survivor"," ","cleared their hand!"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 max-w-md w-full mb-8",children:r.players.map(a=>e.jsx("div",{className:"bg-stone-800 p-4 rounded-xl flex justify-between items-center border border-stone-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a.ready&&e.jsx(W,{size:16,className:"text-green-500"}),e.jsx("span",{className:a.id===r.winner?.id?"text-yellow-400 font-bold":"text-gray-400",children:a.name})]})},a.id))}),e.jsx("div",{className:"flex flex-col gap-4 items-center w-full max-w-md",children:r.hostId!==l.uid?t.ready?e.jsxs("div",{className:"w-full py-3 bg-stone-800 rounded-xl font-bold text-green-400 border border-green-500/50 flex items-center justify-center gap-2",children:[e.jsx(W,{size:20})," Waiting for host..."]}):e.jsx("button",{onClick:ze,className:"w-full py-3 bg-blue-600 hover:bg-blue-500 rounded-xl font-bold text-white shadow-lg animate-pulse transition-all hover:scale-105",children:"Ready for Next Game"}):e.jsxs("div",{className:"flex flex-col w-full gap-3",children:[e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsxs("button",{onClick:ne,disabled:!c,className:`flex-1 py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${c?"bg-stone-700 hover:bg-stone-600 text-white hover:scale-105":"bg-stone-800 text-stone-500 cursor-not-allowed border border-stone-700"}`,children:[e.jsx(Y,{size:18})," Lobby"]}),e.jsxs("button",{onClick:Se,disabled:!c,className:`flex-1 py-3 rounded-xl font-bold text-white shadow-lg transition-all flex items-center justify-center gap-2 ${c?"bg-red-700 hover:bg-red-600 hover:scale-105":"bg-stone-800 text-stone-500 cursor-not-allowed border border-stone-700"}`,children:[e.jsx(Xe,{size:18})," Restart"]})]}),!c&&e.jsx("p",{className:"text-stone-500 text-sm animate-pulse",children:"Waiting for survivors to report in..."})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col w-full max-w-6xl mx-auto p-2 gap-2 overflow-hidden relative",children:[e.jsx("div",{className:"flex-none h-24 md:h-28 flex items-start justify-center gap-2 overflow-x-auto no-scrollbar px-2 py-2",children:i.map(a=>e.jsxs("div",{className:`flex flex-col items-center min-w-[80px] md:min-w-[100px] p-2 rounded-xl border ${a.quarantined?"border-red-900 bg-red-900/20 opacity-50":"border-stone-700 bg-stone-900/50"} ${r.players[r.turnIndex]?.id===a.id?"ring-2 ring-yellow-500 animate-pulse":""}`,children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.quarantined&&e.jsx(me,{size:12,className:"text-red-500"}),e.jsx("span",{className:"text-xs font-bold truncate max-w-[60px] md:max-w-[70px]",children:a.name})]}),e.jsx("div",{className:"flex gap-1 overflow-hidden h-8 md:h-12 w-full justify-center",children:a.hand.length>0?e.jsx("div",{className:"flex -space-x-2",children:a.hand.map((o,d)=>e.jsx("div",{className:"w-4 md:w-6 h-6 md:h-8 bg-stone-700 rounded border border-stone-600 shadow-sm"},d))}):e.jsx("span",{className:"text-[10px] text-green-500",children:"Safe"})}),e.jsxs("span",{className:"text-[10px] text-stone-500",children:[a.hand.length," Cards"]})]},a.id))}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative min-h-0 bg-stone-900/30 rounded-2xl border border-stone-800/30 mx-2",children:[e.jsxs("div",{className:"absolute top-4 left-0 right-0 flex flex-col items-center pointer-events-none z-10 w-full space-y-2",children:[!U&&m.map((a,o)=>e.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] md:text-xs font-bold shadow-lg backdrop-blur-md border animate-in fade-in zoom-in duration-300 ${a.type==="danger"?"bg-red-900/50 border-red-500 text-red-100":"bg-stone-800/50 border-stone-600 text-stone-300"}`,children:a.text},o)),_&&e.jsx("div",{className:"px-6 py-2 rounded-full text-sm font-bold bg-red-600 text-white shadow-xl animate-bounce whitespace-nowrap border-4 border-red-800",children:_})]}),r.board.length===0?e.jsx("div",{className:"text-stone-600 text-sm font-bold border-2 border-dashed border-stone-800 rounded-xl p-8",children:"Board Empty"}):e.jsx("div",{className:"flex items-center gap-1 md:gap-2 overflow-x-auto p-4 w-full justify-start md:justify-center no-scrollbar h-full",children:r.board.map((a,o)=>e.jsx("div",{className:"transform hover:scale-105 transition-transform shrink-0",children:e.jsx(he,{val:a.val,type:a.type,count:a.count,size:"lg",isBoard:!0,disabled:!q,selected:q,onClick:()=>Re(o)})},o))}),n&&!t.quarantined&&e.jsx("div",{className:"absolute bottom-4 flex gap-4 z-20",children:q?e.jsxs("div",{className:"flex flex-col items-center gap-2 animate-in slide-in-from-bottom-2",children:[e.jsx("div",{className:"bg-red-900/80 px-4 py-2 rounded text-red-200 text-sm font-bold border border-red-500 shadow-xl",children:"Tap a card to take penalty"}),e.jsx("button",{onClick:()=>F(!1),className:"px-6 py-2 rounded-xl font-bold bg-gray-700 hover:bg-gray-600 text-gray-200 shadow-lg",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:_e,disabled:k.length===0,className:`px-6 md:px-8 py-3 rounded-xl font-black text-lg md:text-xl shadow-xl flex items-center gap-2 transition-all ${k.length>0?"bg-yellow-500 hover:bg-yellow-400 text-black hover:scale-105":"bg-stone-800 text-stone-500 cursor-not-allowed"}`,children:["PLAY"," ",k.length>0&&`(${k.length})`]}),e.jsxs("button",{onClick:Ae,className:"px-4 md:px-6 py-3 rounded-xl font-bold bg-red-900/50 hover:bg-red-800 text-red-200 border border-red-800 flex items-center gap-2 transition-all",children:[e.jsx(me,{size:18})," ",e.jsx("span",{className:"inline",children:"QUARANTINE"})]})]})}),n&&t.quarantined&&e.jsx("div",{className:"absolute bottom-4 text-red-500 font-bold animate-pulse bg-black/50 px-4 py-2 rounded-xl",children:"You are Quarantined. Skip turn."}),!n&&e.jsx("div",{className:"absolute bottom-4 px-4 py-2 bg-stone-900 rounded-full text-stone-500 text-sm border border-stone-800 animate-pulse",children:"Waiting for survivors..."})]}),e.jsxs("div",{className:"flex-none bg-stone-900/95 p-2 md:p-4 rounded-t-3xl border-t border-red-900/30 shadow-2xl relative z-30 w-full overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[e.jsxs("span",{className:"text-[10px] md:text-xs font-bold text-stone-400 uppercase tracking-widest",children:["Inventory (",t.hand.length,")"]}),e.jsx("span",{className:"text-[8px] md:text-[10px] font-bold text-stone-500",children:"Match count on edges"})]}),e.jsx("div",{className:"flex gap-2 md:gap-4 overflow-x-auto pb-4 pt-2 px-2 no-scrollbar",children:(()=>{const a=[];let o=[];for(let d=0;d<t.hand.length;d++){const p=t.hand[d];d>0&&t.hand[d-1].val!==p.val&&(a.push(o),o=[]),o.push({card:p,index:d})}return o.length>0&&a.push(o),a.map((d,p)=>e.jsx("div",{className:"flex -space-x-6 md:-space-x-8 hover:space-x-1 transition-all duration-300 pr-4 shrink-0",children:d.map(({card:f,index:v})=>e.jsx("div",{children:e.jsx(he,{val:f.val,type:f.type,size:"md",selected:k.includes(v),onClick:()=>$e(f,v)})},v))},p))})()})]})]}),e.jsx(X,{})]})}return null}qe.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(ct,{})}));
