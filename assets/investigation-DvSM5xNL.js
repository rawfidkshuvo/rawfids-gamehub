import{c as $e,i as vt,g as Nt,a as yt,r as d,e as wt,d as f,o as Oe,u as y,q as T,j as e,H as St,S as _e,L as Ke,X as Ne,n as Ct,s as Ge,h as Et,p as It,t as We,R as kt,m as Tt}from"./x-CZayGA_K.js";import{S as Rt,B as Pe,C as pe,a as At,L as ze,R as Mt,P as Dt}from"./step-back-B0OJpjC1.js";import{H as ee,C as Ot}from"./hat-glasses-0cyE3mVf.js";import{U as qe}from"./user-iW0fLfER.js";import{S as _t}from"./settings-DDZLe2y0.js";import{T as Gt}from"./trash-2-CvQllGyi.js";import{G as Wt}from"./gavel-C39wUUK8.js";import{S as te}from"./search-B-K_GsOX.js";import{T as ve}from"./target-C75h6gJn.js";import{C as Pt}from"./crosshair-aTOZy3uZ.js";import{T as zt}from"./triangle-alert-DkjWnX7a.js";import{S as se}from"./skull-BGTgQEHs.js";import{H as Ye}from"./history-Zl31ME6M.js";import{E as ye}from"./eye-vNcUtVSg.js";import{E as Le}from"./eye-off-B97m9-k-.js";import{B as Je}from"./briefcase-R8NAtjLz.js";const Lt=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]],G=$e("badge",Lt);const Bt=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Be=$e("chevron-up",Bt),Ve="/rawfids-gamehub/assets/investigation_cover-DmeY2bXQ.png",Vt={apiKey:"AIzaSyC1rk47vYi_kdLnywxgPdPlVdbeyAhDpLc",authDomain:"rawfids-gamehub.firebaseapp.com",projectId:"rawfids-gamehub",storageBucket:"rawfids-gamehub.firebasestorage.app",messagingSenderId:"33131208034",appId:"1:33131208034:web:030549a981b3e80d6b603b"},Xe=vt(Vt),X=Nt(Xe),j=yt(Xe),v=typeof __app_id<"u"?__app_id:"investigation-game",Ht="2",Ut=["Kitchen Knife","Dagger","Crossed Swords","Fire Axe","Pickaxe","Hook","Scissors","Champagne Bottle","Katana","Blade","Saw","Hammer","Cricket Bat","Field Hockey Stick","Wrench","Crowbar","Brick","Moai Statue","Candlestick","Frying Pan","Stone","Pistol","Silenced Gun","Boxing Glove","Shotgun","Bow and Arrow","Rope","Wire","Necktie","Teddy Bear","Plastic Bag","Chain","Scarf","Arsenic","Cyanide Pill","Venomous Snake","Syringe","Sleeping Pills","Chainsaw","Explosives","Dynamite","Electrocution","Drowning","Push from Heights","Vehicle","Trophy","Screwdriver","Clamp","Fist","Electric Plug","Fire","Oil Drum","Lighter"],Ft=["Hand","Shoe","Blood Stain","DNA Sample","T-Shirt","Shirt Button","Sewing Thread","Wedding Ring","Wristwatch","Gem Stone","Glasses","Purse","Name Badge","Credit Card","Receipt","Ticket","Memo","Notebook","Framed Picture","World Map","Floppy Disk","Smartphone","Laptop","Key","Coin","Cigarette","Flashlight","Funeral Urn","Ice Cube","Fork and Knife","Wilted Flower","Leaf","Droplet","Oil Drum","Artist Palette","Fountain Pen","Candy","Wine Glass","Hot Beverage","Kiss Mark","Lotion Bottle","Salt Shaker","Collision","Hammer","Glove","Ninja Mask","Joker Card","Game Die","Mirror"],$t={"Kitchen Knife":"ðŸ”ª",Dagger:"ðŸ—¡ï¸","Crossed Swords":"âš”ï¸","Fire Axe":"ðŸª“",Pickaxe:"â›ï¸",Hook:"ðŸª",Scissors:"âœ‚ï¸","Champagne Bottle":"ðŸ¾",Katana:"âš”ï¸",Blade:"ðŸ”ª",Saw:"ðŸªš",Hammer:"ðŸ”¨","Cricket Bat":"ðŸ","Field Hockey Stick":"ðŸ‘",Wrench:"ðŸ”§",Crowbar:"ðŸ› ï¸",Brick:"ðŸ§±","Moai Statue":"ðŸ—¿",Candlestick:"ðŸ•¯ï¸","Frying Pan":"ðŸ³",Stone:"ðŸª¨",Pistol:"ðŸ”«","Silenced Gun":"ðŸ”«","Boxing Glove":"ðŸ¥Š",Shotgun:"ðŸ”«","Bow and Arrow":"ðŸ¹",Rope:"ðŸª¢",Wire:"âž°",Necktie:"ðŸ‘”","Teddy Bear":"ðŸ§¸","Plastic Bag":"ðŸ›ï¸",Chain:"â›“ï¸",Scarf:"ðŸ§£",Arsenic:"â˜ ï¸","Cyanide Pill":"ðŸ’Š","Venomous Snake":"ðŸ",Syringe:"ðŸ’‰","Sleeping Pills":"ðŸ’¤",Chainsaw:"ðŸªš",Explosives:"ðŸ’£",Dynamite:"ðŸ§¨",Electrocution:"âš¡",Drowning:"ðŸŒŠ","Push from Heights":"ðŸ§—",Vehicle:"ðŸš—",Trophy:"ðŸ†",Screwdriver:"ðŸª›",Clamp:"ðŸ—œï¸",Fist:"ðŸ‘Š","Electric Plug":"ðŸ”Œ",Fire:"ðŸ”¥","Oil Drum":"ðŸ›¢ï¸",Lighter:"ðŸ”¥",Hand:"âœ‹",Shoe:"ðŸ‘ž","Blood Stain":"ðŸ©¸","DNA Sample":"ðŸ§¬","T-Shirt":"ðŸ‘•","Shirt Button":"ðŸ”˜","Sewing Thread":"ðŸ§µ","Wedding Ring":"ðŸ’",Wristwatch:"âŒš","Gem Stone":"ðŸ’Ž",Glasses:"ðŸ‘“",Purse:"ðŸ‘›","Name Badge":"ðŸ“›","Credit Card":"ðŸ’³",Receipt:"ðŸ§¾",Ticket:"ðŸŽ«",Memo:"ðŸ“",Notebook:"ðŸ““","Framed Picture":"ðŸ–¼ï¸","World Map":"ðŸ—ºï¸","Floppy Disk":"ðŸ’¾",Smartphone:"ðŸ“±",Laptop:"ðŸ’»",Key:"ðŸ”‘",Coin:"ðŸª™",Cigarette:"ðŸš¬",Flashlight:"ðŸ”¦","Funeral Urn":"âš±ï¸","Ice Cube":"ðŸ§Š","Fork and Knife":"ðŸ½ï¸","Wilted Flower":"ðŸ¥€",Leaf:"ðŸƒ",Droplet:"ðŸ’§","Artist Palette":"ðŸŽ¨","Fountain Pen":"âœ’ï¸",Candy:"ðŸ¬","Wine Glass":"ðŸ·","Hot Beverage":"â˜•","Kiss Mark":"ðŸ’‹","Lotion Bottle":"ðŸ§´","Salt Shaker":"ðŸ§‚",Collision:"ðŸ’¥",Glove:"ðŸ§¤","Ninja Mask":"ðŸ¥·","Joker Card":"ðŸƒ","Game Die":"ðŸŽ²",Mirror:"ðŸªž"},Z={FIXED:{title:"Cause of Death",type:"purple",options:["Suffocation","Severe Injury","Loss of Blood","Chemical / Sickness","Accident","Projectile / Blast"]},MAIN:[{title:"Location of Crime",type:"green",options:["Living Room","Bedroom","Kitchen / Dining","Bathroom","Balcony","Garden"]},{title:"Location of Crime",type:"green",options:["Office","Hotel","Restaurant","Pub/Bar","School","Hospital"]},{title:"Location of Crime",type:"green",options:["Vacation home","Park","Supermarket","Forest","University","Bookstore"]},{title:"Location of Crime",type:"green",options:["Playground","Classroom","Dormitory","Cafeteria","Lift","Toilet"]}],SUBORDINATE:[{title:"Duration of Crime",options:["Instantaneous","Few Seconds","Few Minutes","Under an Hour","Several Hours","Days"]},{title:"Trace at Scene",options:["Footprints","Fingerprints","Blood/Fluids","Smell/Scent","Sound/Recording","Writing/Marks"]},{title:"Weapon Type",options:["Sharp","Blunt","Toxin/Chemical","Projectile","Everyday Object","Machinery/Tool"]},{title:"Weapon Property",options:["Heavy","Lightweight","Long","Short/Small","Noisy","Silent"]},{title:"Weapon Origin",options:["Household","Industrial/Work","Medical/Chemical","Outdoor/Nature","Military/Tactical","Sports/Recreation"]},{title:"Evidence Material",options:["Fabric/Cloth","Metal","Paper/Wood","Plastic","Biological","Stone/Glass"]},{title:"Evidence Condition",options:["Broken/Damaged","New/Shiny","Old/Worn","Wet/Dirty","Burnt/Singed","Incomplete"]},{title:"Social Relation",options:["Relatives","Friends","Colleagues","Lovers","Strangers","Enemies"]},{title:"Sudden Incident",options:["Loud Shout","Heavy Thud","Bright Flash","Dead Silence","Scream","Breaking Glass"]},{title:"Motive",options:["Hatred/Revenge","Greed/Money","Love/Passion","Jealousy","Fear/Defense","Madness"]},{title:"Killer's Trait",options:["Arrogant","Cautious","Violent","Calm/Cold","Nervous","Calculating"]},{title:"Impression",options:["Natural","Artistic","Cruel","Clumsy","Professional","Bizarre"]},{title:"Noticed By Others",options:["Sound","Smell","Silhouette","Someone Running","Object Thrown","Nothing"]},{title:"Evidence Size",options:["Tiny","Small","Medium","Large","Heavy","Microscopic"]},{title:"Evidence Color",options:["Red/Purple","Blue/Green","Yellow/Orange","Black/Grey","White/Clear","Metallic"]},{title:"State of Scene",options:["Chaos / Destruction","Signs of Struggle","Perfectly Tidy","Items Missing","Staged / Artificially Arranged","Covered (Ash/Water/Dust)"]},{title:"Injury/Wounds",options:["Head / Neck","Chest / Torso","Hands / Arms","Legs / Feet","Internal Organs","No Visible Wounds"]},{title:"Assassin Hint",options:["Man","Woman","Tall","Short","Strong","Weak"]},{title:"Shape of Evidence",options:["Round/Spherical","Square/Rectangular","Long/Thin","Flat/Sheet","Irregular/Amorphous","Sharp/Pointed"]},{title:"Weapon Operation",options:["Muscle Power","Mechanism/Trigger","Chemical/Reaction","Electrical","Passive/Trap","Animal/Living"]},{title:"Evidence Domain",options:["Work/Office","Home/Domestic","Travel/Outdoor","Leisure/Hobby","Medical/Hygiene","Vice/Illegal"]},{title:"Concealability (Weapon)",options:["Pocket Size","Bag/Backpack Size","Two-Handed/Large","Not Concealable","Invisible/Internal","Disguised as Object"]},{title:"Origin of Evidence",options:["Owned by Victim","Stolen from Victim","Gifted to Victim","Belonged to Killer","Found at Scene","Unknown Origin"]},{title:"Texture of Evidence",options:["Hard/Rigid","Soft/Flexible","Metallic/Cold","Wooden/Rough","Paper-like","Sticky/Liquid"]},{title:"Weapon Residue",options:["Blood","Powder/Dust","Water/Fluid","Ash/Burn Mark","Fragments/Shards","None/Clean"]},{title:"Visibility of Injury",options:["None Visible","Small Puncture","Large Wound","Bruising/Swelling","Burns/Rash","Dismemberment/Breakage"]}]},H=l=>{let p=l.length,x;const b=[...l];for(;p!==0;)x=Math.floor(Math.random()*p),p--,[b[p],b[x]]=[b[x],b[p]];return b},C=l=>{const p=$t[l]||"â“";return e.jsx("span",{className:"text-2xl leading-none filter drop-shadow-sm grayscale-[0.2] mb-1 block",children:p})},Q=()=>e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_center,var(--tw-gradient-stops))] from-gray-800 via-gray-900 to-black opacity-80"}),e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/black-scales.png")'}})]}),fe=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 py-2 w-full bg-slate-950/80 backdrop-blur-sm border-t border-slate-900/50 z-50",children:[e.jsx(ee,{size:12,className:"text-green-500"}),e.jsx("span",{className:"text-[10px] font-black tracking-widest text-green-500 uppercase",children:"INVESTIGATION"})]}),He=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 py-2 w-full bg-slate-950/80 backdrop-blur-sm border-t border-slate-900/50 z-50",children:[e.jsx(ee,{size:22,className:"text-green-500"}),e.jsx("span",{className:"text-[20px] font-black tracking-widest text-green-500 uppercase",children:"INVESTIGATION"})]}),je=({onClose:l})=>e.jsx("div",{className:"fixed inset-0 z-170 bg-slate-950/95 flex justify-center overflow-y-auto p-4 animate-in slide-in-from-bottom-10 fade-in duration-300",children:e.jsxs("div",{className:"w-full max-w-4xl relative",children:[e.jsx("button",{onClick:l,className:"fixed top-4 right-4 md:absolute md:-right-12 md:top-0 bg-slate-800 p-2 rounded-full text-white hover:bg-slate-700 shadow-lg z-50",children:e.jsx(Ne,{size:24})}),e.jsxs("div",{className:"space-y-8 pb-20 mt-12 md:mt-0",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h2",{className:"text-4xl font-black text-transparent bg-clip-text bg-linear-to-r from-blue-400 to-green-600",children:"PENAL CODES"}),e.jsx("p",{className:"text-slate-400",children:"Deduction, Deception, and Discovery"})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6 shadow-xl",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(ve,{className:"text-red-500"})," The Objective"]}),e.jsxs("p",{className:"text-slate-300 leading-relaxed",children:["A murder has been committed. The"," ",e.jsx("span",{className:"text-blue-400 font-bold",children:"Detective"})," knows the solution but can only communicate through vague clues. The"," ",e.jsx("span",{className:"text-green-400 font-bold",children:"Investigators"})," must interpret these clues to find the true"," ",e.jsx("strong",{className:"text-white",children:"Murder Weapon"})," and"," ",e.jsx("strong",{className:"text-white",children:"Evidence"})," before time runs out. Meanwhile, the"," ",e.jsx("span",{className:"text-red-400 font-bold",children:"Murderer"})," hides among them, trying to mislead the investigation."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-blue-500/30 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"bg-blue-600 p-1.5 rounded text-white",children:e.jsx(te,{size:16})}),e.jsx("span",{className:"font-bold text-blue-400",children:"Detective"})]}),e.jsx("p",{className:"text-sm text-slate-300",children:"Host & Guide. Knows the solution. Cannot speak about the case. Selects tile cards to give hints."})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-red-500/30 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"bg-red-600 p-1.5 rounded text-white",children:e.jsx(se,{size:16})}),e.jsx("span",{className:"font-bold text-red-400",children:"Murderer"})]}),e.jsx("p",{className:"text-sm text-slate-300",children:"The Culprit. Chooses the Means & Clue at the start. Hides identity and tries to sabotage the team."})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-emerald-500/30 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"bg-emerald-600 p-1.5 rounded text-white",children:e.jsx(G,{size:16})}),e.jsx("span",{className:"font-bold text-emerald-400",children:"Investigator"})]}),e.jsx("p",{className:"text-sm text-slate-300",children:"The Team. Discusses clues and submits accusations to solve the crime."})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-orange-500/30 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"bg-orange-600 p-1.5 rounded text-white",children:e.jsx(Je,{size:16})}),e.jsx("span",{className:"font-bold text-orange-400",children:"Accomplice"})]}),e.jsx("p",{className:"text-sm text-slate-300",children:"(Optional) Knows who the Murderer is. Helps them win without getting caught."})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-indigo-500/30 rounded-xl p-5 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"bg-indigo-600 p-1.5 rounded text-white",children:e.jsx(ye,{size:16})}),e.jsx("span",{className:"font-bold text-indigo-400",children:"Witness"})]}),e.jsx("p",{className:"text-sm text-slate-300",children:"(Optional) Knows the Murderer but not the solution. Must help Investigators without revealing themselves. If the Murderer finds the Witness at the end, the Murderer wins!"})]})]}),e.jsx("div",{className:"text-center pt-8",children:e.jsx("button",{onClick:l,className:"bg-white text-slate-900 px-8 py-3 rounded-full font-bold hover:scale-105 transition-transform",children:"Got it, Let's Play!"})})]})]})}),Kt=({logs:l,onClose:p})=>e.jsx("div",{className:"fixed top-16 right-4 w-64 max-h-60 bg-gray-900/95 border border-gray-700 rounded-xl z-155 overflow-y-auto p-2 shadow-2xl",children:e.jsxs("div",{className:"bg-slate-900 w-full md:max-w-md h-full md:h-[70vh] rounded-none md:rounded-xl flex flex-col border-none md:border border-slate-700 shadow-2xl",children:[e.jsxs("div",{className:"p-4 border-b border-slate-700 flex justify-between items-center bg-slate-800",children:[e.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[e.jsx(Ye,{size:18,className:"text-cyan-400"})," System Logs"]}),e.jsx("button",{onClick:p,className:"p-2 bg-slate-700 rounded-full hover:bg-slate-600",children:e.jsx(Ne,{className:"text-slate-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[...l].reverse().map((x,b)=>e.jsxs("div",{className:`text-xs md:text-sm p-3 rounded border-l-2 ${x.type==="danger"?"bg-red-900/20 border-red-500 text-red-200":x.type==="success"?"bg-green-900/20 border-green-500 text-green-200":"bg-slate-700/50 border-slate-500 text-slate-300"}`,children:[e.jsxs("span",{className:"opacity-50 mr-2 font-mono",children:["[",new Date(parseInt(x.id)||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),"]"]}),x.text]},b))})]})}),Ue=({onConfirm:l,onCancel:p,isHost:x,onReturnToLobby:b})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6 max-w-sm w-full text-center shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Leave Game?"}),e.jsx("p",{className:"text-slate-400 mb-6 text-sm",children:x?"As Host, leaving will end the game for everyone.":"Are you sure you want to leave the room?"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:p,className:"bg-slate-700 hover:bg-slate-600 text-white py-3 rounded font-bold transition-colors",children:"Stay"}),x&&b&&e.jsx("button",{onClick:b,className:"bg-blue-600 hover:bg-blue-500 text-white py-3 rounded font-bold transition-colors",children:"Return to Lobby"}),e.jsx("button",{onClick:l,className:"bg-red-600 hover:bg-red-500 text-white py-3 rounded font-bold transition-colors",children:x?"Delete Room":"Leave Room"})]})]})}),Fe=({role:l})=>{if(!l)return null;let p="bg-gray-600",x=qe;l==="DETECTIVE"&&(p="bg-blue-600",x=te),l==="MURDERER"&&(p="bg-red-600",x=se),l==="INVESTIGATOR"&&(p="bg-emerald-600",x=G),l==="ACCOMPLICE"&&(p="bg-orange-600",x=Je),l==="WITNESS"&&(p="bg-indigo-600",x=ye);const b=l.charAt(0)+l.slice(1).toLowerCase();return e.jsxs("div",{className:`${p} text-white px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1 shadow-sm`,children:[kt.createElement(x,{size:12})," ",e.jsx("span",{className:"whitespace-nowrap",children:b})]})},qt=({onStart:l})=>{const[p,x]=d.useState(!1),[b,W]=d.useState(!1),[q,g]=d.useState(!1);return d.useEffect(()=>{const O=localStorage.getItem("investigation_roomId");x(!!O);const t=new Image;t.src=Ve,t.onload=()=>{W(!0),setTimeout(()=>{g(!0)},2e3)}},[]),e.jsxs("div",{className:"fixed inset-0 z-[200] bg-black flex flex-col items-center justify-end pb-20 md:justify-center md:pb-0 font-sans overflow-hidden",children:[!b&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-50 text-green-500/50",children:[e.jsx(Ke,{size:48,className:"animate-spin mb-4"}),e.jsx("div",{className:"font-mono text-xs tracking-[0.3em] animate-pulse",children:"INITIALIZING SYSTEM..."})]}),e.jsxs("div",{className:`absolute inset-0 z-0 overflow-hidden transition-opacity duration-1000 ${b?"opacity-100":"opacity-0"}`,children:[e.jsx("div",{className:`w-full h-full bg-cover bg-center transition-transform duration-[2000ms] ease-out ${b?"scale-100":"scale-130"}`,style:{backgroundImage:`url(${Ve})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/40"})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center gap-8 animate-in fade-in slide-in-from-bottom-10 duration-1000",children:e.jsx("div",{className:`transform transition-all duration-1000 ease-out ${q?"translate-y-0 opacity-100":"translate-y-32 opacity-0"}`,children:e.jsxs("button",{onClick:l,className:"group relative px-12 py-5 bg-green-600/20 hover:bg-green-600/40 border border-green-500/50 hover:border-green-400 text-green-300 font-black text-2xl tracking-widest rounded-none transform transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(34,211,238,0.4)] backdrop-blur-md overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-green-400/10 to-transparent translate-y-[-100%] animate-[scan_2s_infinite_linear]"}),e.jsx("span",{className:"relative z-10 flex items-center gap-3 animate-pulse",children:p?e.jsxs(e.Fragment,{children:[e.jsx(Mt,{className:"animate-spin-slow"})," RESUME"]}):e.jsxs(e.Fragment,{children:[e.jsx(Dt,{})," PLAY"]})})]})})}),e.jsxs("div",{className:"absolute bottom-4 text-slate-600 text-xs text-center",children:["Inspired by Deception: Murder in Hongkong. A tribute game.",e.jsx("br",{}),"Developed by ",e.jsx("strong",{children:"RAWFID K SHUVO"}),"."]}),e.jsx("style",{children:`
        @keyframes scan {
          0% { transform: translateY(-100%); }
          100% { transform: translateY(200%); }
        }
      `})]})};function Yt(){const[l,p]=d.useState(null),[x,b]=d.useState("splash"),[W,q]=d.useState(""),[g,O]=d.useState(null),[t,ae]=d.useState(null),[we,U]=d.useState(!1),[le,P]=d.useState(""),[Ze,Se]=d.useState(!1),[Ce,Ee]=d.useState(!1),[Jt,Xt]=d.useState(null),[Zt,Qt]=d.useState(null),[u,B]=d.useState(null),[Qe,Y]=d.useState(!1),[es,ts]=d.useState(!1),[re,Ie]=d.useState(!1),[z,ie]=d.useState(!1),[ke,V]=d.useState(!1),[J,et]=d.useState(!0),[L,ne]=d.useState(null),[Te,oe]=d.useState(!0),[ss,Re]=d.useState(!0),[de,F]=d.useState(!1),[_,tt]=d.useState(()=>localStorage.getItem("gameHub_playerName")||"");d.useEffect(()=>{_&&localStorage.setItem("gameHub_playerName",_)},[_]);const st=()=>{const s=localStorage.getItem("investigation_roomId");s&&(U(!0),O(s)),b("menu")};d.useEffect(()=>((async()=>{if(typeof __initial_auth_token<"u"&&__initial_auth_token)try{await Ct(X,__initial_auth_token)}catch{await Ge(X)}else await Ge(X)})(),wt(X,a=>p(a))),[]),d.useEffect(()=>{t?.phase==="WITNESS_HUNT"?(oe(!0),Re(!0)):oe(!1)},[t?.phase]),d.useEffect(()=>{t?.accompliceSuggestion&&Re(!0)},[t?.accompliceSuggestion]),d.useEffect(()=>{if(!g||!l)return;const s=f(j,"artifacts",v,"public","data","rooms",g),a=Oe(s,r=>{if(r.exists()){const i=r.data();if(!i.players.find(N=>N.id===l.uid)){localStorage.removeItem("investigation_roomId"),O(null),b("menu"),ae(null),P("You were removed from the room.");return}ae({id:r.id,...i}),i.status==="playing"||i.status==="finished"?b("game"):b("lobby"),i.status==="lobby"&&(Y(!1),B(null),ie(!1)),i.status==="playing"&&i.phase==="INVESTIGATION"&&i.players.filter(M=>M.role!=="DETECTIVE"&&M.badge===!0).length===0&&!i.activeAccusation&&i.hostId===l.uid&&at()}else localStorage.removeItem("investigation_roomId"),O(null),b("menu"),P("Room closed by host.")});return()=>a()},[g,l]),d.useEffect(()=>{const s=Oe(f(j,"game_hub_settings","config"),a=>{a.exists()&&a.data()[Ht]?.maintenance?Se(!0):Se(!1)});return()=>s()},[]);const at=async s=>{let a=[{text:"All badges used. Murderer Escapes!",type:"danger"}];await y(f(j,"artifacts",v,"public","data","rooms",g),{phase:"GAME_OVER_BAD",logs:T(...a)})},ce=(s,a)=>{ne({title:s,message:a,type:"alert"})},lt=(s,a,r)=>{ne({title:s,message:a,type:"confirm",onConfirm:r})},Ae=()=>ne(null),rt=async()=>{if(!l||!_.trim())return P("Enter nickname.");U(!0);const s="123456789ABCDEFGHIJKLMNPQRSTUVWXYZ";let a="";for(let i=0;i<6;i++)a+=s.charAt(Math.floor(Math.random()*s.length));localStorage.setItem("investigation_roomId",a);const r={roomId:a,hostId:l.uid,players:[{id:l.uid,name:_,role:null,means:[],clues:[],badge:!0,ready:!0}],status:"lobby",settings:{useAccomplice:!1,useWitness:!1},logs:[],accusations:[],nextRoundRequests:[],replayRequests:[],readyPlayers:[],activeAccusation:null};try{await Et(f(j,"artifacts",v,"public","data","rooms",a),r),O(a),q(a)}catch{P("Failed to create room.")}U(!1)},it=async()=>{if(!l||!W||!_.trim())return P("Enter details.");U(!0);try{const s=f(j,"artifacts",v,"public","data","rooms",W.toUpperCase()),a=await It(s);if(!a.exists())throw new Error("Room not found.");const r=a.data();if(r.players.length>=10)throw new Error("Room full.");if(r.status!=="lobby")throw new Error("Game started.");r.players.find(m=>m.id===l.uid)||await y(s,{players:T({id:l.uid,name:_,role:null,means:[],clues:[],badge:!0,ready:!0})}),localStorage.setItem("investigation_roomId",W.toUpperCase()),O(W.toUpperCase())}catch(s){P(s.message)}U(!1)},Me=async s=>{if(!t||t.hostId!==l.uid)return;const a=t.settings?.[s]||!1;await y(f(j,"artifacts",v,"public","data","rooms",g),{[`settings.${s}`]:!a})},De=async()=>{if(!g||!l||!t)return;localStorage.removeItem("investigation_roomId");const s=f(j,"artifacts",v,"public","data","rooms",g);try{if(t.hostId===l.uid)await We(s);else{const a=t.players.filter(r=>r.id!==l.uid);a.length===0?await We(s):await y(s,{players:a})}}catch(a){console.error("Error leaving room:",a)}O(null),b("menu"),ae(null),V(!1)},nt=async s=>{if(!t||t.hostId!==l.uid)return;const a=t.players.filter(r=>r.id!==s);await y(f(j,"artifacts",v,"public","data","rooms",g),{players:a})},ot=()=>{const s=t.roomId,a=()=>{Ee(!0),setTimeout(()=>Ee(!1),2e3),triggerFeedback&&triggerFeedback("neutral","COPIED!","",pe)};try{navigator.clipboard.writeText(s),a()}catch{const i=document.createElement("textarea");i.value=s,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),a()}},xe=async()=>{if(!t||t.hostId!==l.uid)return;const s=t.players.map(a=>({...a,role:null,means:[],clues:[],badge:!0,ready:!0}));await y(f(j,"artifacts",v,"public","data","rooms",g),{status:"lobby",phase:null,solution:null,activeTiles:null,logs:[],players:s,round:1,accusations:[],successfulSolvers:[],accompliceSuggestion:null,murdererGuess:null,nextRoundRequests:[],replayRequests:[],readyPlayers:[],activeAccusation:null})},ue=async()=>{if(t.players.length<4)return P("Need 4+ players.");const s=t.players.length;let a=["DETECTIVE","MURDERER"];for(s>=6&&t.settings?.useAccomplice&&a.push("ACCOMPLICE"),s>=5&&t.settings?.useWitness&&a.push("WITNESS");a.length<s;)a.push("INVESTIGATOR");a=H(a);const r=H([...Ut]),i=H([...Ft]),m=t.players.map((E,w)=>{if(a[w]==="DETECTIVE")return{...E,role:a[w],means:[],clues:[],badge:!1};const D=[],n=[];for(let c=0;c<4;c++)D.push(r.pop());for(let c=0;c<4;c++)n.push(i.pop());return{...E,role:a[w],means:D,clues:n,badge:!0}}),N=H([...Z.MAIN])[0],M=H([...Z.SUBORDINATE]).slice(0,4),R=[{...Z.FIXED,id:"cause",selected:null},{...N,id:"main",selected:null},...M.map((E,w)=>({...E,id:`scene_${w}`,selected:null}))];await y(f(j,"artifacts",v,"public","data","rooms",g),{status:"playing",phase:"PRE_GAME_MURDER",players:m,activeTiles:R,solution:null,round:1,logs:T({text:"Game Started. Planning Phase...",type:"neutral"}),accusations:[],nextRoundRequests:[],readyPlayers:[],replayRequests:[],activeAccusation:null})},dt=async()=>{if(t.readyPlayers?.includes(l.uid))return;const s=[...t.readyPlayers||[],l.uid],a=t.players.length===s.length;let r={readyPlayers:s};a&&(r.phase="MURDERER_SELECT",r.logs=T({text:"Everyone Ready. Murderer is choosing...",type:"danger"})),await y(f(j,"artifacts",v,"public","data","rooms",g),r)},ct=async(s,a)=>{await y(f(j,"artifacts",v,"public","data","rooms",g),{solution:{means:s,clue:a,murdererId:l.uid},phase:"DETECTIVE_TURN",logs:T({text:"Crime Committed. Detective is analyzing evidence...",type:"danger"})})},xt=async(s,a)=>{const r=[...t.activeTiles];r[s].selected=a,await y(f(j,"artifacts",v,"public","data","rooms",g),{activeTiles:r})},ut=async()=>{if(!t.activeTiles.every(a=>a.selected!==null))return ce("Incomplete","Select an option for every tile!");await y(f(j,"artifacts",v,"public","data","rooms",g),{phase:"INVESTIGATION",logs:T({text:`Round ${t.round} Clues Revealed! Investigators, submit your files when ready.`,type:"info"}),nextRoundRequests:[]})},mt=async()=>{t.nextRoundRequests?.includes(l.uid)||await y(f(j,"artifacts",v,"public","data","rooms",g),{nextRoundRequests:T(l.uid)})},ht=async s=>{if(s<2)return ce("Invalid Action","You cannot replace the Cause of Death or Main Location tile.");if(t.round>=3)return;const a=t.activeTiles.map(N=>N.title),r=Z.SUBORDINATE.filter(N=>!a.includes(N.title)),i=H(r)[0],m=[...t.activeTiles];m[s]={...i,id:`scene_r${t.round+1}_${s}`,selected:null},await y(f(j,"artifacts",v,"public","data","rooms",g),{phase:"DETECTIVE_TURN",round:t.round+1,activeTiles:m,logs:T({text:`Round ${t.round+1} Begins. Detective is updating a clue...`,type:"neutral"})}),ie(!1)},bt=async()=>{if(!u)return;const{targetId:s,means:a,clue:r}=u,i=t.players.findIndex(w=>w.id===l.uid),m=[...t.players];m[i].badge=!1;const N=t.solution,M=s===N.murdererId&&a===N.means&&r===N.clue,R={solverId:l.uid,solverName:m[i].name,targetId:s,means:a,clue:r,isCorrect:M,continueVotes:[]},E=t.nextRoundRequests||[];E.includes(l.uid)||E.push(l.uid),await y(f(j,"artifacts",v,"public","data","rooms",g),{players:m,accusations:T(R),activeAccusation:R,nextRoundRequests:E,logs:T({text:`${m[i].name} submitted a case file.`,type:"neutral"})}),Y(!1),B(null)},gt=async()=>{if(!t.activeAccusation)return;const s=t.activeAccusation.continueVotes||[];if(s.includes(l.uid))return;const a=[...s,l.uid],r=t.players.length===a.length;let i={"activeAccusation.continueVotes":a};r&&(i.activeAccusation=null,t.activeAccusation.isCorrect?t.settings?.useWitness?(i.phase="WITNESS_HUNT",i.successfulSolvers=[t.activeAccusation.solverId],i.logs=T({text:"CORRECT! But Murderer can steal win by finding Witness.",type:"warning"})):(i.phase="GAME_OVER_GOOD",i.successfulSolvers=[t.activeAccusation.solverId],i.logs=T({text:"CORRECT! Investigators Win!",type:"success"})):i.logs=T({text:`${t.activeAccusation.solverName} was WRONG. Game Continues.`,type:"danger"})),await y(f(j,"artifacts",v,"public","data","rooms",g),i)},pt=async s=>{await y(f(j,"artifacts",v,"public","data","rooms",g),{accompliceSuggestion:s})},ft=async s=>{const a=t.players.find(m=>m.id===s);let r="GAME_OVER_GOOD",i=[];a.role==="WITNESS"?(r="GAME_OVER_BAD",i.push({text:`Murderer identified the Witness (${a.name})! Murderer Wins!`,type:"danger"})):(r="GAME_OVER_GOOD",i.push({text:"Murderer guessed wrong! Investigators Win!",type:"success"})),await y(f(j,"artifacts",v,"public","data","rooms",g),{phase:r,logs:T(...i)})};if(Ze)return e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white p-4 text-center",children:[e.jsx(He,{}),e.jsxs("div",{className:"bg-orange-500/10 p-8 rounded-2xl border border-orange-500/30",children:[e.jsx(St,{size:64,className:"text-orange-500 mx-auto mb-4 animate-bounce"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Under Maintenance"}),e.jsx("p",{className:"text-gray-400",children:"Crime scene sealed. Forensics team is sweeping the area."})]}),e.jsx("div",{className:"h-8"}),e.jsx("a",{href:"/rawfids-gamehub/",children:e.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:e.jsx("div",{className:"text-center pb-12 animate-pulse",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-4 bg-slate-900/50 rounded-full border border-indigo-500/20 text-indigo-300 font-bold tracking-widest text-sm uppercase backdrop-blur-sm",children:[e.jsx(_e,{size:16})," Visit Gamehub...Try our other releases..."," ",e.jsx(_e,{size:16})]})})})}),e.jsx(fe,{})]});if(!l)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center text-green-500 animate-pulse",children:"Unfolding clues..."});if(g&&!t&&!le)return e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white p-4",children:[e.jsx(Q,{}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur p-8 rounded-2xl border border-zinc-700 shadow-2xl flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsx(Ke,{size:48,className:"text-green-500 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Reconnecting..."}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Resuming your session"})]})]})]});if(x==="splash")return e.jsx(qt,{onStart:st});if(x==="menu")return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-4 relative overflow-hidden font-sans",children:[e.jsx(Q,{}),e.jsx("nav",{className:"absolute top-0 left-0 w-full p-4 z-50",children:e.jsxs("a",{href:"/rawfids-gamehub/",className:`flex items-center gap-2 text-green-800 rounded-lg 
			font-bold shadow-md hover:text-green-400 transition-colors w-fit animate-pulse`,children:[e.jsx(Rt,{}),e.jsx("span",{children:"Back to Gamehub"})]})}),de&&e.jsx(je,{onClose:()=>F(!1)}),e.jsxs("div",{className:"z-10 text-center mb-10",children:[e.jsx(ee,{size:64,className:"text-green-500 mx-auto mb-4 animate-bounce drop-shadow-[0_0_15px_rgba(34,197,94,0.5)]"}),e.jsx("h1",{className:"text-3xl sm:text-5xl md:text-6xl font-black text-transparent bg-clip-text bg-linear-to-b from-green-300 to-green-600 font-serif tracking-widest drop-shadow-md wrap-break-word max-w-full",children:"INVESTIGATION"}),e.jsx("p",{className:"text-gray-400 tracking-[0.3em] uppercase mt-2",children:"Murder Mystery"})]}),e.jsxs("div",{className:"bg-gray-900/80 backdrop-blur border border-gray-700 p-8 rounded-2xl w-full max-w-md shadow-2xl z-10 animate-in slide-in-from-bottom-10 duration-700 delay-100",children:[le&&e.jsx("div",{className:"bg-red-900/50 text-red-200 p-2 mb-4 rounded text-center text-sm border border-red-800",children:le}),e.jsx("input",{className:"w-full bg-black/50 border border-gray-600 p-3 rounded mb-4 text-white placeholder-gray-500 focus:border-green-500 outline-none transition-colors",placeholder:"Your Codename",value:_,onChange:s=>tt(s.target.value)}),e.jsxs("button",{onClick:rt,disabled:we,className:"w-full bg-linear-to-r from-green-700 to-green-600 hover:from-green-600 hover:to-green-500 p-4 rounded font-bold mb-4 flex items-center justify-center gap-2 border border-green-500/30 shadow-[0_0_15px_rgba(34,197,94,0.2)] transition-all",children:[e.jsx(G,{size:20})," Create Case File"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsx("input",{className:"w-full sm:flex-1 bg-black/50 border border-gray-600 p-3 rounded text-white placeholder-gray-500 uppercase font-mono tracking-wider focus:border-green-500 outline-none",placeholder:"ROOM CODE",value:W,onChange:s=>q(s.target.value.toUpperCase())}),e.jsx("button",{onClick:it,disabled:we,className:"w-full sm:w-auto bg-gray-800 hover:bg-gray-700 border border-gray-600 px-6 py-3 rounded font-bold transition-colors",children:"Join"})]}),e.jsxs("button",{onClick:()=>F(!0),className:"w-full text-sm text-gray-400 hover:text-white flex items-center justify-center gap-2 py-2",children:[e.jsx(Pe,{size:16})," Penal Codes"]})]})]});if(x==="lobby"&&t){const s=t.hostId===l.uid,a=t.players.length;return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-6 relative pb-16",children:[e.jsx(Q,{}),e.jsx(He,{}),de&&e.jsx(je,{onClose:()=>F(!1)}),ke&&e.jsx(Ue,{onCancel:()=>V(!1),onConfirm:De,isHost:s}),e.jsxs("div",{className:"z-10 w-full max-w-lg bg-gray-800/90 p-8 rounded-2xl border border-gray-700 shadow-2xl mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-gray-700 pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl text-green-500 font-bold uppercase",children:"Case File"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-mono text-white font-black",children:t.roomId}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:ot,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:Ce?e.jsx(pe,{size:16,className:"text-green-500"}):e.jsx(At,{size:16})}),Ce&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-green-500 text-black text-xs font-bold px-2 py-1 rounded shadow-lg animate-fade-in-up whitespace-nowrap",children:"Copied!"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(qe,{size:16})," ",a,"/10"]}),e.jsx("button",{onClick:()=>V(!0),className:"p-2 bg-red-900/50 hover:bg-red-900 rounded text-red-300",title:"Leave Room",children:e.jsx(ze,{size:16})})]})]}),e.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-xl border border-gray-700 flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 font-bold",children:[e.jsx(_t,{size:18})," Settings"]}),e.jsxs("div",{className:"flex gap-4",children:[a>=6&&e.jsxs("label",{className:`flex items-center gap-2 cursor-pointer ${!s&&"opacity-50 pointer-events-none"}`,children:[e.jsx("input",{type:"checkbox",checked:t.settings?.useAccomplice||!1,onChange:()=>Me("useAccomplice"),className:"w-4 h-4 accent-green-500 rounded"}),e.jsx("span",{className:"text-sm",children:"Accomp."})]}),a>=5&&e.jsxs("label",{className:`flex items-center gap-2 cursor-pointer ${!s&&"opacity-50 pointer-events-none"}`,children:[e.jsx("input",{type:"checkbox",checked:t.settings?.useWitness||!1,onChange:()=>Me("useWitness"),className:"w-4 h-4 accent-green-500 rounded"}),e.jsx("span",{className:"text-sm",children:"Witness"})]}),a<5&&e.jsx("span",{className:"text-xs text-gray-500",children:"Need 5+ players for extra roles"})]})]}),e.jsxs("div",{className:"space-y-3 mb-8",children:[t.players.map(r=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-900 p-4 rounded border border-gray-700",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("span",{className:`font-bold ${r.id===l.uid?"text-green-500":"text-gray-300"}`,children:[r.name," ",r.id===t.hostId&&"ðŸ‘‘"]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-green-600 flex items-center gap-1 text-sm",children:[e.jsx(pe,{size:14})," Ready"]}),s&&r.id!==l.uid&&e.jsx("button",{onClick:()=>nt(r.id),className:"text-red-900 hover:text-red-500 transition-colors",children:e.jsx(Gt,{size:16})})]})]},r.id)),t.players.length<4&&e.jsx("div",{className:"text-center text-gray-500 animate-pulse italic",children:"Waiting for more investigators..."})]}),s?e.jsx("button",{onClick:ue,disabled:t.players.length<4,className:`w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all ${t.players.length<4?"bg-gray-700 cursor-not-allowed text-gray-500":"bg-green-700 hover:bg-green-600 text-white shadow-green-900/30"}`,children:"Start Investigation"}):e.jsx("div",{className:"text-center text-green-500/80 font-serif mb-2",children:"Waiting for Host to start..."})]}),e.jsx("div",{className:"fixed bottom-0 left-0 w-full",children:e.jsx(fe,{})})]})}if(x==="game"&&t){const s=t.players.find(n=>n.id===l.uid);if(!s)return e.jsx("div",{onClick:()=>window.location.reload(),className:"p-10 text-white cursor-pointer",children:"You were removed. Click to reload."});let a={};if(a[s.id]=s.role,s.role==="DETECTIVE"&&t.players.forEach(n=>a[n.id]=n.role),s.role==="MURDERER"){const n=t.players.find(c=>c.role==="ACCOMPLICE");n&&(a[n.id]="ACCOMPLICE")}if(s.role==="ACCOMPLICE"){const n=t.players.find(c=>c.role==="MURDERER");n&&(a[n.id]="MURDERER")}s.role==="WITNESS"&&t.players.forEach(n=>{n.role==="MURDERER"&&(a[n.id]="MURDERER")});const r=s.role==="DETECTIVE",i=s.role==="MURDERER",m=s.role==="ACCOMPLICE",N=t.accusations?.find(n=>n.solverId===l.uid),M=(n,c,o)=>{const I=t.phase==="INVESTIGATION";r||!s.badge||!I||B(S=>{if(S?.targetId!==n)return{targetId:n,[c]:o,[c==="means"?"clue":"means"]:null};const k={...S};return k[c]===o?k[c]=null:k[c]=o,k})};let R="INVESTIGATION",E=ee,w="text-green-500",D=null;if(t.phase==="PRE_GAME_MURDER"?(R="PRE-GAME",E=ye,w="text-blue-400"):t.phase==="MURDERER_SELECT"?i||m?(R="MURDER PHASE",E=se,w="text-red-500"):r?(R="DETECTIVE",E=te,w="text-blue-500"):(R="NIGHT PHASE",E=Le,w="text-slate-500"):t.phase.includes("GAME_OVER")&&(R="CASE CLOSED",E=G,w="text-yellow-500"),t.phase==="PRE_GAME_MURDER"){const n=t.readyPlayers?.includes(l.uid);D=e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-800/50 p-2 flex justify-between items-center border-b border-slate-700",children:[e.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase",children:"Review Roles & Cards"}),e.jsx("button",{onClick:dt,disabled:n,className:`px-4 py-1.5 rounded-full font-bold text-sm transition-all ${n?"bg-green-600 text-white cursor-default":"bg-blue-600 hover:bg-blue-500 text-white shadow-lg animate-pulse"}`,children:n?"Waiting...":"Ready"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 max-w-7xl mx-auto pb-20",children:t.players.map(c=>{const o=c.id===l.uid,I=a[c.id]||c.role==="DETECTIVE";return e.jsxs("div",{className:`relative bg-slate-900 border rounded-xl overflow-hidden shadow-lg ${o?"border-blue-500/50":"border-slate-800"}`,children:[e.jsx("div",{className:"p-2 bg-slate-800/80 flex justify-between items-center border-b border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`font-bold text-sm ${o?"text-blue-400":"text-slate-200"}`,children:c.name}),I&&e.jsx(Fe,{role:c.role})]})}),e.jsxs("div",{className:"p-2 grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[10px] uppercase font-bold text-red-900 mb-1",children:"Murder Weapon"}),c.means.map(S=>e.jsxs("div",{className:"p-1.5 rounded bg-slate-800 border border-red-900/30 flex flex-col items-center justify-center text-center gap-1 min-h-[50px] shadow-sm",children:[C(S),e.jsx("span",{className:"text-[9px] font-bold text-red-200 leading-tight line-clamp-2",children:S})]},S))]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[10px] uppercase font-bold text-blue-900 mb-1",children:"Evidence on Site"}),c.clues.map(S=>e.jsxs("div",{className:"p-1.5 rounded bg-slate-800 border border-blue-900/30 flex flex-col items-center justify-center text-center gap-1 min-h-[50px] shadow-sm",children:[C(S),e.jsx("span",{className:"text-[9px] font-bold text-blue-200 leading-tight line-clamp-2",children:S})]},S))]})]})]},c.id)})})})]})}else if(t.phase==="MURDERER_SELECT")i||m?D=e.jsxs("div",{className:"flex-1 flex flex-col items-center pt-8 px-4 overflow-y-auto",children:[e.jsx("h1",{className:"text-3xl font-black text-red-500 mb-2",children:"COMMIT THE CRIME"}),e.jsx("p",{className:"text-red-200 mb-6 max-w-md text-center",children:i?"Select 1 Murder Weapon and 1 Evidence.":"Helping Murderer select..."}),i&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-4xl pb-32",children:[e.jsxs("div",{className:"bg-red-900/30 p-4 rounded-xl border border-red-800",children:[e.jsxs("h3",{className:"text-red-400 font-bold mb-2 flex items-center gap-2 text-sm",children:[e.jsx(Wt,{size:16})," WEAPON"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.means.map(n=>e.jsxs("button",{onClick:()=>B({...u,means:n}),className:`p-2 rounded-lg border flex flex-col items-center justify-center gap-1 min-h-[80px] ${u?.means===n?"bg-red-600 border-white text-white":"bg-red-900/50 border-red-700 text-red-200"}`,children:[C(n),e.jsx("span",{className:"text-xs font-bold leading-tight",children:n})]},n))})]}),e.jsxs("div",{className:"bg-blue-900/30 p-4 rounded-xl border border-blue-800",children:[e.jsxs("h3",{className:"text-blue-400 font-bold mb-2 flex items-center gap-2 text-sm",children:[e.jsx(te,{size:16})," EVIDENCE"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.clues.map(n=>e.jsxs("button",{onClick:()=>B({...u,clue:n}),className:`p-2 rounded-lg border flex flex-col items-center justify-center gap-1 min-h-[80px] ${u?.clue===n?"bg-blue-600 border-white text-white":"bg-blue-900/50 border-blue-700 text-blue-200"}`,children:[C(n),e.jsx("span",{className:"text-xs font-bold leading-tight",children:n})]},n))})]})]}),i&&e.jsx("div",{className:"fixed bottom-12 left-0 w-full p-4 flex justify-center z-40 pointer-events-none",children:e.jsx("button",{disabled:!u?.means||!u?.clue,onClick:()=>ct(u.means,u.clue),className:"w-full max-w-md bg-white text-red-900 px-8 py-3 rounded-full font-black text-lg hover:scale-105 disabled:opacity-50 pointer-events-auto shadow-2xl",children:"CONFIRM KILL"})})]}):r?D=e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-blue-400 mb-4",children:"Awaiting The Crime..."}),e.jsxs("div",{className:"animate-pulse bg-slate-800 p-6 rounded-xl max-w-lg",children:[e.jsx("p",{className:"text-slate-300",children:"The Murderer is choosing the Weapon and Evidence."}),e.jsx("p",{className:"text-slate-500 text-sm mt-4",children:"Study the cards while you wait."})]})]}):D=e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8",children:[e.jsx(Le,{size:64,className:"text-slate-700 mb-6 mx-auto"}),e.jsx("h2",{className:"text-4xl font-black text-slate-500 mb-4",children:"EYES CLOSED"}),e.jsx("p",{className:"text-slate-600",children:"The Murder is taking place..."})]});else{const n=r&&t.phase==="DETECTIVE_TURN",c=t.players.filter(o=>o.role!=="DETECTIVE").every(o=>{const I=t.nextRoundRequests?.includes(o.id),S=t.accusations?.some(k=>k.solverId===o.id);return I||S});D=e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[e.jsx("div",{className:"bg-slate-800/80 p-2 flex justify-center md:hidden border-b border-slate-700 shrink-0",children:e.jsxs("button",{onClick:()=>et(!J),className:"text-xs font-bold text-slate-400 flex items-center gap-1",children:[J?"Hide Clues":"Show Clues"," ",J?e.jsx(Be,{size:12}):e.jsx(Ot,{size:12})]})}),J&&e.jsx("div",{className:"bg-slate-900/50 p-2 overflow-x-auto border-b border-slate-800 shrink-0",children:e.jsx("div",{className:"flex gap-2 min-w-max mx-auto px-2",children:t.activeTiles.map((o,I)=>e.jsxs("div",{onClick:()=>{z&&r&&I>=2&&ht(I)},className:`w-40 bg-slate-800 rounded-lg border-2 flex flex-col relative shadow-lg transition-all ${z&&I>=2&&r?"border-red-500 cursor-pointer hover:bg-red-900/20 scale-105":r&&n&&"hover:border-blue-500/50"} ${o.selected===null?"border-slate-700":"border-slate-600"} ${z&&I<2&&"opacity-50"}`,children:[z&&I>=2&&r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-10 text-red-500 font-bold",children:e.jsx(Ne,{size:32})}),e.jsx("div",{className:`p-1.5 text-center font-bold text-[10px] uppercase tracking-wider text-white truncate ${o.type==="purple"?"bg-purple-900":o.type==="green"?"bg-emerald-900":"bg-slate-700"}`,children:o.title}),e.jsx("div",{className:"p-1.5 space-y-0.5",children:o.options.map((S,k)=>{const $=o.selected===k;return e.jsxs("div",{onClick:K=>{K.stopPropagation(),r&&n&&xt(I,k)},className:`text-[10px] px-1.5 py-1 rounded cursor-pointer flex justify-between items-center transition-colors ${$?"bg-red-600 text-white font-bold shadow-md ring-1 ring-red-400":r&&n?"hover:bg-slate-700 text-slate-300":"text-slate-500 opacity-50"}`,children:[e.jsx("span",{className:"truncate",children:S}),$&&e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full ml-1 shrink-0"})]},k)})})]},o.id))})}),e.jsxs("div",{className:"bg-slate-900 relative z-30 shadow-xl p-2 flex justify-between items-center border-b border-slate-800 shrink-0",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-[10px] text-slate-500 uppercase font-bold block",children:"Round"}),e.jsxs("span",{className:"text-sm font-bold text-white",children:[t.round,"/3"]})]}),e.jsxs("div",{className:"flex gap-2",children:[r&&n&&e.jsx("button",{onClick:ut,className:"bg-green-600 hover:bg-green-500 text-white px-3 py-1.5 rounded text-xs font-bold shadow-lg animate-pulse",children:"Confirm"}),t.phase==="INVESTIGATION"&&r&&t.round<3&&e.jsxs("button",{disabled:!c,onClick:()=>ie(!z),className:`${z?"bg-red-500 animate-pulse":c?"bg-blue-600":"bg-slate-700 opacity-50 cursor-not-allowed"} hover:brightness-110 text-white px-3 py-1.5 rounded text-xs font-bold shadow-lg transition-colors flex items-center gap-1`,children:[z?"Select Tile":"Next Rnd",!c&&e.jsxs("span",{className:"text-[10px] bg-black/30 px-1 rounded",children:[t.nextRoundRequests?.length||0,"/",t.players.length-1]})]}),t.phase==="INVESTIGATION"&&!r&&!N&&!t.nextRoundRequests?.includes(l.uid)&&t.round<3&&e.jsx("button",{onClick:mt,className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-1.5 rounded text-xs font-bold shadow-lg",children:"Request Clue Change"}),t.phase==="INVESTIGATION"&&!r&&t.nextRoundRequests?.includes(l.uid)&&e.jsx("div",{className:"text-[10px] text-green-400 font-bold bg-green-900/30 px-2 py-1 rounded border border-green-800",children:"Ready"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-transparent relative z-10",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 max-w-7xl mx-auto pb-32",children:t.players.map(o=>{const I=o.id===l.uid,S=a[o.id]||o.role==="DETECTIVE"||t.phase.includes("GAME_OVER"),k=u?.targetId===o.id,$=t.accompliceSuggestion===o.id,K=N?.targetId===o.id,A=t.accusations?.find(h=>h.solverId===o.id),jt=t.phase==="WITNESS_HUNT"&&!Te&&(m||i)&&o.role!=="DETECTIVE"&&o.role!=="MURDERER"&&o.role!=="ACCOMPLICE";return e.jsxs("div",{onClick:()=>{t.phase==="INVESTIGATION"&&!r&&s.badge&&B({targetId:o.id,means:null,clue:null})},className:`relative bg-slate-900 border rounded-xl overflow-hidden shadow-lg transition-all ${I?"border-blue-500/30 ring-1 ring-blue-900/50":"border-slate-800"} ${t.phase==="WITNESS_HUNT"&&$&&i?"ring-4 ring-yellow-500 scale-105":""} ${K?"border-yellow-500/50 ring-1 ring-yellow-500/30":""}`,children:[e.jsxs("div",{className:"p-2 bg-slate-800/80 flex justify-between items-center border-b border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`font-bold text-sm ${I?"text-blue-400":"text-slate-200"}`,children:o.name}),S&&e.jsx(Fe,{role:o.role})]}),o.badge&&o.role!=="DETECTIVE"&&e.jsx(G,{size:14,className:"text-yellow-500",fill:"currentColor"}),!o.badge&&o.role!=="DETECTIVE"&&e.jsx("div",{className:"text-[10px] text-slate-600 font-bold uppercase",children:"Submitted"})]}),e.jsxs("div",{className:"p-2 grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[10px] uppercase font-bold text-red-900 mb-1",children:"Weapon"}),o.means.map(h=>{const me=k&&u.means===h,he=K&&N.means===h,be=(r||m||i)&&t.solution?.means===h&&t.solution?.murdererId===o.id;return e.jsxs("div",{onClick:ge=>{ge.stopPropagation(),o.id!==l.uid&&M(o.id,"means",h)},className:`p-1.5 rounded-md border flex flex-col items-center justify-center text-center cursor-pointer transition-all active:scale-95 touch-manipulation min-h-[60px] shadow-sm ${me?"bg-red-600 text-white font-bold shadow-md scale-105 border border-white":he?"bg-red-900/40 text-red-200 border border-yellow-500/50 shadow-inner":be?"bg-purple-900/80 text-white border-2 border-purple-400 animate-pulse":"bg-slate-800 text-red-200 border border-red-900/30 hover:bg-red-900/20 hover:border-red-500"} ${o.id===l.uid&&"opacity-50 cursor-not-allowed"}`,children:[C(h),e.jsx("span",{className:"text-[10px] font-bold leading-tight line-clamp-2 w-full",children:h})]},h)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[10px] uppercase font-bold text-blue-900 mb-1",children:"Evidence"}),o.clues.map(h=>{const me=k&&u.clue===h,he=K&&N.clue===h,be=(r||m||i)&&t.solution?.clue===h&&t.solution?.murdererId===o.id;return e.jsxs("div",{onClick:ge=>{ge.stopPropagation(),o.id!==l.uid&&M(o.id,"clue",h)},className:`p-1.5 rounded-md border flex flex-col items-center justify-center text-center cursor-pointer transition-all active:scale-95 touch-manipulation min-h-[60px] shadow-sm ${me?"bg-blue-600 text-white font-bold shadow-md scale-105 border border-white":he?"bg-blue-900/40 text-blue-200 border border-yellow-500/50 shadow-inner":be?"bg-purple-900/80 text-white border-2 border-purple-400 animate-pulse":"bg-slate-800 text-blue-200 border border-blue-900/30 hover:bg-blue-900/20 hover:border-blue-500"} ${o.id===l.uid&&"opacity-50 cursor-not-allowed"}`,children:[C(h),e.jsx("span",{className:"text-[10px] font-bold leading-tight line-clamp-2 w-full",children:h})]},h)})]})]}),t.phase==="WITNESS_HUNT"&&$&&(m||i)&&e.jsx("div",{className:"absolute inset-0 bg-yellow-500/30 pointer-events-none flex items-center justify-center z-20",children:e.jsx("div",{className:`bg-yellow-500 text-black px-3 py-1.5 rounded-lg font-black text-xs shadow-xl border-2 border-black transform -rotate-6 ${i?"animate-pulse scale-110":""}`,children:m?"YOU SUGGESTED":"ACCOMPLICE'S PICK"})}),A&&e.jsxs("div",{className:`mx-2 mb-2 border-2 rounded-lg p-2 text-center relative overflow-hidden ${(t.phase==="WITNESS_HUNT"||t.phase.includes("GAME_OVER_GOOD"))&&A.isCorrect?"border-green-500 bg-green-950/40":"border-red-500 bg-red-950/40"}`,children:[e.jsx("div",{className:`absolute top-0 left-0 w-full h-1 ${(t.phase==="WITNESS_HUNT"||t.phase.includes("GAME_OVER_GOOD"))&&A.isCorrect?"bg-green-500":"bg-red-500"}`}),e.jsx("div",{className:`text-[10px] font-black uppercase tracking-widest mb-1 ${(t.phase==="WITNESS_HUNT"||t.phase.includes("GAME_OVER_GOOD"))&&A.isCorrect?"text-green-400":"text-red-400"}`,children:(t.phase==="WITNESS_HUNT"||t.phase.includes("GAME_OVER_GOOD"))&&A.isCorrect?"SUCCESSFUL":"FAILED"}),e.jsxs("div",{className:"text-xs text-slate-200 mb-1",children:["Suspected:"," ",e.jsx("span",{className:"font-bold text-white text-sm",children:t.players.find(h=>h.id===A.targetId)?.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{className:"border rounded px-1 py-0.5 text-[10px] truncate flex items-center justify-center gap-1 bg-black/40 border-slate-600",children:[C(A.means),A.means]}),e.jsxs("div",{className:"border rounded px-1 py-0.5 text-[10px] truncate flex items-center justify-center gap-1 bg-black/40 border-slate-600",children:[C(A.clue),A.clue]})]})]}),jt&&e.jsxs("div",{className:"p-2 pt-0 mt-auto sticky bottom-0 bg-slate-900/95 backdrop-blur-sm border-t border-slate-700 -mx-px -mb-px rounded-b-xl z-30",children:[m&&e.jsxs("button",{onClick:h=>{h.stopPropagation(),pt(o.id)},className:"w-full bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-2 px-4 rounded-lg text-xs flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(ve,{size:14})," Suggest"]}),i&&e.jsxs("button",{onClick:h=>{if(h.stopPropagation(),t.settings?.useAccomplice&&!t.accompliceSuggestion){ce("Wait!","Wait for Accomplice!");return}lt("Eliminate Witness?",`End game by guessing ${o.name}?`,()=>ft(o.id))},className:"w-full bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-lg text-xs flex items-center justify-center gap-2 shadow-lg animate-pulse",children:[e.jsx(Pt,{size:14})," ELIMINATE"]})]}),k&&(u.means||u.clue)&&t.phase==="INVESTIGATION"&&e.jsx("div",{className:"p-2 pt-0 mt-auto sticky bottom-0 bg-slate-900/95 backdrop-blur-sm border-t border-slate-700 -mx-px -mb-px rounded-b-xl z-10",children:e.jsxs("button",{onClick:h=>{h.stopPropagation(),Y(!0)},className:"w-full bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-2 px-4 rounded-lg text-xs flex items-center justify-center gap-2 shadow-lg animate-in slide-in-from-bottom-2 fade-in transition-transform active:scale-95",children:[e.jsx(G,{size:14})," Review"]})})]},o.id)})})})]})}return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-100 font-sans flex flex-col relative overflow-hidden pb-12",children:[e.jsx(Q,{}),de&&e.jsx(je,{onClose:()=>F(!1)}),ke&&e.jsx(Ue,{onConfirm:De,onCancel:()=>V(!1),isHost:t.hostId===l.uid,onReturnToLobby:()=>{xe(),V(!1)}}),re&&e.jsx(Kt,{logs:t.logs,onClose:()=>Ie(!1)}),Qe&&u&&e.jsx("div",{className:"fixed inset-0 top-14 bg-black/90 z-150 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-lg p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("h3",{className:"text-2xl font-black text-yellow-500 mb-4 flex items-center gap-2",children:[e.jsx(G,{})," SUBMIT CASE FILE"]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase",children:"Suspect"}),e.jsx("div",{className:"text-xl font-bold text-white",children:t.players.find(n=>n.id===u.targetId)?.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase mb-1",children:"Murder Weapon"}),u.means?e.jsxs("div",{className:"p-3 bg-red-900/50 border border-red-600 rounded text-red-100 font-bold text-center text-sm flex items-center justify-center gap-2",children:[C(u.means),u.means]}):e.jsx("div",{className:"p-3 bg-slate-800 border border-slate-700 border-dashed rounded text-slate-500 text-center text-xs",children:"Select Weapon"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase mb-1",children:"Evidence"}),u.clue?e.jsxs("div",{className:"p-3 bg-blue-900/50 border border-blue-600 rounded text-blue-100 font-bold text-center text-sm flex items-center justify-center gap-2",children:[C(u.clue),u.clue]}):e.jsx("div",{className:"p-3 bg-slate-800 border border-slate-700 border-dashed rounded text-slate-500 text-center text-xs",children:"Select Evidence"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>Y(!1),className:"py-3 rounded-lg font-bold text-slate-400 hover:bg-slate-800",children:"Cancel"}),e.jsx("button",{disabled:!u.means||!u.clue,onClick:bt,className:"bg-yellow-600 hover:bg-yellow-500 text-black py-3 rounded-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"CONFIRM"})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 top-14 bg-black/90 z-150 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6 max-w-sm w-full text-center shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:L.title}),e.jsx("p",{className:"text-slate-400 mb-6 text-sm",children:L.message}),e.jsxs("div",{className:`grid ${L.type==="confirm"?"grid-cols-2":"grid-cols-1"} gap-3`,children:[L.type==="confirm"&&e.jsx("button",{onClick:Ae,className:"bg-slate-700 hover:bg-slate-600 text-white py-3 rounded font-bold",children:"Cancel"}),e.jsx("button",{onClick:()=>{L.onConfirm&&L.onConfirm(),Ae()},className:"bg-blue-600 hover:bg-blue-500 text-white py-3 rounded font-bold",children:"OK"})]})]})}),t.activeAccusation&&e.jsx("div",{className:"fixed inset-0 top-14 bg-black/95 z-150 flex items-center justify-center p-4",children:e.jsxs("div",{className:`max-w-lg w-full p-6 rounded-2xl border-4 shadow-2xl text-center ${t.activeAccusation.isCorrect?"bg-green-900/90 border-green-500":"bg-red-900/90 border-red-500"}`,children:[e.jsx("h2",{className:"text-3xl font-black text-white mb-2 uppercase tracking-widest",children:t.activeAccusation.isCorrect?"CASE SOLVED!":"WRONG ACCUSATION"}),e.jsxs("div",{className:"bg-black/30 p-4 rounded-xl mb-6 text-left",children:[e.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-2 items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-400 font-bold",children:"Accuser:"}),e.jsx("span",{className:"text-white font-bold",children:t.activeAccusation.solverName})]}),e.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-2 items-center mb-4",children:[e.jsx("span",{className:"text-sm text-gray-400 font-bold",children:"Suspect:"}),e.jsx("span",{className:"text-xl text-white font-black",children:t.players.find(n=>n.id===t.activeAccusation.targetId)?.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-red-900/30 border border-red-500/30 p-2 rounded text-center",children:[e.jsx("div",{className:"text-[10px] text-red-300 uppercase font-bold mb-1",children:"Weapon"}),e.jsxs("div",{className:"text-white font-bold text-sm flex items-center justify-center gap-1",children:[C(t.activeAccusation.means),t.activeAccusation.means]})]}),e.jsxs("div",{className:"bg-blue-900/30 border border-blue-500/30 p-2 rounded text-center",children:[e.jsx("div",{className:"text-[10px] text-blue-300 uppercase font-bold mb-1",children:"Evidence"}),e.jsxs("div",{className:"text-white font-bold text-sm flex items-center justify-center gap-1",children:[C(t.activeAccusation.clue),t.activeAccusation.clue]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsxs("div",{className:"text-xs uppercase font-bold text-white/50",children:["Waiting for players:"," ",t.activeAccusation.continueVotes?.length||0,"/",t.players.length]}),e.jsxs("button",{onClick:gt,disabled:t.activeAccusation.continueVotes?.includes(l.uid),className:`px-8 py-3 rounded-full font-bold text-lg transition-all flex items-center gap-2 ${t.activeAccusation.continueVotes?.includes(l.uid)?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-white text-black hover:scale-105 shadow-xl"}`,children:[t.activeAccusation.continueVotes?.includes(l.uid)?"WAITING...":"CONTINUE"," ",e.jsx(Be,{className:"rotate-90"})]})]})]})}),t.phase==="WITNESS_HUNT"&&Te&&e.jsx("div",{className:"fixed inset-0 top-14 z-150 flex flex-col items-center justify-center p-4 bg-black/80",children:i||m?e.jsxs("div",{className:"bg-red-950 border-2 border-red-500 p-6 rounded-xl shadow-2xl text-center max-w-lg animate-in fade-in zoom-in duration-300",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-black text-red-500 mb-2",children:"YOU HAVE BEEN CAUGHT!"}),e.jsx("p",{className:"text-red-100 text-base md:text-lg mb-4",children:m?"Help the Murderer find the Witness.":"Identify the Witness to steal the win."}),i&&t.settings?.useAccomplice&&(t.accompliceSuggestion?e.jsxs("div",{className:"bg-green-900/40 p-3 rounded border border-green-500 mb-4 animate-bounce",children:[e.jsxs("div",{className:"font-bold text-green-400 text-sm mb-1 uppercase",children:[e.jsx(ve,{size:14,className:"inline mr-1"})," Target Confirmed"]}),"Accomplice suggests:"," ",e.jsx("span",{className:"text-white font-black text-lg block mt-1",children:t.players.find(n=>n.id===t.accompliceSuggestion)?.name})]}):e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-red-500/50 mb-4 animate-pulse",children:[e.jsxs("div",{className:"font-bold text-yellow-400 text-sm mb-1 uppercase",children:[e.jsx(zt,{size:14,className:"inline mr-1"})," Hold Fire"]}),"Waiting for Accomplice suggestion..."]})),e.jsx("button",{onClick:()=>oe(!1),className:"mt-4 bg-white text-red-900 px-8 py-3 rounded-full font-black uppercase text-sm hover:scale-105 transition-transform shadow-xl",children:"Select Witness"})]}):e.jsxs("div",{className:"bg-slate-900/95 border-2 border-yellow-500 p-6 rounded-xl shadow-2xl text-center max-w-lg animate-in fade-in zoom-in duration-300",children:[e.jsx("h2",{className:"text-3xl font-black text-yellow-500 mb-2",children:"CRIME SOLVED!"}),e.jsx("p",{className:"text-slate-200 text-lg mb-4",children:"The Investigators found the solution. However..."}),e.jsx("div",{className:"text-xl font-bold text-red-400 mb-4 animate-pulse",children:"THE MURDERER IS HUNTING FOR THE WITNESS"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"If the Murderer identifies the Witness correctly, the Bad Guys steal the win."})]})}),t.phase==="GAME_OVER_GOOD"&&e.jsxs("div",{className:"fixed inset-0 top-14 bg-blue-900/95 z-150 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[e.jsx(G,{size:96,className:"text-yellow-400 mb-6 shadow-xl shrink-0"}),e.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white mb-4",children:"INVESTIGATORS WIN"}),e.jsxs("p",{className:"text-blue-200 text-lg md:text-xl max-w-lg mb-8",children:["Solved by:"," ",e.jsx("span",{className:"text-yellow-400 font-bold",children:(t.successfulSolvers||[]).map(n=>t.players.find(c=>c.id===n)?.name).join(", ")})]}),e.jsxs("div",{className:"bg-white/10 p-6 rounded-xl border border-white/20 mb-8 w-full max-w-md backdrop-blur-md",children:[e.jsx("div",{className:"text-sm uppercase tracking-widest text-blue-300 mb-6 font-bold",children:"The Solution"}),e.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/80 border-2 border-red-500/50 p-4 rounded-xl flex flex-col items-center justify-center w-32 h-36 shadow-2xl",children:[e.jsx("div",{className:"scale-150 mb-2",children:C(t.solution.means)}),e.jsx("div",{className:"text-sm font-bold text-white leading-tight",children:t.solution.means})]}),e.jsx("div",{className:"flex items-center text-white/50",children:e.jsx("span",{className:"text-2xl font-black",children:"+"})}),e.jsxs("div",{className:"bg-slate-900/80 border-2 border-blue-500/50 p-4 rounded-xl flex flex-col items-center justify-center w-32 h-36 shadow-2xl",children:[e.jsx("div",{className:"scale-150 mb-2",children:C(t.solution.clue)}),e.jsx("div",{className:"text-sm font-bold text-white leading-tight",children:t.solution.clue})]})]}),e.jsxs("div",{className:"text-lg text-blue-200 bg-black/20 p-2 rounded-lg inline-block px-6",children:["Culprit:"," ",e.jsx("span",{className:"text-white font-black",children:t.players.find(n=>n.id===t.solution.murdererId)?.name})]})]}),t.hostId===l.uid&&e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:ue,className:"bg-green-600 hover:bg-green-500 text-white px-8 py-3 rounded-full font-bold shadow-lg",children:"New Game"}),e.jsx("button",{onClick:xe,className:"bg-slate-700 hover:bg-slate-600 text-white px-8 py-3 rounded-full font-bold shadow-lg",children:"Lobby"})]})]}),t.phase==="GAME_OVER_BAD"&&e.jsxs("div",{className:"fixed inset-0 top-14 bg-red-950/95 z-150 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[e.jsx(se,{size:96,className:"text-red-500 mb-6 shadow-xl shrink-0"}),e.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white mb-4",children:"MURDERER WINS"}),e.jsx("p",{className:"text-red-200 text-lg md:text-xl max-w-lg mb-8",children:"The investigation failed or the witness was silenced."}),e.jsxs("div",{className:"bg-white/10 p-6 rounded-xl border border-white/20 mb-8 w-full max-w-md backdrop-blur-md",children:[e.jsx("div",{className:"text-sm uppercase tracking-widest text-red-300 mb-6 font-bold",children:"The Solution"}),e.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/80 border-2 border-red-500/50 p-4 rounded-xl flex flex-col items-center justify-center w-32 h-36 shadow-2xl",children:[e.jsx("div",{className:"scale-150 mb-2",children:C(t.solution.means)}),e.jsx("div",{className:"text-sm font-bold text-white leading-tight",children:t.solution.means})]}),e.jsx("div",{className:"flex items-center text-white/50",children:e.jsx("span",{className:"text-2xl font-black",children:"+"})}),e.jsxs("div",{className:"bg-slate-900/80 border-2 border-blue-500/50 p-4 rounded-xl flex flex-col items-center justify-center w-32 h-36 shadow-2xl",children:[e.jsx("div",{className:"scale-150 mb-2",children:C(t.solution.clue)}),e.jsx("div",{className:"text-sm font-bold text-white leading-tight",children:t.solution.clue})]})]}),e.jsxs("div",{className:"text-lg text-red-200 bg-black/20 p-2 rounded-lg inline-block px-6",children:["Culprit:"," ",e.jsx("span",{className:"text-white font-black",children:t.players.find(n=>n.id===t.solution.murdererId)?.name})]})]}),t.hostId===l.uid&&e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:ue,className:"bg-green-600 hover:bg-green-500 text-white px-8 py-3 rounded-full font-bold shadow-lg",children:"New Game"}),e.jsx("button",{onClick:xe,className:"bg-slate-700 hover:bg-slate-600 text-white px-8 py-3 rounded-full font-bold shadow-lg",children:"Lobby"})]})]}),e.jsxs("div",{className:"h-14 bg-slate-900/90 border-b border-slate-800 flex items-center justify-between px-4 z-160 sticky top-0 backdrop-blur-md shrink-0 shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{size:20,className:w}),e.jsx("span",{className:`font-black uppercase tracking-tight text-lg hidden md:block ${w}`,children:R}),e.jsx("span",{className:`font-black uppercase tracking-tight text-sm md:hidden ${w}`,children:R==="INVESTIGATION"?"INV.":R})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ie(!re),className:`p-2 rounded-full ${re?"bg-green-900 text-green-400":"text-gray-400 hover:bg-gray-800"}`,children:e.jsx(Ye,{size:18})}),e.jsx("button",{onClick:()=>F(!0),className:"p-2 text-slate-400 hover:bg-slate-800 rounded-full",children:e.jsx(Pe,{size:18})}),e.jsx("button",{onClick:()=>V(!0),className:"p-2 text-red-400 hover:bg-red-900/20 rounded-full",children:e.jsx(ze,{size:18})})]})]}),D,e.jsx("div",{className:"fixed bottom-0 left-0 w-full z-50",children:e.jsx(fe,{})})]})}return null}Tt.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(Yt,{})}));
