import{c as Ee,i as Ve,g as Ze,a as Ke,r as h,e as qe,o as ye,d as g,j as e,H as Je,S as je,X as q,n as Xe,s as Qe,h as et,p as tt,u as w,q as z,t as we,m as st}from"./x-vdu6PxPT.js";import{G as at}from"./gem-CsLWdnoM.js";import{F as rt,L as lt}from"./leaf-C1HduOXV.js";import{B as $,C as nt}from"./citrus-DDA9mzQF.js";import{G as ot,A as it,C as ze}from"./grape-BVuBiulH.js";import{L as dt,S as ct,B as ve,C as _,a as xt,b as Ne}from"./step-back-DgPuYW0s.js";import{P as Te}from"./play-u0q38rUa.js";import{U as P}from"./user-hi-jrCL7.js";import{T as De}from"./trash-2-CC3Hg-Aa.js";import{H as mt}from"./history-r3RmdCN7.js";import{T as ke}from"./trophy-CV5zFLFQ.js";import{T as Re}from"./triangle-alert-CO8fZ1I9.js";import{S as Ae}from"./skull--JE29QMg.js";import{H as J}from"./hand-D9d9Q_H-.js";import{I as ut}from"./info-D-_2aBr4.js";import{S as ht}from"./shield-check-D0f25w0J.js";const ft=[["path",{d:"M12 4V2",key:"1k5q1u"}],["path",{d:"M5 10v4a7.004 7.004 0 0 0 5.277 6.787c.412.104.802.292 1.102.592L12 22l.621-.621c.3-.3.69-.488 1.102-.592A7.003 7.003 0 0 0 19 14v-4",key:"1tgyif"}],["path",{d:"M12 4C8 4 4.5 6 4 8c-.243.97-.919 1.952-2 3 1.31-.082 1.972-.29 3-1 .54.92.982 1.356 2 2 1.452-.647 1.954-1.098 2.5-2 .595.995 1.151 1.427 2.5 2 1.31-.621 1.862-1.058 2.5-2 .629.977 1.162 1.423 2.5 2 1.209-.548 1.68-.967 2-2 1.032.916 1.683 1.157 3 1-1.297-1.036-1.758-2.03-2-3-.5-2-4-4-8-4Z",key:"tnsqj"}]],bt=Ee("nut",ft);const gt=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],pt=Ee("sun",gt),yt={apiKey:"AIzaSyBjIjK53vVJW1y5RaqEFGSFp0ECVDBEe1o",authDomain:"game-hub-ff8aa.firebaseapp.com",projectId:"game-hub-ff8aa",storageBucket:"game-hub-ff8aa.firebasestorage.app",messagingSenderId:"586559578902",appId:"1:586559578902:web:91da4fa4ace038d16aa637"},_e=Ve(yt),V=Ze(_e),p=Ke(_e),y=typeof __app_id<"u"?__app_id:"fructose-fury-game",jt="20",I={CHERRY:{name:"Strawberry",val:1,count:11,color:"text-red-400",bg:"bg-red-900/50",border:"border-red-500",icon:ze},CITRUS:{name:"Tangerine",val:2,count:11,color:"text-orange-400",bg:"bg-orange-900/50",border:"border-orange-500",icon:nt},APPLE:{name:"Peach",val:3,count:11,color:"text-pink-400",bg:"bg-pink-900/50",border:"border-pink-500",icon:it},GRAPE:{name:"Grape",val:4,count:11,color:"text-purple-400",bg:"bg-purple-900/50",border:"border-purple-500",icon:ot},BANANA:{name:"Banana",val:5,count:11,color:"text-yellow-400",bg:"bg-yellow-900/50",border:"border-yellow-500",icon:$},NUT:{name:"Coconut",val:6,count:7,color:"text-stone-400",bg:"bg-stone-800/80",border:"border-stone-500",icon:bt},LEAF:{name:"Pear",val:7,count:7,color:"text-lime-400",bg:"bg-lime-900/50",border:"border-lime-500",icon:lt},FLOWER:{name:"Dragonfruit",val:8,count:7,color:"text-fuchsia-400",bg:"bg-fuchsia-900/50",border:"border-fuchsia-500",icon:rt},SUN:{name:"Melon",val:9,count:7,color:"text-amber-300",bg:"bg-amber-900/50",border:"border-amber-500",icon:pt},GEM:{name:"Pineapple",val:10,count:7,color:"text-cyan-300",bg:"bg-cyan-900/50",border:"border-cyan-500",icon:at}},G=[];Object.keys(I).forEach(a=>{const n=I[a].count;for(let x=0;x<n;x++)G.push(a)});const Z=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx($,{size:12,className:"text-yellow-400"}),e.jsx("span",{className:"text-[10px] font-black tracking-widest text-yellow-400 uppercase",children:"FRUCTOSE FURY"})]}),Se=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx($,{size:20,className:"text-yellow-400"}),e.jsx("span",{className:"text-[20px] font-black tracking-widest text-yellow-400 uppercase",children:"FRUCTOSE FURY"})]}),K=a=>{let n=a.length,x;for(;n!==0;)x=Math.floor(Math.random()*n),n--,[a[n],a[x]]=[a[x],a[n]];return a},T=a=>!a||!Array.isArray(a)?0:a.reduce((n,x)=>n+(I[x]?.val||0),0),F=({isShaking:a})=>e.jsxs("div",{className:`absolute inset-0 overflow-hidden pointer-events-none z-0 ${a?"animate-shake bg-red-900/20":""}`,children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,var(--tw-gradient-stops))] from-yellow-900/20 via-gray-950 to-black"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[...Array(20)].map((n,x)=>{const c=Object.keys(I),i=I[c[x%c.length]].icon;return e.jsx("div",{className:"absolute animate-float text-white/60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${10+Math.random()*20}s`,transform:`scale(${.5+Math.random()})`},children:e.jsx(i,{size:32})},x)})}),e.jsx("style",{children:`
      @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
      }
      .animate-float { animation: float infinite ease-in-out; }
      
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
      .animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
    `})]}),S=({type:a,size:n="md",animate:x=!1})=>{const c=I[a];if(!c)return e.jsx("div",{className:"w-16 h-24 bg-gray-800 rounded-lg"});const i=n==="sm"?"w-10 h-14 md:w-12 md:h-16 p-1":n==="lg"?"w-32 h-48 p-4":"w-20 h-28 md:w-24 md:h-32 p-2",v=c.icon;return e.jsxs("div",{className:`
      ${i} rounded-xl border-2 ${c.bg} ${c.border} 
      flex flex-col items-center justify-center shadow-lg relative overflow-hidden
      ${x?"animate-in zoom-in duration-300":""}
    `,children:[e.jsx("div",{className:"absolute -right-2 -top-2 opacity-20 rotate-12",children:e.jsx(v,{size:n==="lg"?80:40})}),e.jsx(v,{className:`${c.color} drop-shadow-md z-10`,size:n==="sm"?20:n==="lg"?64:32}),n!=="sm"&&e.jsx("span",{className:"font-bold uppercase tracking-wider text-[10px] md:text-xs mt-2 text-white/90 z-10 text-center leading-none",children:c.name}),e.jsx("div",{className:"absolute bottom-1 right-1 bg-black/50 px-1 rounded text-white/80 text-[10px] md:text-xs font-mono font-bold",children:c.val})]})},wt=({event:a,currentUserId:n})=>{if(!a||a.type==="STEAL"&&a.targetIds&&a.targetIds.includes(n)||a.type==="STEAL"&&a.thiefId===n||a.type==="BANK"&&a.playerId===n)return null;let x=ut,c="text-white",i="bg-gray-800";return a.type==="BUST"?(x=Ae,c="text-red-500",i="bg-red-900/90"):a.type==="STEAL"?(x=J,c="text-orange-500",i="bg-orange-900/90"):a.type==="BANK"&&(x=_,c="text-green-500",i="bg-green-900/90"),e.jsx("div",{className:"fixed inset-0 pointer-events-none z-200 flex items-center justify-center p-4",children:e.jsxs("div",{className:`p-6 md:p-8 rounded-3xl ${i} border-4 border-white/20 shadow-2xl flex flex-col items-center animate-in zoom-in fade-in duration-300 transform scale-110 max-w-sm w-full text-center`,children:[e.jsx(x,{size:48,className:`${c} mb-4 animate-bounce`}),e.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white uppercase drop-shadow-lg",children:a.title}),e.jsx("p",{className:"text-lg md:text-xl text-white/90 font-bold mt-2",children:a.message})]})})},vt=({event:a,onClose:n})=>(h.useEffect(()=>{const x=setTimeout(n,2500);return()=>clearTimeout(x)},[n]),e.jsx("div",{className:"fixed inset-0 z-210 flex items-center justify-center pointer-events-none animate-in fade-in zoom-in slide-in-from-top-5",children:e.jsxs("div",{className:"bg-red-950/90 border-2 border-red-500 p-4 rounded-2xl max-w-xs w-full text-center shadow-2xl backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(Re,{size:32,className:"text-red-500 animate-pulse"}),e.jsx("h2",{className:"text-2xl font-black text-white uppercase",children:"ROBBED!"})]}),e.jsx("p",{className:"text-red-200 text-sm mb-4 font-bold",children:a.message||"Someone stole your fruits!"}),a.cardType&&e.jsxs("div",{className:"flex flex-col items-center gap-1 mb-2",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-red-300 tracking-widest",children:"Stolen Fruit"}),e.jsx("div",{className:"transform scale-90",children:e.jsx(S,{type:a.cardType,size:"md"})})]})]})})),Nt=({data:a,onClose:n})=>(h.useEffect(()=>{const x=setTimeout(n,2500);return()=>clearTimeout(x)},[n]),e.jsx("div",{className:"fixed inset-0 z-210 flex items-center justify-center pointer-events-none animate-in fade-in zoom-in slide-in-from-top-5",children:e.jsxs("div",{className:"bg-green-950/90 border-2 border-green-500 p-4 rounded-2xl max-w-xs w-full text-center shadow-2xl backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(ht,{size:32,className:"text-green-400 animate-bounce"}),e.jsx("h2",{className:"text-2xl font-black text-white uppercase",children:"SECURED!"})]}),e.jsxs("p",{className:"text-green-100 text-sm mb-3 font-bold",children:["You secured"," ",e.jsx("span",{className:"text-yellow-300 text-xl font-black",children:a.amount})," ","points!"]}),a.cards&&a.cards.length>0&&e.jsx("div",{className:"flex flex-wrap justify-center gap-1 opacity-90 max-h-24 overflow-hidden",children:a.cards.map((x,c)=>e.jsx("div",{className:"transform scale-75",children:e.jsx(S,{type:x,size:"sm"})},c))})]})})),kt=({targets:a,fruitType:n,onSteal:x,onPass:c})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-100 flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl border-4 border-yellow-500 p-4 md:p-6 max-w-md w-full text-center shadow-[0_0_50px_rgba(234,179,8,0.3)] relative overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-500/10 animate-pulse pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[e.jsx("h3",{className:"text-2xl md:text-3xl font-black text-white mb-2 uppercase italic transform -rotate-2",children:"Sweet Opportunity!"}),e.jsxs("p",{className:"text-gray-300 mb-4 text-sm md:text-base",children:["You drew a"," ",e.jsx("strong",{className:"text-yellow-400",children:I[n].name}),"! The following players have them ripe for the taking:"]}),e.jsx("div",{className:"flex justify-center mb-4 shrink-0",children:e.jsx(S,{type:n,size:"lg",animate:!0})}),e.jsx("div",{className:"bg-black/40 rounded-xl p-3 mb-4 overflow-y-auto border border-gray-700 flex-1 min-h-0",children:a.map((i,v)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-700 last:border-0",children:[e.jsxs("span",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(P,{size:16,className:"text-gray-400"})," ",i.name]}),e.jsxs("span",{className:"bg-yellow-900/50 text-yellow-200 px-2 py-1 rounded text-xs font-mono border border-yellow-500/30",children:["Has ",i.count]})]},v))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-auto",children:[e.jsx("button",{onClick:c,className:"bg-gray-700 hover:bg-gray-600 text-gray-300 py-3 rounded-xl font-bold transition-all text-sm md:text-base",children:"Pass"}),e.jsxs("button",{onClick:x,className:"bg-linear-to-r from-orange-600 to-red-600 hover:from-orange-500 hover:to-red-500 text-white py-3 rounded-xl font-black text-sm md:text-xl shadow-lg transform hover:scale-105 transition-all flex items-center justify-center gap-2",children:[e.jsx(J,{size:18})," STEAL ALL!"]})]})]})]})}),Ie=({onConfirm:a,onCancel:n,isHost:x,onReturnToLobby:c})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6 max-w-sm w-full text-center shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Abandon the Harvest?"}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Leaving now will forfeit your gathered fruits."}),e.jsxs("div",{className:"flex flex-col gap-3",children:[x&&c&&e.jsx("button",{onClick:c,className:"w-full bg-orange-700 hover:bg-orange-600 text-white py-3 rounded font-bold transition-colors border border-orange-500 shadow-lg mb-2",children:"Return Group to Lobby"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:n,className:"bg-gray-700 hover:bg-gray-600 text-white py-3 rounded font-bold transition-colors",children:"Stay"}),e.jsx("button",{onClick:a,className:"bg-red-600 hover:bg-red-500 text-white py-3 rounded font-bold transition-colors",children:"Leave"})]})]})]})}),St=({players:a,destroyedCards:n,onClose:x})=>e.jsx("div",{className:"fixed inset-0 z-250 bg-black/95 flex items-center justify-center p-4 animate-in fade-in zoom-in duration-300",children:e.jsxs("div",{className:"bg-gray-900 border-2 border-yellow-600 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden relative",children:[e.jsxs("div",{className:"p-6 bg-gray-950 border-b border-gray-800 flex justify-between items-center shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-transparent bg-clip-text bg-linear-to-r from-yellow-400 to-orange-500 uppercase italic",children:"Harvest Report"}),e.jsx("p",{className:"text-gray-400 text-sm font-bold",children:"All cards collected and destroyed"})]}),e.jsx("button",{onClick:x,className:"bg-gray-800 hover:bg-gray-700 text-white p-3 rounded-full transition-colors",children:e.jsx(q,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[e.jsxs("div",{className:"bg-red-950/30 rounded-2xl p-4 border border-red-900/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-red-400",children:[e.jsx(De,{size:24}),e.jsx("h3",{className:"text-xl font-bold uppercase",children:"Rotten Fruit (Destroyed)"}),e.jsxs("span",{className:"bg-red-900/50 px-2 py-0.5 rounded text-xs text-red-200",children:[n?.length||0," Cards"]})]}),!n||n.length===0?e.jsx("p",{className:"text-gray-500 italic text-sm",children:"No fruits were harmed in this game."}):e.jsx("div",{className:"flex flex-wrap gap-2",children:n.sort().map((c,i)=>e.jsx("div",{className:"transform scale-75 origin-top-left -mr-4 -mb-4",children:e.jsx(S,{type:c,size:"sm"})},i))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(c=>e.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("span",{className:"font-bold text-yellow-500 text-lg flex items-center gap-2",children:[e.jsx(P,{size:18})," ",c.name]}),e.jsxs("span",{className:"text-white font-mono font-bold bg-gray-900 px-2 py-1 rounded",children:["Score: ",T(c.bank)]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 min-h-[60px] content-start bg-black/20 p-2 rounded-xl",children:c.bank&&c.bank.length>0?c.bank.sort().map((i,v)=>e.jsx("div",{className:"transform scale-75 origin-top-left -mr-3 -mb-3",children:e.jsx(S,{type:i,size:"sm"})},v)):e.jsx("span",{className:"text-gray-600 text-xs italic w-full text-center py-2",children:"Empty Basket"})})]},c.id))})]}),e.jsx("div",{className:"p-4 bg-gray-950 border-t border-gray-800 shrink-0 flex justify-center",children:e.jsx("button",{onClick:x,className:"bg-yellow-600 hover:bg-yellow-500 text-black font-black text-xl py-3 px-12 rounded-xl shadow-lg hover:scale-105 transition-transform",children:"SEE WINNER"})})]})}),Ce=({onClose:a})=>e.jsx("div",{className:"fixed inset-0 bg-black/95 z-150 flex items-center justify-center p-0 md:p-4",children:e.jsxs("div",{className:"bg-gray-900 md:rounded-2xl w-full max-w-3xl h-full md:h-auto md:max-h-[90vh] overflow-hidden border border-yellow-500/30 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-950",children:[e.jsx("h2",{className:"text-2xl font-black text-transparent bg-clip-text bg-linear-to-r from-yellow-400 to-orange-500 uppercase italic",children:"Farming Guide"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-800 rounded-full text-gray-400",children:e.jsx(q,{})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto space-y-6 text-gray-300",children:[e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-yellow-500/20 p-3 rounded-lg text-yellow-500",children:e.jsx(Te,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:"1. Push Your Luck"}),e.jsxs("p",{className:"text-sm",children:["Draw fruits from the deck. They enter your"," ",e.jsx("strong",{className:"text-red-400",children:"Risk Zone"}),"."]})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-red-500/20 p-3 rounded-lg text-red-500",children:e.jsx(Ae,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:"2. The Bust Rule"}),e.jsxs("p",{className:"text-sm",children:["You are safe if you have ",e.jsx("strong",{children:"3 or fewer cards"})," in your Risk Zone.",e.jsx("br",{}),e.jsx("strong",{children:"Only if you have 3+ cards:"})," Drawing a fruit that matches one ",e.jsx("em",{children:"already"})," in your Risk Zone causes a"," ",e.jsx("strong",{children:"BUST"}),"! All fruits from this turn are lost.",e.jsx("br",{}),e.jsx("em",{children:"Note: Stealing does NOT cause a Bust, but having 3+ cards after stealing puts you in danger for your NEXT draw!"})]})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-orange-500/20 p-3 rounded-lg text-orange-500",children:e.jsx(J,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:"3. Steal!"}),e.jsxs("p",{className:"text-sm",children:["If you draw a fruit that an opponent has in their"," ",e.jsx("strong",{className:"text-orange-400",children:"Danger Zone"})," (Table), you can ",e.jsx("strong",{children:"STEAL"})," them! They are added to your Risk Zone. Watch out: this increases your card count, making a Bust more likely on your next draw!"]})]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"bg-green-500/20 p-3 rounded-lg text-green-500",children:e.jsx(_,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:"4. Bank & Win"}),e.jsxs("p",{className:"text-sm",children:["Stop before busting to move fruits to your"," ",e.jsx("strong",{children:"Danger Zone"}),". At the start of your ",e.jsx("em",{children:"next"})," ","turn, they move to your ",e.jsx("strong",{children:"Safe Zone"}),".",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Winning:"})," The player with the highest total"," ",e.jsx("strong",{children:"VALUE"})," (not count) of banked fruits wins!"]})]})]})]}),e.jsx("div",{className:"p-4 bg-gray-900 border-t border-gray-800 text-center",children:e.jsx("button",{onClick:a,className:"bg-yellow-600 hover:bg-yellow-500 text-white px-8 py-3 rounded-lg font-bold",children:"Got it!"})})]})});function It(){const[a,n]=h.useState(null),[x,c]=h.useState("menu"),[i,v]=h.useState(""),[L,X]=h.useState(""),[s,Be]=h.useState(null),[U,D]=h.useState(""),[Q,R]=h.useState(!1),[Pe,ee]=h.useState(!1),[te,se]=h.useState(!1),[ae,M]=h.useState(!1),[re,A]=h.useState(!1),[H,le]=h.useState(!1),[O,ne]=h.useState(null),[$e,oe]=h.useState(!1),[ie,de]=h.useState(null),[ce,xe]=h.useState(null),[k,Le]=h.useState(()=>localStorage.getItem("gameHub_playerName")||"");h.useEffect(()=>{k&&localStorage.setItem("gameHub_playerName",k)},[k]);const me=h.useRef(null);h.useEffect(()=>{const r=localStorage.getItem("fructose_room_id");r&&v(r)},[]),h.useEffect(()=>{s?.status==="finished"&&oe(!0)},[s?.status]),h.useEffect(()=>{i?localStorage.setItem("fructose_room_id",i):localStorage.removeItem("fructose_room_id")},[i]),h.useEffect(()=>{(async()=>typeof __initial_auth_token<"u"&&__initial_auth_token?await Xe(V,__initial_auth_token):await Qe(V))();const t=qe(V,n);return()=>t()},[]),h.useEffect(()=>{const r=ye(g(p,"game_hub_settings","config"),t=>{t.exists()&&(t.data()[jt]?.maintenance?ee(!0):ee(!1))});return()=>r()},[]),h.useEffect(()=>{if(!i||!a)return;const r=ye(g(p,"artifacts",y,"public","data","rooms",i),t=>{if(t.exists()){const l=t.data();if(!l.players.find(m=>m.id===a.uid)){v(""),c("menu"),D("You were kicked by the host."),localStorage.removeItem("fructose_room_id");return}Be(l),l.status==="playing"||l.status==="finished"?c("game"):l.status==="lobby"&&c("lobby"),l.lastEvent&&l.lastEvent.id!==me.current&&(l.lastEvent.timestamp||Date.now())>Date.now()-1e4&&(me.current=l.lastEvent.id,ne(l.lastEvent),l.lastEvent.type==="STEAL"&&l.lastEvent.targetIds&&l.lastEvent.targetIds.includes(a.uid)&&xe(l.lastEvent),l.lastEvent.type==="BANK"&&l.lastEvent.playerId===a.uid&&de({amount:l.lastEvent.amount,cards:l.lastEvent.cards}),setTimeout(()=>ne(null),3e3))}else v(""),c("menu"),D("The Fruit Stand has closed (Host left)."),localStorage.removeItem("fructose_room_id")});return()=>r()},[i,a]);const Me=async()=>{if(!k)return D("Name required");R(!0);const r="123456789ABCDEFGHIJKLMNPQRSTUVWXYZ";let t="";for(let m=0;m<6;m++)t+=r.charAt(Math.floor(Math.random()*r.length));const l=K([...G]),d={roomId:t,hostId:a.uid,status:"lobby",players:[{id:a.uid,name:k,hand:[],table:[],bank:[],ready:!1}],deck:l,turnIndex:0,turnPhase:"IDLE",stealTargetIds:[],destroyedCards:[],drawnCard:null,lastEvent:null,logs:[]};await et(g(p,"artifacts",y,"public","data","rooms",t),d),v(t),X(t),R(!1)},Fe=async()=>{if(!L||!k)return D("Code and Name required");R(!0);const r=g(p,"artifacts",y,"public","data","rooms",L),t=await tt(r);if(!t.exists()){D("Room not found"),R(!1);return}const l=t.data();if(l.status!=="lobby"){D("Game already started"),R(!1);return}if(l.players.length>=6){D("Room full"),R(!1);return}l.players.find(d=>d.id===a.uid)||await w(r,{players:z({id:a.uid,name:k,hand:[],table:[],bank:[],ready:!1})}),v(L),R(!1)},Ge=()=>{const r=s.roomId,t=()=>{se(!0),setTimeout(()=>se(!1),2e3),triggerFeedback&&triggerFeedback("neutral","COPIED!","",_)};try{navigator.clipboard.writeText(r),t()}catch{const d=document.createElement("textarea");d.value=r,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d),t()}},ue=async()=>{if(s.hostId!==a.uid)return;const r=K([...G]),t=s.players.map(d=>({...d,ready:!1,hand:[],table:[],bank:[]})),l=Math.floor(Math.random()*t.length);await w(g(p,"artifacts",y,"public","data","rooms",i),{status:"playing",players:t,deck:r,turnIndex:l,turnPhase:"DRAWING",logs:[{text:"The Harvest Begins! Draw fruits without busting.",type:"neutral"}],stealTargetIds:[],destroyedCards:[],drawnCard:null,lastEvent:null})},he=async()=>{if(s.hostId!==a.uid)return;const r=s.players.map(t=>({...t,hand:[],table:[],bank:[],ready:!1}));await w(g(p,"artifacts",y,"public","data","rooms",i),{status:"lobby",players:r,deck:K([...G]),logs:[],turnIndex:0,destroyedCards:[]}),A(!1)},fe=async()=>{if(!i)return;localStorage.removeItem("fructose_room_id");const r=g(p,"artifacts",y,"public","data","rooms",i);if(s.hostId===a.uid)await we(r);else if(s.players.length<=1)await we(r);else{const t=s.players.findIndex(f=>f.id===a.uid),l=s.players.filter(f=>f.id!==a.uid);let d=s.turnIndex,m=!1;t<s.turnIndex?d=Math.max(0,s.turnIndex-1):t===s.turnIndex&&(m=!0),l.length>0?d>=l.length&&(d=0):d=0;let u=s.status;s.status==="playing"&&l.length<2&&(u="finished");const j={players:l,status:u,turnIndex:d,logs:z({text:`${k} left the game.`,type:"danger"})};m&&(j.turnPhase="DRAWING",j.drawnCard=null,j.stealTargetIds=[]),await w(r,j)}v(""),c("menu"),A(!1)},be=async(r,t,l=[],d=null)=>{let m=(s.turnIndex+1)%r.length;const u=r[m];let j=null;if(u.table.length>0){const f=T(u.table),N=[...u.table];u.bank=[...u.bank||[],...u.table],u.table=[],l.push({text:`${u.name} banked ${f} points!`,type:"success"}),j={id:Date.now(),timestamp:Date.now(),type:"BANK",playerId:u.id,amount:f,cards:N,title:"SECURED!",message:`${u.name} banked ${f} points!`}}await w(g(p,"artifacts",y,"public","data","rooms",i),{players:r,deck:t,turnIndex:m,turnPhase:"DRAWING",drawnCard:null,stealTargetIds:[],lastEvent:d||j||null,logs:z(...l)})},Ue=(r,t)=>r.length<3?!1:r.includes(t),W=r=>r.map(t=>({...t,bank:[...t.bank,...t.table,...t.hand],table:[],hand:[]})),He=async()=>{if(s.deck.length===0)return;const r=[...s.players],t=[...s.deck],l=r[s.turnIndex],d=t.pop();if(Ue(l.hand,d)){const u=[...l.hand,d],f=[...s.destroyedCards||[],...u],N={id:Date.now(),timestamp:Date.now(),type:"BUST",title:"BUSTED!",message:`${l.name} got greedy!`},o=[{text:`${l.name} drew ${I[d].name} and BUSTED!`,type:"danger"}];if(t.length===0){l.hand=[];const C=W(r);await w(g(p,"artifacts",y,"public","data","rooms",i),{players:C,deck:t,status:"finished",lastEvent:N,destroyedCards:f,logs:z(...o,{text:"Deck Empty on a Bust! Game Over!",type:"neutral"}),drawnCard:d,turnPhase:"BUSTED"});return}await w(g(p,"artifacts",y,"public","data","rooms",i),{players:r,deck:t,lastEvent:N,destroyedCards:f,logs:z(...o),drawnCard:d,turnPhase:"BUSTED"});const b=JSON.parse(JSON.stringify(r));b[s.turnIndex].hand=[],setTimeout(()=>be(b,t,[],null),2500);return}const m=[];for(let u of r)u.id!==l.id&&u.table.includes(d)&&m.push(u.id);if(m.length>0)await w(g(p,"artifacts",y,"public","data","rooms",i),{deck:t,drawnCard:d,turnPhase:"STEALING",stealTargetIds:m});else if(l.hand.push(d),t.length===0){const u=W(r);await w(g(p,"artifacts",y,"public","data","rooms",i),{players:u,deck:t,status:"finished",logs:z({text:"Deck Empty! Game Over!",type:"neutral"})})}else await w(g(p,"artifacts",y,"public","data","rooms",i),{players:r,deck:t})},ge=async r=>{const t=[...s.players],l=s.turnIndex,d=t[l],m=s.drawnCard,u=[];let j=null;if(d.hand.push(m),r){let f=0;const N=[],o=[];s.stealTargetIds.forEach(b=>{const C=t.findIndex(B=>B.id===b);if(C===-1)return;const E=t[C],Y=E.table.filter(B=>B===m),Ye=E.table.filter(B=>B!==m);Y.length>0&&(E.table=Ye,d.hand=[...d.hand,...Y],f+=Y.length,N.push(E.name),o.push(b))}),u.push({text:`${d.name} stole ${f} ${I[m].name}(s) from ${N.join(", ")}!`,type:"warning"}),j={id:Date.now(),timestamp:Date.now(),type:"STEAL",title:"THIEF!",message:`${d.name} stole ${f} fruits from ${N.join(", ")}!`,targetIds:o,thiefId:d.id,cardType:m}}else u.push({text:`${d.name} passed on stealing.`,type:"neutral"});if(s.deck.length===0){const f=W(t);await w(g(p,"artifacts",y,"public","data","rooms",i),{players:f,status:"finished",logs:z(...u,{text:"Deck Empty! Game Over!",type:"neutral"})})}else await w(g(p,"artifacts",y,"public","data","rooms",i),{players:t,turnPhase:"DRAWING",stealTargetIds:[],drawnCard:null,lastEvent:j,logs:z(...u)})},Oe=async()=>{const r=[...s.players],t=r[s.turnIndex];t.hand.length,t.table=[...t.table,...t.hand],t.hand=[];const l=[{text:`${t.name} stopped safely.`,type:"neutral"}];await be(r,s.deck,l)},pe=async()=>{if(!i)return;const r=[...s.players],t=r.findIndex(l=>l.id===a.uid);r[t].ready=!r[t].ready,await w(g(p,"artifacts",y,"public","data","rooms",i),{players:r})},We=async r=>{const t=s.players.filter(l=>l.id!==r);await w(g(p,"artifacts",y,"public","data","rooms",i),{players:t})};if(Pe)return e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white p-4 text-center",children:[e.jsx(Se,{}),e.jsxs("div",{className:"bg-orange-500/10 p-8 rounded-2xl border border-orange-500/30",children:[e.jsx(Je,{size:64,className:"text-orange-500 mx-auto mb-4 animate-bounce"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Under Maintenance"}),e.jsx("p",{className:"text-gray-400",children:"The farmers are tending to the trees. Come back later for fresh fruit."})]}),e.jsx("div",{className:"h-8"}),e.jsx("a",{href:"/rawfids-gamehub/",children:e.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:e.jsx("div",{className:"text-center pb-12 animate-pulse",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-4 bg-slate-900/50 rounded-full border border-indigo-500/20 text-indigo-300 font-bold tracking-widest text-sm uppercase backdrop-blur-sm",children:[e.jsx(je,{size:16})," Visit Gamehub...Try our other releases..."," ",e.jsx(je,{size:16})]})})})}),e.jsx(Z,{})]});if(!a)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center text-yellow-500 animate-pulse",children:"Harvest approaching..."});if(i&&!s&&!U)return e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white p-4",children:[e.jsx(F,{}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur p-8 rounded-2xl border border-zinc-700 shadow-2xl flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsx(dt,{size:48,className:"text-yellow-500 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Reconnecting..."}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Resuming your session"})]})]})]});if(x==="menu")return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-4 relative overflow-hidden font-sans",children:[e.jsx(F,{}),e.jsx("nav",{className:"absolute top-0 left-0 w-full p-4 z-50",children:e.jsxs("a",{href:"/rawfids-gamehub/",className:`flex items-center gap-2 text-yellow-800 rounded-lg 
			font-bold shadow-md hover:text-yellow-400 transition-colors w-fit animate-pulse`,children:[e.jsx(ct,{}),e.jsx("span",{children:"Back to Gamehub"})]})}),e.jsxs("div",{className:"z-10 text-center mb-10",children:[e.jsxs("div",{className:"flex justify-center gap-2 mb-4 animate-bounce",children:[e.jsx($,{size:48,className:"text-yellow-400"}),e.jsx(ze,{size:48,className:"text-red-500"})]}),e.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-linear-to-r from-yellow-400 via-orange-500 to-red-500 font-serif tracking-tight drop-shadow-xl italic transform -rotate-2",children:"FRUCTOSE FURY"}),e.jsx("p",{className:"text-white/60 tracking-[0.5em] uppercase mt-4 text-sm font-bold",children:"Juicy Risks & Sweet Rewards"})]}),e.jsxs("div",{className:"bg-gray-900/80 backdrop-blur border border-yellow-500/30 p-8 rounded-2xl w-full max-w-md shadow-2xl z-10 animate-in slide-in-from-bottom-10 duration-700 delay-100",children:[U&&e.jsx("div",{className:"bg-red-900/50 text-red-200 p-2 mb-4 rounded text-center text-sm border border-red-800",children:U}),e.jsx("input",{className:"w-full bg-black/50 border border-gray-600 p-3 rounded-xl mb-4 text-white placeholder-gray-500 focus:border-yellow-500 outline-none transition-colors",placeholder:"Farmer Name",value:k,onChange:r=>Le(r.target.value)}),e.jsxs("button",{onClick:Me,disabled:Q,className:"w-full bg-linear-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 p-4 rounded-xl font-bold mb-4 flex items-center justify-center gap-2 shadow-lg transform hover:scale-105 transition-all text-white",children:[e.jsx(Te,{size:20,fill:"currentColor"})," Open New Stand"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsx("input",{className:"w-full sm:flex-1 bg-black/50 border border-gray-600 p-3 rounded-xl text-white placeholder-gray-500 uppercase font-mono tracking-wider focus:border-yellow-500 outline-none",placeholder:"ROOM CODE",value:L,onChange:r=>X(r.target.value.toUpperCase())}),e.jsx("button",{onClick:Fe,disabled:Q,className:"w-full sm:w-auto bg-gray-800 hover:bg-gray-700 border border-gray-600 px-6 py-3 rounded-xl font-bold transition-colors",children:"Join"})]}),e.jsxs("button",{onClick:()=>M(!0),className:"w-full text-center text-gray-400 hover:text-white text-sm flex items-center justify-center gap-2",children:[e.jsx(ve,{size:14})," Farming Guide"]})]}),ae&&e.jsx(Ce,{onClose:()=>M(!1)}),e.jsxs("div",{className:"absolute bottom-4 text-slate-600 text-xs text-center",children:["Inspired by Fruit Fight. A tribute game.",e.jsx("br",{}),"Developed by ",e.jsx("strong",{children:"RAWFID K SHUVO"}),". Visit"," ",e.jsx("a",{href:"/rawfids-gamehub/",rel:"noopener noreferrer",className:"text-yellow-500 underline hover:text-yellow-600",children:"GAMEHUB"})," ","for more games."]})]});if(x==="lobby"&&s){const r=s.hostId===a.uid;return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-6 relative",children:[e.jsx(F,{}),e.jsx(Se,{}),e.jsxs("div",{className:"z-10 w-full max-w-lg bg-gray-900/90 backdrop-blur p-8 rounded-2xl border border-orange-500/30 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl text-yellow-500 font-bold uppercase tracking-wider",children:"Fruit Stand"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-3xl font-mono text-white font-black tracking-widest",children:s.roomId}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:Ge,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:te?e.jsx(_,{size:16,className:"text-green-500"}):e.jsx(xt,{size:16})}),te&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-yellow-500 text-black text-xs font-bold px-2 py-1 rounded shadow-lg animate-fade-in-up whitespace-nowrap",children:"Copied!"})]})]})]}),e.jsx("button",{onClick:()=>A(!0),className:"p-2 bg-red-900/30 hover:bg-red-900/50 rounded-full text-red-400 transition-colors",children:e.jsx(Ne,{size:20})})]}),e.jsxs("div",{className:"space-y-3 mb-8",children:[s.players.map(t=>e.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-3 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${t.ready?"bg-green-500 text-black":"bg-gray-700 text-gray-400"}`,children:e.jsx(P,{size:18})}),e.jsx("span",{className:`font-bold ${t.id===a.uid?"text-yellow-400":"text-gray-300"}`,children:t.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.ready&&e.jsx("span",{className:"text-green-500 text-xs font-bold uppercase tracking-wider",children:"Ready"}),r&&t.id!==a.uid&&e.jsx("button",{onClick:()=>We(t.id),className:"text-gray-600 hover:text-red-500",children:e.jsx(De,{size:16})})]})]},t.id)),s.players.length<2&&e.jsx("div",{className:"text-center text-gray-500 py-4 italic",children:"Waiting for more farmers..."})]}),r?e.jsx("button",{onClick:ue,disabled:s.players.length<2,className:`w-full py-4 rounded-xl font-black text-xl uppercase tracking-widest shadow-lg transition-all ${s.players.length>=2?"bg-green-600 hover:bg-green-500 text-white hover:scale-105":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:"Start Harvest"}):e.jsx("div",{className:"w-full py-4 rounded-xl font-bold text-xl text-center text-gray-500 bg-gray-800/50 border border-gray-700 animate-pulse",children:"Waiting for Host to Start..."})]}),re&&e.jsx(Ie,{onConfirm:fe,onCancel:()=>A(!1),isHost:r}),e.jsx(Z,{})]})}if(x==="game"&&s){const r=s.players.find(o=>o.id===a.uid);if(!r)return e.jsx("div",{className:"text-white text-center mt-20",children:"Syncing game data..."});const t=s.players[s.turnIndex];if(!t)return e.jsx("div",{className:"text-white text-center mt-20",children:"Syncing turn data..."});const l=t.id===a.uid,d=s.players.filter(o=>o.id!==a.uid),m=s.turnPhase==="STEALING",u=O&&O.type==="BUST";let j=[];m&&s.stealTargetIds&&(j=s.stealTargetIds.map(o=>{const b=s.players.find(E=>E.id===o);if(!b)return null;const C=b.table.filter(E=>E===s.drawnCard).length;return{name:b.name,count:C}}).filter(o=>o!==null));let f=null;s.status==="finished"&&(f=[...s.players].sort((o,b)=>T(b.bank)-T(o.bank))[0]);const N=s.players.every(o=>o.id===s.hostId||o.ready);return e.jsxs("div",{className:`h-screen bg-gray-950 text-white flex flex-col relative overflow-hidden transition-colors duration-100 ${u?"animate-shake bg-red-900!":""}`,children:[e.jsx(F,{}),e.jsx(wt,{event:O,currentUserId:a.uid}),ce&&e.jsx(vt,{event:ce,onClose:()=>xe(null)}),ie!==null&&e.jsx(Nt,{data:ie,onClose:()=>de(null)}),e.jsxs("div",{className:"h-14 bg-gray-900/90 border-b border-gray-800 flex items-center justify-between px-4 z-160 sticky top-0 backdrop-blur-md shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"text-yellow-500",size:20}),e.jsx("span",{className:"font-black uppercase tracking-tight text-lg hidden md:block",children:"Fructose Fury"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>M(!0),className:"p-2 text-gray-400 hover:bg-gray-800 rounded-full",children:e.jsx(ve,{size:20})}),e.jsx("button",{onClick:()=>le(!H),className:`p-2 rounded-full ${H?"bg-yellow-900 text-yellow-400":"text-gray-400 hover:bg-gray-800"}`,children:e.jsx(mt,{size:20})}),e.jsx("button",{onClick:()=>A(!0),className:"p-2 text-red-400 hover:bg-red-900/20 rounded-full",children:e.jsx(Ne,{size:20})})]})]}),m&&l&&e.jsx(kt,{targets:j,fruitType:s.drawnCard,onSteal:()=>ge(!0),onPass:()=>ge(!1)}),ae&&e.jsx(Ce,{onClose:()=>M(!1)}),re&&e.jsx(Ie,{onConfirm:fe,onCancel:()=>A(!1),isHost:s.hostId===a.uid,onReturnToLobby:he}),H&&e.jsx("div",{className:"fixed top-16 right-4 w-64 max-h-60 bg-gray-900/95 border border-gray-700 rounded-xl z-155 overflow-y-auto p-2 shadow-2xl",children:e.jsxs("div",{className:"bg-gray-900 w-full max-w-md h-[70vh] rounded-2xl flex flex-col border border-gray-700",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold",children:"Log"}),e.jsx("button",{onClick:()=>le(!1),children:e.jsx(q,{})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[...s.logs].reverse().map((o,b)=>e.jsx("div",{className:`p-2 rounded text-sm border-l-2 ${o.type==="danger"?"border-red-500 bg-red-900/20":o.type==="warning"?"border-orange-500 bg-orange-900/20":"border-gray-500 bg-gray-800"}`,children:o.text},b))})]})}),$e&&e.jsx(St,{players:s.players,destroyedCards:s.destroyedCards||[],onClose:()=>oe(!1)}),s.status==="finished"&&e.jsxs("div",{className:"fixed inset-0 top-14 z-150 bg-black/95 flex flex-col items-center justify-center p-6 text-center animate-in zoom-in overflow-y-auto",children:[e.jsx(ke,{size:80,className:"text-yellow-400 mb-6 animate-bounce"}),e.jsx("h1",{className:"text-5xl font-black text-white mb-2 uppercase",children:"Harvest Complete!"}),e.jsxs("p",{className:"text-2xl text-gray-300 mb-8",children:["The Master Farmer is"," ",e.jsx("span",{className:"text-yellow-400 font-bold",children:f?.name})," ","with ",T(f?.bank||[])," points!"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 max-w-md w-full mb-8",children:s.players.map(o=>e.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl flex justify-between items-center border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[o.ready&&e.jsx(_,{size:16,className:"text-green-500"}),e.jsx("span",{className:o.id===f.id?"text-yellow-400 font-bold":"text-gray-400",children:o.name})]}),e.jsx("span",{className:"font-mono text-xl",children:T(o.bank||[])})]},o.id))}),e.jsxs("div",{className:"flex flex-col gap-4 items-center w-full max-w-md pb-10",children:[s.hostId!==a.uid&&(r.ready?e.jsx("button",{onClick:pe,className:"w-full py-3 bg-gray-700 hover:bg-gray-600 rounded-xl font-bold text-green-400 border border-green-500/50",children:"Waiting for others..."}):e.jsx("button",{onClick:pe,className:"w-full py-3 bg-blue-600 hover:bg-blue-500 rounded-xl font-bold text-white shadow-lg animate-pulse",children:"Ready for Next Game"})),s.hostId===a.uid&&e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx("button",{onClick:he,disabled:!N,className:`flex-1 py-3 rounded-xl font-bold transition-colors ${N?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-800 text-gray-500 cursor-not-allowed border border-gray-700"}`,children:"Lobby"}),e.jsx("button",{onClick:ue,disabled:!N,className:`flex-1 py-3 rounded-xl font-bold text-white shadow-lg transition-all ${N?"bg-green-600 hover:bg-green-500 hover:scale-105":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:"New Harvest"})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col w-full max-w-6xl mx-auto p-2 md:p-4 gap-2 md:gap-4 overflow-hidden",children:[e.jsx("div",{className:"flex-none flex items-stretch gap-3 overflow-x-auto py-4 px-2 no-scrollbar md:flex-wrap md:justify-center min-h-[25vh] md:min-h-0",children:d.map(o=>e.jsxs("div",{className:`bg-gray-900/80 p-3 rounded-xl border-2 flex flex-col gap-2 
                  min-w-[150px] md:min-w-[160px] 
                  transition-all relative group
                  ${s.players[s.turnIndex].id===o.id?"border-yellow-500 shadow-yellow-900/20 shadow-lg scale-[1.02] animate-pulse":"border-gray-800 opacity-90"}`,children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-700 pb-1",children:[e.jsx("span",{className:"font-bold text-sm truncate max-w-[90px]",children:o.name}),e.jsxs("div",{className:"flex items-center gap-1 bg-green-900/30 px-1.5 rounded text-green-400 text-xs",children:[e.jsx(ke,{size:10})," ",T(o.bank||[])]})]}),e.jsx("div",{className:"flex flex-wrap content-start gap-1 flex-1 bg-black/20 rounded p-1 overflow-y-auto min-h-[80px] max-h-[160px]",children:o.table.length===0?e.jsx("span",{className:"text-[10px] text-gray-600 w-full text-center py-4",children:"Safe"}):o.table.map((b,C)=>e.jsx("div",{className:"transform scale-75 origin-top-left -mr-3 -mb-3 hover:z-10 hover:scale-100 transition-transform",children:e.jsx(S,{type:b,size:"sm"})},C))})]},o.id))}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-2 relative min-h-0",children:[e.jsx("div",{className:"absolute top-0 pointer-events-none w-full flex justify-center z-10",children:s.logs.length>0&&e.jsx("div",{className:"bg-black/60 backdrop-blur px-4 py-1 rounded-full text-xs text-yellow-100/80 border border-yellow-500/20 animate-in fade-in slide-in-from-top-2 text-center max-w-[90%] truncate shadow-lg",children:s.logs[s.logs.length-1].text})}),e.jsxs("div",{className:"flex items-center gap-4 md:gap-16 w-full justify-center",children:[e.jsxs("button",{onClick:l&&!m&&s.turnPhase!=="BUSTED"?He:void 0,disabled:!l||m||s.turnPhase==="BUSTED",className:`relative w-24 h-36 md:w-32 md:h-48 bg-gray-800 rounded-xl border-4 border-gray-700 shadow-2xl flex items-center justify-center group transition-all shrink-0 ${l&&!m&&s.turnPhase!=="BUSTED"?"hover:scale-105 cursor-pointer hover:border-yellow-500 ring-4 ring-yellow-500/20":"opacity-80 cursor-default"}`,children:[e.jsx("div",{className:"absolute inset-2 border-2 border-dashed border-gray-600 rounded-lg"}),e.jsxs("div",{className:"text-center z-10",children:[e.jsx("span",{className:"block font-black text-xl md:text-2xl text-gray-500",children:s.deck.length}),e.jsx("span",{className:"text-[10px] uppercase text-gray-600 font-bold",children:"Cards"})]}),l&&!m&&s.turnPhase!=="BUSTED"&&e.jsx("div",{className:"absolute -bottom-4 md:-bottom-8 bg-yellow-500 text-black text-[10px] md:text-xs font-bold px-3 py-1 rounded-full animate-bounce shadow-lg z-20",children:"DRAW!"})]}),e.jsxs("div",{className:"flex items-center justify-start p-2 pl-4 pt-10 pb-4 bg-gray-900/50 rounded-3xl border-2 border-dashed border-gray-700 h-[160px] md:h-[180px] w-full max-w-[500px] overflow-x-auto no-scrollbar relative",children:[s.drawnCard&&s.turnPhase==="BUSTED"&&e.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-3xl animate-in fade-in",children:e.jsxs("div",{className:"transform rotate-12 scale-110 shadow-2xl shadow-red-500/50",children:[e.jsx(S,{type:s.drawnCard,size:"lg"}),e.jsx("div",{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 bg-red-600 text-white font-black px-2 py-1 rounded text-xs uppercase tracking-widest whitespace-nowrap",children:"Fatal Draw"})]})}),t.hand.length===0&&!s.drawnCard?e.jsx("div",{className:"w-full text-center",children:e.jsx("span",{className:"text-gray-600 font-bold uppercase tracking-widest text-xs md:text-sm",children:"Risk Zone Empty"})}):e.jsx("div",{className:"flex -space-x-8 md:-space-x-12 px-2",children:t.hand.map((o,b)=>e.jsx("div",{className:"transform transition-transform duration-200 hover:-translate-y-6 hover:scale-110 z-0 hover:z-30 shrink-0 shadow-xl",children:e.jsx(S,{type:o,animate:b===t.hand.length-1})},b))})]})]}),l&&t.hand.length>0&&!m&&e.jsx("div",{className:"flex gap-4 animate-in slide-in-from-bottom-4 z-20 mt-2",children:e.jsxs("button",{onClick:Oe,className:"bg-green-600 hover:bg-green-500 text-white px-8 md:px-12 py-3 md:py-4 rounded-xl font-black text-lg md:text-xl shadow-lg shadow-green-900/20 transform hover:scale-105 transition-all flex items-center gap-2 border-b-4 border-green-800 active:border-b-0 active:translate-y-1",children:[e.jsx(_,{size:20})," BANK IT!"]})}),!l&&e.jsxs("div",{className:"bg-gray-900/80 px-4 md:px-6 py-2 md:py-3 rounded-full border border-gray-700 text-gray-400 font-mono text-xs md:text-sm animate-pulse text-center mt-2",children:["Waiting for ",t.name,"..."]})]}),e.jsx("div",{className:`flex-none bg-gray-900 p-3 md:p-4 rounded-t-3xl border-t-4 ${l?"border-yellow-500":"border-gray-800"} shadow-[0_-10px_40px_rgba(0,0,0,0.5)] z-20 pb-6 md:pb-4`,children:e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-gray-800 rounded-full border-2 border-gray-600 flex items-center justify-center overflow-hidden",children:[e.jsx(P,{size:24,className:"text-gray-400 md:hidden"}),e.jsx(P,{size:32,className:"text-gray-400 hidden md:block"})]}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-green-600 text-white w-6 h-6 md:w-8 md:h-8 rounded-full flex items-center justify-center font-bold text-xs md:text-base shadow-lg border-2 border-gray-900",children:T(r.bank||[])})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm md:text-xl font-bold text-white",children:[r.name," (You)"]}),e.jsx("div",{className:"text-[10px] md:text-xs text-green-400 font-bold uppercase tracking-wider",children:"Safe Zone"})]})]}),e.jsxs("div",{className:"flex-1 ml-4 md:ml-8 flex flex-col items-end overflow-hidden",children:[e.jsxs("span",{className:"text-[10px] md:text-xs text-orange-400 font-bold uppercase tracking-wider mb-1 md:mb-2 flex items-center gap-1 whitespace-nowrap",children:[e.jsx(Re,{size:12})," Danger Zone (Next Turn)"]}),e.jsx("div",{className:"flex flex-wrap justify-end gap-1 md:gap-2 bg-black/30 p-2 rounded-xl border border-gray-800 w-full md:w-auto min-h-[60px] md:min-h-[70px] max-h-[100px] min-w-[120px] overflow-y-auto",children:r.table.length===0?e.jsx("span",{className:"text-gray-600 text-[10px] md:text-xs self-center mx-auto",children:"Empty"}):r.table.map((o,b)=>e.jsx("div",{className:"transform scale-75 hover:scale-100 transition-transform origin-bottom shrink-0 z-10",children:e.jsx(S,{type:o,size:"sm"})},b))})]})]})})]}),e.jsx(Z,{})]})}return null}st.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(It,{})}));
