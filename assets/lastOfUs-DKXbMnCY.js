import{c as Pe,i as Be,g as Oe,a as De,r as f,e as He,o as oe,d as j,j as e,H as Ue,S as ie,n as qe,s as Fe,h as Ye,p as de,u as S,q as G,t as We,X as Ze,m as Qe}from"./x-vdu6PxPT.js";import{L as ye,S as Ke,P as ve,B as ce,C as W,a as Ve,b as Q,R as je}from"./step-back-ah_wnjl-.js";import{S as P}from"./skull--JE29QMg.js";import{S as J}from"./syringe-DlCp0jrE.js";import{U as Xe}from"./user-hi-jrCL7.js";import{C as xe}from"./crown-DhFWzZA3.js";import{T as Je}from"./trash-2-CC3Hg-Aa.js";import{B as K}from"./biohazard-CQXSp3Bc.js";import{H as et}from"./history-r3RmdCN7.js";import{C as tt}from"./crosshair-S3deBiGz.js";import{P as st}from"./pill-u4hcJgoR.js";import{A as at}from"./arrow-right-88Wq9XMb.js";import{U as nt}from"./users-Dsm1N_Bg.js";import{H as rt}from"./house-BdFnrmDF.js";const lt=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],me=Pe("ban",lt),ue="/rawfids-gamehub/assets/last_cover-zC5AEznQ.png",ot=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyBjIjK53vVJW1y5RaqEFGSFp0ECVDBEe1o",authDomain:"game-hub-ff8aa.firebaseapp.com",projectId:"game-hub-ff8aa",storageBucket:"game-hub-ff8aa.firebasestorage.app",messagingSenderId:"586559578902",appId:"1:586559578902:web:91da4fa4ace038d16aa637"},we=Be(ot),V=Oe(we),w=De(we),N=typeof __app_id<"u"?__app_id:"last-of-us-game",it="22",dt={2:14,3:12,4:11,5:10,6:9},ct=()=>{const r=[];return Object.entries({1:2,3:4,5:6,7:8,9:6,11:4,13:2}).forEach(([m,c])=>{for(let b=0;b<c;b++)r.push({val:parseInt(m),type:"ZOMBIE"})}),Object.entries({2:3,4:5,6:7,8:7,10:5,12:3}).forEach(([m,c])=>{for(let b=0;b<c;b++)r.push({val:parseInt(m),type:"ANTIDOTE"})}),r},xt=r=>{let y=r.length,p;for(;y!==0;)p=Math.floor(Math.random()*y),y--,[r[y],r[p]]=[r[p],r[y]];return r},X=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(P,{size:12,className:"text-red-600"}),e.jsx("span",{className:"text-[10px] font-black tracking-widest text-red-600 uppercase",children:"LAST OF US"})]}),fe=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(P,{size:22,className:"text-red-600"}),e.jsx("span",{className:"text-[20px] font-black tracking-widest text-red-600 uppercase",children:"LAST OF US"})]}),he={1:K,2:st,3:tt,4:P,5:J},Z=({isShaking:r})=>e.jsxs("div",{className:`absolute inset-0 overflow-hidden pointer-events-none z-0 ${r?"animate-shake bg-red-900/20":""}`,children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,var(--tw-gradient-stops))] from-slate-900/40 via-gray-950 to-black"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[...Array(20)].map((y,p)=>{const m=Object.keys(he),c=m[p%m.length],b=he[c];return e.jsx("div",{className:"absolute animate-float text-white/60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${10+Math.random()*20}s`,transform:`scale(${.5+Math.random()})`},children:e.jsx(b,{size:32})},p)})}),e.jsx("style",{children:`
      @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
      }
      .animate-float { animation: float infinite ease-in-out; }
      
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
      .animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
    `})]}),pe=({val:r,type:y,count:p=1,size:m="md",selected:c=!1,onClick:b,disabled:k=!1,faded:B=!1,isBoard:a=!1})=>{const z=y==="ZOMBIE";let _="";a?_=z?"bg-red-900 border-red-600 shadow-red-900/40":"bg-lime-900 border-lime-500 shadow-lime-900/40":_=z?"bg-linear-to-b from-red-800 to-stone-900 border-red-600":"bg-linear-to-b from-lime-700 to-stone-900 border-lime-500";const E=z?"text-red-100":"text-lime-100",O=z?"text-red-500/30":"text-lime-400/30",I=m==="lg"?64:m==="md"?48:24,H=m==="lg"?"w-20 h-32 md:w-28 md:h-40 text-3xl md:text-5xl":m==="sm"?"w-10 h-14 text-xs":"w-16 h-24 md:w-20 md:h-28 text-xl md:text-2xl";return e.jsxs("div",{onClick:k?void 0:b,className:`
        ${H} rounded-xl border-2 flex flex-col items-center justify-center shadow-xl relative overflow-hidden transition-all duration-200 shrink-0
        ${_}
        ${c?"ring-4 ring-yellow-400 -translate-y-4 z-20 scale-110":""}
        ${k?B?"opacity-40 grayscale":"cursor-default":"cursor-pointer hover:scale-105"}
        ${!k&&!c?"hover:-translate-y-1":""}
      `,children:[e.jsx("div",{className:`absolute top-1 left-2 font-black opacity-70 text-[10px] ${E}`,children:z?"ZMB":"ANT"}),e.jsx("div",{className:`font-black ${E} z-10`,children:r}),z?e.jsx("div",{className:`absolute -bottom-2 -right-2 ${O}`,children:e.jsx(P,{size:I,strokeWidth:2.5})}):e.jsx("div",{className:`absolute -bottom-2 -right-2 ${O}`,children:e.jsx(J,{size:I,strokeWidth:2.5})}),p>1&&e.jsxs("div",{className:"absolute top-[-5px] right-[-5px] bg-yellow-500 text-black font-bold rounded-full w-6 h-6 flex items-center justify-center text-xs shadow-md border border-yellow-600 z-20",children:["x",p]})]})},be=({onConfirmLeave:r,onConfirmLobby:y,onCancel:p,isHost:m,inGame:c})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-stone-900 rounded-xl border border-red-900/50 p-6 max-w-sm w-full text-center shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-linear-to-r from-red-600 to-transparent"}),e.jsxs("h3",{className:"text-xl font-bold text-white mb-2 flex items-center justify-center gap-2",children:[e.jsx(K,{className:"text-red-500"})," Abandon Zone?"]}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:m?"WARNING: As Host, leaving will disband the group and return everyone to the menu.":c?"Leaving now will disrupt the survival effort.":"Disconnect from the safe house?"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:p,className:"bg-gray-800 hover:bg-gray-700 text-white py-3 rounded font-bold transition-colors",children:"Stay (Cancel)"}),m&&c&&e.jsxs("button",{onClick:y,className:"py-3 rounded font-bold transition-colors flex items-center justify-center gap-2 bg-blue-700 hover:bg-blue-600 text-white shadow-lg",children:[e.jsx(rt,{size:18})," Return Group to Lobby"]}),e.jsxs("button",{onClick:r,className:"bg-red-700 hover:bg-red-600 text-white py-3 rounded font-bold transition-colors flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(Q,{size:18})," ",m?"Disband Group":"Leave Game"]})]})]})}),ge=({onClose:r})=>e.jsx("div",{className:"fixed inset-0 bg-black/95 z-150 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-stone-900 rounded-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden border border-red-900/30 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-black/50",children:[e.jsxs("h2",{className:"text-2xl font-black text-red-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(P,{})," Survival Guide"]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-800 rounded-full text-gray-400",children:e.jsx(Ze,{})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto space-y-6 text-gray-300 text-left",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-white font-bold text-lg mb-2 flex items-center gap-2",children:[e.jsx(K,{className:"text-green-500",size:20})," The Basics"]}),e.jsxs("p",{className:"text-sm",children:["Get rid of your cards. Be the last survivor. ",e.jsx("br",{})," Odd cards are"," ",e.jsx("strong",{children:"Zombies"}),". Even cards are ",e.jsx("strong",{children:"Antidotes"}),"."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-white font-bold text-lg mb-2 flex items-center gap-2",children:[e.jsx(at,{className:"text-blue-400",size:20})," Placement Rules"]}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[e.jsxs("li",{children:["Cards on the board are arranged in"," ",e.jsx("strong",{children:"Ascending Order"}),"."]}),e.jsxs("li",{children:["You can play cards ",e.jsx("strong",{children:"Lower"})," than the minimum or"," ",e.jsx("strong",{children:"Higher"})," than the maximum."]}),e.jsx("li",{children:"You CANNOT play inside the cage (between min and max)."}),e.jsxs("li",{children:[e.jsx("strong",{children:"The Twist:"})," Two cards of the same type (Zombie/Zombie or Antidote/Antidote) CANNOT sit next to each other horizontally."]}),e.jsx("li",{children:"You CAN stack a matching card on top of an existing one."})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-white font-bold text-lg mb-2 flex items-center gap-2",children:[e.jsx(nt,{className:"text-yellow-400",size:20})," Multi-Play & Quarantine"]}),e.jsxs("p",{className:"text-sm mb-2",children:["If you play on the edges, you must play ",e.jsx("strong",{children:"at least"})," as many cards as are currently on that edge stack. If you stack on top, just follow the same rule."]}),e.jsxs("p",{className:"text-sm border-l-4 border-red-600 pl-3 py-1 bg-red-900/10",children:[e.jsx("strong",{children:"Stuck?"})," Select ",e.jsx("strong",{children:"QUARANTINE"})," mode, then click a card on the board to take it as a penalty. You are out for the round."]})]})]}),e.jsx("div",{className:"p-4 bg-black/50 border-t border-gray-800 text-center",children:e.jsx("button",{onClick:r,className:"bg-red-700 hover:bg-red-600 text-white px-8 py-3 rounded-lg font-bold",children:"Survive"})})]})}),mt=({onStart:r})=>{const[y,p]=f.useState(!1),[m,c]=f.useState(!1),[b,k]=f.useState(!1);return f.useEffect(()=>{const B=localStorage.getItem("lastofus_roomId");p(!!B);const a=new Image;a.src=ue,a.onload=()=>{c(!0),setTimeout(()=>{k(!0)},2e3)}},[]),e.jsxs("div",{className:"fixed inset-0 z-[200] bg-black flex flex-col items-center justify-end pb-20 md:justify-center md:pb-0 font-sans overflow-hidden",children:[!m&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-50 text-red-500/50",children:[e.jsx(ye,{size:48,className:"animate-spin mb-4"}),e.jsx("div",{className:"font-mono text-xs tracking-[0.3em] animate-pulse",children:"INITIALIZING SYSTEM..."})]}),e.jsxs("div",{className:`absolute inset-0 z-0 overflow-hidden transition-opacity duration-1000 ${m?"opacity-100":"opacity-0"}`,children:[e.jsx("div",{className:`w-full h-full bg-cover bg-center transition-transform duration-[2000ms] ease-out ${m?"scale-100":"scale-130"}`,style:{backgroundImage:`url(${ue})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/40"})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center gap-8 animate-in fade-in slide-in-from-bottom-10 duration-1000",children:e.jsx("div",{className:`transform transition-all duration-1000 ease-out ${b?"translate-y-0 opacity-100":"translate-y-32 opacity-0"}`,children:e.jsxs("button",{onClick:r,className:"group relative px-12 py-5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/50 hover:border-red-400 text-red-300 font-black text-2xl tracking-widest rounded-none transform transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(34,211,238,0.4)] backdrop-blur-md overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-red-400/10 to-transparent translate-y-[-100%] animate-[scan_2s_infinite_linear]"}),e.jsx("span",{className:"relative z-10 flex items-center gap-3 animate-pulse",children:y?e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"animate-spin-slow"})," RESUME"]}):e.jsxs(e.Fragment,{children:[e.jsx(ve,{})," PLAY"]})})]})})}),e.jsxs("div",{className:"absolute bottom-4 text-slate-600 text-xs text-center",children:["Inspired by I'm Out. A tribute game.",e.jsx("br",{}),"Developed by ",e.jsx("strong",{children:"RAWFID K SHUVO"}),"."]}),e.jsx("style",{children:`
        @keyframes scan {
          0% { transform: translateY(-100%); }
          100% { transform: translateY(200%); }
        }
      `})]})};function ut(){const[r,y]=f.useState(null),[p,m]=f.useState("splash"),[c,b]=f.useState(""),[k,B]=f.useState(""),[a,z]=f.useState(null),[_,E]=f.useState(""),[O,I]=f.useState(!1),[H,U]=f.useState(!1),[q,Ne]=f.useState(!1),[ee,L]=f.useState(!1),[C,D]=f.useState([]),[F,Y]=f.useState(!1),[ke,te]=f.useState(!1),[se,ae]=f.useState(!1),[$,Ie]=f.useState(()=>localStorage.getItem("gameHub_playerName")||"");f.useEffect(()=>{$&&localStorage.setItem("gameHub_playerName",$)},[$]);const A=t=>{E(t),setTimeout(()=>E(""),3e3)};f.useEffect(()=>{(async()=>typeof __initial_auth_token<"u"&&__initial_auth_token?await qe(V,__initial_auth_token):await Fe(V))(),He(V,y)},[]);const Ce=()=>{const t=localStorage.getItem("lastofus_roomId");t&&(I(!0),b(t)),m("menu")};f.useEffect(()=>{const t=oe(j(w,"game_hub_settings","config"),s=>{s.exists()&&s.data()[it]?.maintenance?te(!0):te(!1)});return()=>t()},[]),f.useEffect(()=>{if(!c||!r)return;const t=oe(j(w,"artifacts",N,"public","data","rooms",c),s=>{if(s.exists()){const l=s.data();if(l.players&&!l.players.find(i=>i.id===r.uid)){b(""),m("menu"),localStorage.removeItem("lastofus_roomId"),A("You have been kicked from the safe house.");return}z(l),l.status==="playing"||l.status==="finished"?m("game"):l.status==="lobby"&&m("lobby"),l.turnIndex!==void 0&&l.players&&l.players[l.turnIndex]&&r&&(l.players[l.turnIndex].id===r.uid||Y(!1))}else b(""),m("menu"),localStorage.removeItem("lastofus_roomId"),A("Safe house compromised (Room closed).")});return()=>t()},[c,r]);const Se=(t,s)=>{if(t.length===0)return{valid:!1,msg:"Select cards."};const l=t[0].val,i=t[0].type,u=t.length;if(!t.every(d=>d.val===l))return{valid:!1,msg:"Must play identical cards."};if(s.length===0)return{valid:!0};const x=s[0],n=s[s.length-1],o=s.findIndex(d=>d.val===l);if(o!==-1){if(!(o===0||o===s.length-1))return{valid:!1,msg:"Cannot play inside the cage (even to stack)."};const g=s[o];return u<g.count?{valid:!1,msg:`Must play at least ${g.count} cards to stack on this edge.`}:{valid:!0,action:"STACK",index:o}}return l>x.val&&l<n.val?{valid:!1,msg:"Cannot play inside the cage."}:l<x.val?i===x.type?{valid:!1,msg:`Cannot place ${i} next to ${x.type}.`}:u<x.count?{valid:!1,msg:`Must play at least ${x.count} cards here (matches edge stack).`}:{valid:!0,action:"LEFT"}:l>n.val?i===n.type?{valid:!1,msg:`Cannot place ${i} next to ${n.type}.`}:u<n.count?{valid:!1,msg:`Must play at least ${n.count} cards here (matches edge stack).`}:{valid:!0,action:"RIGHT"}:{valid:!1,msg:"Invalid move."}},ze=async()=>{if(!$)return A("Name required");I(!0);const t="123456789ABCDEFGHIJKLMNPQRSTUVWXYZ";let s="";for(let l=0;l<6;l++)s+=t.charAt(Math.floor(Math.random()*t.length));await Ye(j(w,"artifacts",N,"public","data","rooms",s),{roomId:s,hostId:r.uid,status:"lobby",players:[{id:r.uid,name:$,hand:[],quarantined:!1,ready:!1}],board:[],deck:[],turnIndex:0,activeRoundPlayers:[],logs:[],winner:null}),localStorage.setItem("lastofus_roomId",s),b(s),I(!1)},_e=async()=>{if(!k||!$)return A("Details required");I(!0);const t=j(w,"artifacts",N,"public","data","rooms",k),s=await de(t);if(!s.exists()){A("Room not found"),I(!1);return}const l=s.data();if(l.status!=="lobby"){A("Game in progress"),I(!1);return}if(l.players.length>=6){A("Room full"),I(!1);return}l.players.find(i=>i.id===r.uid)||await S(t,{players:G({id:r.uid,name:$,hand:[],quarantined:!1,ready:!1})}),localStorage.setItem("lastofus_roomId",k),b(k),I(!1)},$e=async t=>{if(a.hostId!==r.uid)return;const s=a.players.filter(l=>l.id!==t);await S(j(w,"artifacts",N,"public","data","rooms",c),{players:s})},Ae=()=>{const t=a.roomId,s=()=>{ae(!0),setTimeout(()=>ae(!1),2e3),triggerFeedback&&triggerFeedback("neutral","COPIED!","",W)};try{navigator.clipboard.writeText(t),s()}catch{const i=document.createElement("textarea");i.value=t,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),s()}},ne=async()=>{if(a.hostId!==r.uid)return;const t=a.players.length,s=xt(ct()),l=dt[t]||10,i=a.players.map(n=>{const o=s.splice(0,l).sort((d,g)=>d.val-g.val);return{...n,hand:o,quarantined:!1,ready:!1}}),u=i.map(n=>n.id),x=Math.floor(Math.random()*i.length);await S(j(w,"artifacts",N,"public","data","rooms",c),{status:"playing",players:i,deck:s,board:[],activeRoundPlayers:u,turnIndex:x,logs:[{text:"Survival begins. Good luck.",type:"neutral"}]})},Re=async()=>{a.hostId===r.uid&&await ne()},re=async()=>{if(a.hostId!==r.uid)return;const t=a.players.map(s=>({...s,hand:[],quarantined:!1,ready:!1}));await S(j(w,"artifacts",N,"public","data","rooms",c),{status:"lobby",players:t,board:[],logs:[],activeRoundPlayers:[]}),L(!1)},Te=async()=>{if(!c||!r)return;const t=a.players.map(s=>s.id===r.uid?{...s,ready:!s.ready}:s);await S(j(w,"artifacts",N,"public","data","rooms",c),{players:t})},Ee=async()=>{const t=a.players.findIndex(R=>R.id===r.uid),s=a.players[t],l=C.map(R=>s.hand[R]),i=Se(l,a.board);if(!i.valid){A(i.msg);return}const u=[...a.board],x=l[0].val,n=l[0].type,o=l.length;i.action==="STACK"?u[i.index].count+=o:i.action==="LEFT"?u.unshift({val:x,type:n,count:o}):i.action==="RIGHT"?u.push({val:x,type:n,count:o}):u.push({val:x,type:n,count:o});const d=[...a.players],g=[];let h=0;for(let R of s.hand)R.val===x&&h<o?h++:g.push(R);if(d[t].hand=g,g.length===0){await S(j(w,"artifacts",N,"public","data","rooms",c),{players:d,board:u,status:"finished",winner:s,logs:G({text:`${s.name} survived! Game Over.`,type:"success"})}),D([]);return}let v=(a.turnIndex+1)%d.length,M=0;for(;(!a.activeRoundPlayers.includes(d[v].id)||d[v].quarantined)&&(v=(v+1)%d.length,M++,!(M>d.length)););await S(j(w,"artifacts",N,"public","data","rooms",c),{players:d,board:u,turnIndex:v,logs:G({text:`${s.name} played ${o}x ${x}.`,type:"neutral"})}),D([])},Le=()=>{Y(!0)},Me=async t=>{if(!F)return;const s=a.players.findIndex(h=>h.id===r.uid),l=a.players[s],i=[...a.board];if(i.length===0)return;const u=i[t],x={val:u.val,type:u.type};u.count>1?i[t].count-=1:i.splice(t,1);const n=[...l.hand,x].sort((h,v)=>h.val-v.val),o=[...a.players];o[s].hand=n,o[s].quarantined=!0;const d=a.activeRoundPlayers.filter(h=>h!==r.uid),g=[{text:`${l.name} quarantined and took ${x.val}.`,type:"danger"}];if(d.length===1){const h=d[0],v=o.find(T=>T.id===h);g.push({text:`${v.name} won the round! Board cleared.`,type:"success"});const M=o.map(T=>({...T,quarantined:!1})),R=M.findIndex(T=>T.id===h);await S(j(w,"artifacts",N,"public","data","rooms",c),{players:M,board:[],activeRoundPlayers:M.map(T=>T.id),turnIndex:R,logs:G(...g)})}else{let h=(a.turnIndex+1)%o.length;for(;!d.includes(o[h].id)||o[h].quarantined;)h=(h+1)%o.length;await S(j(w,"artifacts",N,"public","data","rooms",c),{players:o,board:i,activeRoundPlayers:d,turnIndex:h,logs:G(...g)})}Y(!1),E("")},le=async()=>{if(!(!c||!r)){try{const t=j(w,"artifacts",N,"public","data","rooms",c),s=await de(t);if(s.exists()){const l=s.data();if(l.hostId===r.uid)await We(t);else{const u=l.players.filter(d=>d.id!==r.uid);let x=l.status,n=l.winner;l.status==="playing"&&u.length<2&&(x="finished",u.length>0&&(n=u[0]));const o={players:u,status:x,logs:G({text:`${$} fled.`,type:"danger"})};n&&(o.winner=n),await S(t,o)}}}catch(t){console.error("Error leaving room:",t)}localStorage.removeItem("lastofus_roomId"),b(""),m("menu"),z(null),L(!1)}},Ge=(t,s)=>{if(C.includes(s))D(C.filter(l=>l!==s));else{if(C.length>0){const l=C[0];if(a.players.find(x=>x.id===r.uid).hand[l].val!==t.val){D([s]);return}}D([...C,s])}};if(ke)return e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white p-4 text-center",children:[e.jsx(fe,{}),e.jsxs("div",{className:"bg-orange-500/10 p-8 rounded-2xl border border-orange-500/30",children:[e.jsx(Ue,{size:64,className:"text-orange-500 mx-auto mb-4 animate-bounce"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Under Maintenance"}),e.jsx("p",{className:"text-gray-400",children:"Zombies are lurking around. Wait for the sunlight to scare them away."})]}),e.jsx("div",{className:"h-8"}),e.jsx("a",{href:"/rawfids-gamehub/",children:e.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:e.jsx("div",{className:"text-center pb-12 animate-pulse",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-4 bg-slate-900/50 rounded-full border border-indigo-500/20 text-indigo-300 font-bold tracking-widest text-sm uppercase backdrop-blur-sm",children:[e.jsx(ie,{size:16})," Visit Gamehub...Try our other releases..."," ",e.jsx(ie,{size:16})]})})})}),e.jsx(X,{})]});if(!r)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center text-red-500 animate-pulse",children:"Vital boost incoming..."});if(c&&!a&&!_)return e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white p-4",children:[e.jsx(Z,{}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur p-8 rounded-2xl border border-zinc-700 shadow-2xl flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsx(ye,{size:48,className:"text-red-500 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Reconnecting..."}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Resuming your session"})]})]})]});if(p==="splash")return e.jsx(mt,{onStart:Ce});if(p==="menu")return e.jsxs("div",{className:"min-h-screen bg-stone-950 text-white flex flex-col items-center justify-center p-4 relative overflow-hidden font-sans",children:[e.jsx(Z,{}),e.jsx("nav",{className:"absolute top-0 left-0 w-full p-4 z-50",children:e.jsxs("a",{href:"/rawfids-gamehub/",className:`flex items-center gap-2 text-red-800 rounded-lg 
			font-bold shadow-md hover:text-red-400 transition-colors w-fit animate-pulse`,children:[e.jsx(Ke,{}),e.jsx("span",{children:"Back to Gamehub"})]})}),e.jsxs("div",{className:"z-10 text-center mb-10",children:[e.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[e.jsx(P,{size:50,className:"text-red-600 animate-bounce"}),e.jsx(J,{size:50,className:"text-lime-500 animate-bounce delay-75"})]}),e.jsx("h1",{className:"text-4xl md:text-7xl font-black text-transparent bg-clip-text bg-linear-to-r from-red-500 to-stone-500 uppercase tracking-tighter",children:"Last of Us"}),e.jsx("p",{className:"text-stone-500 tracking-[0.5em] uppercase mt-2 font-bold text-xs md:text-sm",children:"Survive the Horde"})]}),e.jsxs("div",{className:"bg-stone-900/80 backdrop-blur border border-red-900/30 p-6 md:p-8 rounded-2xl w-full max-w-md shadow-2xl z-10 mx-4",children:[_&&e.jsx("div",{className:"bg-red-900/50 text-red-200 p-2 mb-4 rounded text-center text-sm border border-red-800",children:_}),e.jsx("input",{className:"w-full bg-black/50 border border-stone-700 p-3 rounded-xl mb-4 text-white focus:border-red-500 outline-none text-sm",placeholder:"Survivor Name",value:$,onChange:t=>Ie(t.target.value)}),e.jsxs("button",{onClick:ze,disabled:O,className:"w-full bg-red-800 hover:bg-red-700 p-4 rounded-xl font-bold mb-4 flex items-center justify-center gap-2 transition-all shadow-lg text-sm md:text-base",children:[e.jsx(ve,{size:20})," New Survival Zone"]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{className:"flex-1 bg-black/50 border border-stone-700 p-3 rounded-xl text-white focus:border-red-500 outline-none uppercase text-sm",placeholder:"CODE",value:k,onChange:t=>B(t.target.value.toUpperCase())}),e.jsx("button",{onClick:_e,disabled:O,className:"bg-stone-700 hover:bg-stone-600 px-6 rounded-xl font-bold transition-all text-sm",children:"Join"})]}),e.jsxs("button",{onClick:()=>U(!0),className:"w-full text-center text-stone-500 hover:text-stone-300 text-sm flex items-center justify-center gap-2",children:[e.jsx(ce,{size:14})," Survival Guide"]})]}),H&&e.jsx(ge,{onClose:()=>U(!1)})]});if(p==="lobby"&&a){const t=a.hostId===r.uid;return e.jsxs("div",{className:"min-h-screen bg-stone-950 text-white flex flex-col items-center justify-center p-6 relative",children:[e.jsx(Z,{}),e.jsx(fe,{}),ee&&e.jsx(be,{onConfirmLeave:le,onConfirmLobby:null,onCancel:()=>L(!1),isHost:t,inGame:!1}),e.jsxs("div",{className:"z-10 w-full max-w-lg bg-stone-900/90 backdrop-blur p-8 rounded-2xl border border-red-900/30 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-stone-800",children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl text-red-600 font-bold uppercase",children:"Safe Zone"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-mono text-white font-black",children:a.roomId}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:Ae,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:se?e.jsx(W,{size:16,className:"text-green-500"}):e.jsx(Ve,{size:16})}),se&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-red-500 text-black text-xs font-bold px-2 py-1 rounded shadow-lg animate-fade-in-up whitespace-nowrap",children:"Copied!"})]})]})]})}),e.jsx("button",{onClick:()=>L(!0),className:"p-2 bg-red-900/30 text-red-400 rounded-full hover:bg-red-900/50",children:e.jsx(Q,{size:20})})]}),e.jsxs("div",{className:"space-y-3 mb-8",children:[a.players.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-3 rounded-xl border border-stone-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-stone-800",children:e.jsx(Xe,{size:18,className:"text-stone-400"})}),e.jsx("span",{className:`font-bold ${s.id===r.uid?"text-red-500":"text-stone-400"}`,children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.id===a.hostId&&e.jsx(xe,{size:16,className:"text-yellow-500"}),t&&s.id!==r.uid&&e.jsx("button",{onClick:()=>$e(s.id),className:"text-stone-600 hover:text-red-500 p-1 transition-colors",title:"Kick Player",children:e.jsx(Je,{size:18})})]})]},s.id)),a.players.length<2&&e.jsx("div",{className:"text-center text-stone-600 py-4 italic",children:"Need at least 2 survivors..."})]}),t?e.jsx("button",{onClick:ne,disabled:a.players.length<2,className:"w-full py-4 rounded-xl font-black text-xl uppercase tracking-widest bg-red-700 hover:bg-red-600 text-white shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Start Survival"}):e.jsx("div",{className:"w-full py-4 rounded-xl font-bold text-center text-stone-500 bg-stone-800/50 border border-stone-700 animate-pulse",children:"Waiting for Host..."})]}),e.jsx(X,{})]})}if(p==="game"&&a){const t=a.players.find(n=>n.id===r.uid);if(!t)return e.jsx("div",{className:"min-h-screen bg-stone-950 flex items-center justify-center text-white",children:"Loading..."});const l=a.players[a.turnIndex]?.id===r.uid,i=a.players.filter(n=>n.id!==r.uid),u=a.logs.slice(-2).reverse(),x=a.players.filter(n=>n.id!==a.hostId).every(n=>n.ready);return e.jsxs("div",{className:"h-screen bg-stone-950 text-white flex flex-col relative overflow-hidden font-sans",children:[e.jsx(Z,{}),ee&&e.jsx(be,{onConfirmLeave:le,onConfirmLobby:re,onCancel:()=>L(!1),isHost:a.hostId===r.uid,inGame:!0}),H&&e.jsx(ge,{onClose:()=>U(!1)}),e.jsxs("div",{className:"h-14 bg-stone-900/90 border-b border-stone-800 flex items-center justify-between px-4 z-160 sticky top-0 backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"text-red-600",size:24}),e.jsx("span",{className:"font-black uppercase hidden md:block",children:"Last of Us"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>U(!0),className:"p-2 text-stone-400 hover:bg-stone-800 rounded-full",children:e.jsx(ce,{size:20})}),e.jsx("button",{onClick:()=>Ne(!q),className:`p-2 rounded-full ${q?"bg-red-900/50 text-red-200":"text-stone-400 hover:bg-stone-800"}`,children:e.jsx(et,{size:20})}),e.jsx("button",{onClick:()=>L(!0),className:"p-2 text-red-400 hover:bg-red-900/20 rounded-full",children:e.jsx(Q,{size:20})})]})]}),q&&e.jsx("div",{className:"fixed top-16 right-4 z-155 bg-stone-900/95 border border-stone-700 p-2 rounded-xl max-h-60 overflow-y-auto w-64 shadow-2xl",children:[...a.logs].reverse().map((n,o)=>e.jsx("div",{className:`text-xs p-2 mb-1 rounded border-l-2 ${n.type==="danger"?"bg-red-900/20 border-red-500 text-red-200":"bg-stone-800 border-stone-600 text-gray-400"}`,children:n.text},o))}),a.status==="finished"&&e.jsxs("div",{className:"fixed inset-0 top-14 z-150 bg-black/95 flex flex-col items-center justify-center p-6 text-center animate-in zoom-in",children:[e.jsx(xe,{size:80,className:"text-yellow-500 mb-6 animate-bounce"}),e.jsx("h1",{className:"text-5xl font-black text-white mb-4",children:"Survivor Found!"}),e.jsxs("p",{className:"text-2xl text-stone-300 mb-8",children:[a.winner?a.winner.name:"Unknown Survivor"," ","cleared their hand!"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 max-w-md w-full mb-8",children:a.players.map(n=>e.jsx("div",{className:"bg-stone-800 p-4 rounded-xl flex justify-between items-center border border-stone-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[n.ready&&e.jsx(W,{size:16,className:"text-green-500"}),e.jsx("span",{className:n.id===a.winner?.id?"text-yellow-400 font-bold":"text-gray-400",children:n.name})]})},n.id))}),e.jsx("div",{className:"flex flex-col gap-4 items-center w-full max-w-md",children:a.hostId!==r.uid?t.ready?e.jsxs("div",{className:"w-full py-3 bg-stone-800 rounded-xl font-bold text-green-400 border border-green-500/50 flex items-center justify-center gap-2",children:[e.jsx(W,{size:20})," Waiting for host..."]}):e.jsx("button",{onClick:Te,className:"w-full py-3 bg-blue-600 hover:bg-blue-500 rounded-xl font-bold text-white shadow-lg animate-pulse transition-all hover:scale-105",children:"Ready for Next Game"}):e.jsxs("div",{className:"flex flex-col w-full gap-3",children:[e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsxs("button",{onClick:re,disabled:!x,className:`flex-1 py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${x?"bg-stone-700 hover:bg-stone-600 text-white hover:scale-105":"bg-stone-800 text-stone-500 cursor-not-allowed border border-stone-700"}`,children:[e.jsx(Q,{size:18})," Lobby"]}),e.jsxs("button",{onClick:Re,disabled:!x,className:`flex-1 py-3 rounded-xl font-bold text-white shadow-lg transition-all flex items-center justify-center gap-2 ${x?"bg-red-700 hover:bg-red-600 hover:scale-105":"bg-stone-800 text-stone-500 cursor-not-allowed border border-stone-700"}`,children:[e.jsx(je,{size:18})," Restart"]})]}),!x&&e.jsx("p",{className:"text-stone-500 text-sm animate-pulse",children:"Waiting for survivors to report in..."})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col w-full max-w-6xl mx-auto p-2 gap-2 overflow-hidden relative",children:[e.jsx("div",{className:"flex-none h-24 md:h-28 flex items-start justify-center gap-2 overflow-x-auto no-scrollbar px-2 py-2",children:i.map(n=>e.jsxs("div",{className:`flex flex-col items-center min-w-[80px] md:min-w-[100px] p-2 rounded-xl border ${n.quarantined?"border-red-900 bg-red-900/20 opacity-50":"border-stone-700 bg-stone-900/50"} ${a.players[a.turnIndex]?.id===n.id?"ring-2 ring-yellow-500 animate-pulse":""}`,children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.quarantined&&e.jsx(me,{size:12,className:"text-red-500"}),e.jsx("span",{className:"text-xs font-bold truncate max-w-[60px] md:max-w-[70px]",children:n.name})]}),e.jsx("div",{className:"flex gap-1 overflow-hidden h-8 md:h-12 w-full justify-center",children:n.hand.length>0?e.jsx("div",{className:"flex -space-x-2",children:n.hand.map((o,d)=>e.jsx("div",{className:"w-4 md:w-6 h-6 md:h-8 bg-stone-700 rounded border border-stone-600 shadow-sm"},d))}):e.jsx("span",{className:"text-[10px] text-green-500",children:"Safe"})}),e.jsxs("span",{className:"text-[10px] text-stone-500",children:[n.hand.length," Cards"]})]},n.id))}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative min-h-0 bg-stone-900/30 rounded-2xl border border-stone-800/30 mx-2",children:[e.jsxs("div",{className:"absolute top-4 left-0 right-0 flex flex-col items-center pointer-events-none z-10 w-full space-y-2",children:[!q&&u.map((n,o)=>e.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] md:text-xs font-bold shadow-lg backdrop-blur-md border animate-in fade-in zoom-in duration-300 ${n.type==="danger"?"bg-red-900/50 border-red-500 text-red-100":"bg-stone-800/50 border-stone-600 text-stone-300"}`,children:n.text},o)),_&&e.jsx("div",{className:"px-6 py-2 rounded-full text-sm font-bold bg-red-600 text-white shadow-xl animate-bounce whitespace-nowrap border-4 border-red-800",children:_})]}),a.board.length===0?e.jsx("div",{className:"text-stone-600 text-sm font-bold border-2 border-dashed border-stone-800 rounded-xl p-8",children:"Board Empty"}):e.jsx("div",{className:"flex items-center gap-1 md:gap-2 overflow-x-auto p-4 w-full justify-start md:justify-center no-scrollbar h-full",children:a.board.map((n,o)=>e.jsx("div",{className:"transform hover:scale-105 transition-transform shrink-0",children:e.jsx(pe,{val:n.val,type:n.type,count:n.count,size:"lg",isBoard:!0,disabled:!F,selected:F,onClick:()=>Me(o)})},o))}),l&&!t.quarantined&&e.jsx("div",{className:"absolute bottom-4 flex gap-4 z-20",children:F?e.jsxs("div",{className:"flex flex-col items-center gap-2 animate-in slide-in-from-bottom-2",children:[e.jsx("div",{className:"bg-red-900/80 px-4 py-2 rounded text-red-200 text-sm font-bold border border-red-500 shadow-xl",children:"Tap a card to take penalty"}),e.jsx("button",{onClick:()=>Y(!1),className:"px-6 py-2 rounded-xl font-bold bg-gray-700 hover:bg-gray-600 text-gray-200 shadow-lg",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Ee,disabled:C.length===0,className:`px-6 md:px-8 py-3 rounded-xl font-black text-lg md:text-xl shadow-xl flex items-center gap-2 transition-all ${C.length>0?"bg-yellow-500 hover:bg-yellow-400 text-black hover:scale-105":"bg-stone-800 text-stone-500 cursor-not-allowed"}`,children:["PLAY"," ",C.length>0&&`(${C.length})`]}),e.jsxs("button",{onClick:Le,className:"px-4 md:px-6 py-3 rounded-xl font-bold bg-red-900/50 hover:bg-red-800 text-red-200 border border-red-800 flex items-center gap-2 transition-all",children:[e.jsx(me,{size:18})," ",e.jsx("span",{className:"inline",children:"QUARANTINE"})]})]})}),l&&t.quarantined&&e.jsx("div",{className:"absolute bottom-4 text-red-500 font-bold animate-pulse bg-black/50 px-4 py-2 rounded-xl",children:"You are Quarantined. Skip turn."}),!l&&e.jsx("div",{className:"absolute bottom-4 px-4 py-2 bg-stone-900 rounded-full text-stone-500 text-sm border border-stone-800 animate-pulse",children:"Waiting for survivors..."})]}),e.jsxs("div",{className:"flex-none bg-stone-900/95 p-2 md:p-4 rounded-t-3xl border-t border-red-900/30 shadow-2xl relative z-30 w-full overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[e.jsxs("span",{className:"text-[10px] md:text-xs font-bold text-stone-400 uppercase tracking-widest",children:["Inventory (",t.hand.length,")"]}),e.jsx("span",{className:"text-[8px] md:text-[10px] font-bold text-stone-500",children:"Match count on edges"})]}),e.jsx("div",{className:"flex gap-2 md:gap-4 overflow-x-auto pb-4 pt-2 px-2 no-scrollbar",children:(()=>{const n=[];let o=[];for(let d=0;d<t.hand.length;d++){const g=t.hand[d];d>0&&t.hand[d-1].val!==g.val&&(n.push(o),o=[]),o.push({card:g,index:d})}return o.length>0&&n.push(o),n.map((d,g)=>e.jsx("div",{className:"flex -space-x-6 md:-space-x-8 hover:space-x-1 transition-all duration-300 pr-4 shrink-0",children:d.map(({card:h,index:v})=>e.jsx("div",{children:e.jsx(pe,{val:h.val,type:h.type,size:"md",selected:C.includes(v),onClick:()=>Ge(h,v)})},v))},g))})()})]})]}),e.jsx(X,{})]})}return null}Qe.createRoot(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(ut,{})}));
