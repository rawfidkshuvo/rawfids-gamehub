import{i as _e,g as Ge,a as Ee,r as m,e as $e,o as ne,d as p,j as e,H as Pe,S as le,n as Ve,s as Le,h as Me,u as I,p as oe,q as U,t as De,X as fe,m as Oe}from"./x-vdu6PxPT.js";import{L as Be,S as He,B as ie,C as L,a as Ue,b as D}from"./step-back-DgPuYW0s.js";import{B as S}from"./biohazard-CQXSp3Bc.js";import{U as F}from"./user-hi-jrCL7.js";import{C as Fe}from"./crown-DhFWzZA3.js";import{T as We}from"./trash-2-CC3Hg-Aa.js";import{S as Ke}from"./settings-BLesBdFP.js";import{H as Ye}from"./history-r3RmdCN7.js";import{T as he}from"./trophy-CV5zFLFQ.js";import{F as be}from"./file-text-D_zMkP4d.js";import{R as pe}from"./rotate-ccw-B8nxxfV1.js";import{P}from"./pill-u4hcJgoR.js";import{S as ye}from"./skull--JE29QMg.js";import{C as qe}from"./crosshair-S3deBiGz.js";import{H as Qe}from"./house-BdFnrmDF.js";import{A as Xe}from"./arrow-right-88Wq9XMb.js";const Je={apiKey:"AIzaSyBjIjK53vVJW1y5RaqEFGSFp0ECVDBEe1o",authDomain:"game-hub-ff8aa.firebaseapp.com",projectId:"game-hub-ff8aa",storageBucket:"game-hub-ff8aa.firebasestorage.app",messagingSenderId:"586559578902",appId:"1:586559578902:web:91da4fa4ace038d16aa637"},je=_e(Je),W=Ge(je),y=Ee(je),v=typeof __app_id<"u"?__app_id:"angry-virus",Ze="21",et=a=>{let d=a.length,c;for(;d!==0;)c=Math.floor(Math.random()*d),d--,[a[d],a[c]]=[a[c],a[d]];return a},z=(a,d)=>{if(!a||a.length===0)return-d;const c=[...a].sort((l,f)=>l-f);let i=0;for(let l=0;l<c.length;l++)(l===0||c[l]!==c[l-1]+1)&&(i+=c[l]);return i-d},Y=a=>{if(!a||a.length===0)return[];const d=[...a].sort((l,f)=>l-f),c=[];let i=[d[0]];for(let l=1;l<d.length;l++)d[l]===d[l-1]+1?i.push(d[l]):(c.push(i),i=[d[l]]);return c.push(i),c},K=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(S,{size:12,className:"text-green-500"}),e.jsx("span",{className:"text-[10px] font-black tracking-widest text-green-500 uppercase",children:"ANGRY VIRUS"})]}),de=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(S,{size:22,className:"text-green-500"}),e.jsx("span",{className:"text-[20px] font-black tracking-widest text-green-500 uppercase",children:"ANGRY VIRUS"})]}),ce={1:S,2:P,3:qe,4:ye},M=({isShaking:a})=>e.jsxs("div",{className:`absolute inset-0 overflow-hidden pointer-events-none z-0 ${a?"animate-shake bg-red-900/20":""}`,children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,var(--tw-gradient-stops))] from-slate-900/40 via-gray-950 to-black"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[...Array(20)].map((d,c)=>{const i=Object.keys(ce),l=i[c%i.length],f=ce[l];return e.jsx("div",{className:"absolute animate-float text-white/60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${10+Math.random()*20}s`,transform:`scale(${.5+Math.random()})`},children:e.jsx(f,{size:32})},c)})}),e.jsx("style",{children:`
      @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
      }
      .animate-float { animation: float infinite ease-in-out; }
      
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
      .animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
    `})]}),xe=({value:a,size:d="md",isNew:c=!1,isSequenceStart:i=!1})=>{const l=d==="lg"?"w-24 h-36 md:w-32 md:h-48 text-3xl md:text-4xl":d==="md"?"w-16 h-24 md:w-20 md:h-28 text-xl md:text-2xl":"w-10 h-14 md:w-12 md:h-16 text-xs md:text-sm";return e.jsxs("div",{className:`${l} bg-gray-200 rounded-xl border-4 ${i?"border-yellow-500 ring-2 ring-yellow-500/50 z-10":"border-green-700"} flex flex-col items-center justify-center shadow-xl relative overflow-hidden transform transition-all ${c?"animate-in zoom-in duration-500":""}`,children:[e.jsx("div",{className:"absolute top-1 left-2 text-green-800 font-black opacity-50 text-[8px] md:text-[10px]",children:"VIRUS"}),e.jsx("div",{className:"font-black text-green-900 z-10",children:a}),e.jsx(S,{className:"absolute -bottom-4 -right-4 text-green-800/10 w-3/4 h-3/4"}),e.jsx("div",{className:"absolute inset-0 bg-linear-to-br from-white/0 to-green-500/10"})]})},me=({count:a,size:d="md"})=>e.jsxs("div",{className:`flex items-center gap-1 bg-orange-600/90 text-white rounded-full font-bold shadow-lg border border-orange-400 ${d==="lg"?"px-3 py-1.5 md:px-4 md:py-2 text-lg md:text-xl":"px-2 py-1 text-[10px] md:text-xs"}`,children:[e.jsx(P,{className:d==="lg"?"w-5 h-5 md:w-6 md:h-6":"w-3 h-3",fill:"currentColor"}),e.jsx("span",{children:a})]}),tt=({players:a,onClose:d})=>{const c=[...a].sort((i,l)=>z(i.cards,i.tokens)-z(l.cards,l.tokens));return e.jsx("div",{className:"fixed inset-0 bg-black/95 z-170 flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-gray-900 w-full max-w-3xl rounded-2xl border border-gray-700 overflow-hidden shadow-2xl flex flex-col max-h-[85vh]",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 bg-gray-950 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black text-white uppercase tracking-wider flex items-center gap-2",children:[e.jsx(be,{className:"text-green-500"})," Viral Report"]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Detailed breakdown of collected specimens"})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-800 rounded-full text-gray-400 hover:text-white transition-colors",children:e.jsx(fe,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-4",children:c.map((i,l)=>{const f=z(i.cards,i.tokens),k=Y(i.cards);return e.jsxs("div",{className:`rounded-xl p-4 border ${l===0?"bg-green-900/10 border-green-500/50":"bg-gray-800/40 border-gray-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-mono text-gray-500 font-bold",children:["#",l+1]}),e.jsx("span",{className:"font-bold text-lg text-white",children:i.name}),l===0&&e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] bg-green-500 text-black font-bold uppercase",children:"Cleanest"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 text-orange-400 text-sm",children:[e.jsx(P,{size:14})," -",i.tokens," pts"]}),e.jsxs("div",{className:"text-xl font-black text-white",children:[f," ",e.jsx("span",{className:"text-xs text-gray-500",children:"PTS"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.length===0?e.jsx("span",{className:"text-xs text-gray-500 italic",children:"No viruses collected (Incredible!)"}):k.map((O,t)=>e.jsx("div",{className:"flex items-center p-1 bg-black/30 rounded border border-gray-700/50",children:O.map(($,G)=>e.jsx("div",{className:`w-8 h-10 flex items-center justify-center text-xs font-bold rounded mr-1 last:mr-0 ${G===0?"bg-gray-200 text-red-900 border-2 border-red-500/50 z-10 scale-110 shadow-lg":"bg-gray-700 text-gray-400 border border-gray-600 opacity-60 scale-90"}`,title:G===0?"Active Virus (Points Counted)":"Contained Virus (Points Ignored)",children:$},$))},t))})]},i.id)})}),e.jsx("div",{className:"p-4 border-t border-gray-800 bg-gray-950 flex justify-end",children:e.jsxs("button",{onClick:d,className:"bg-green-600 hover:bg-green-500 text-white px-8 py-3 rounded-xl font-bold flex items-center gap-2 transition-all hover:scale-105",children:["Proceed to Final Results ",e.jsx(Xe,{size:18})]})})]})})},ue=({onClose:a})=>e.jsx("div",{className:"fixed inset-0 bg-black/95 z-150 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden border border-green-500/30 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-950",children:[e.jsxs("h2",{className:"text-2xl font-black text-green-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(S,{})," Virus Protocol"]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-800 rounded-full text-gray-400",children:e.jsx(fe,{})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto space-y-6 text-gray-300",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-white font-bold text-lg mb-2 flex items-center gap-2",children:[e.jsx(ye,{className:"text-red-500",size:20})," Goal: Stay Healthy"]}),e.jsxs("p",{className:"text-sm",children:["Avoid collecting high-value Virus cards. Your score is the sum of your viruses minus your vitamins."," ",e.jsx("strong",{children:"Lowest score wins!"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-white font-bold text-lg mb-2 flex items-center gap-2",children:[e.jsx(pe,{className:"text-blue-400",size:20})," The Choice"]}),e.jsx("p",{className:"text-sm mb-2",children:"On your turn, a Virus card is revealed. You have two options:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Pass:"})," Place 1 Vitamin token on the card to skip it. Pass play to the left. (Requires tokens!)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Take:"})," Take the card AND all tokens on it. Reveal the next card. It is still your turn."]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-white font-bold text-lg mb-2 flex items-center gap-2",children:[e.jsx(he,{className:"text-yellow-400",size:20})," The Twist"]}),e.jsxs("p",{className:"text-sm",children:["Collected viruses form chains! If you have consecutive numbers (e.g., 21, 22, 23), ",e.jsx("strong",{children:"only the lowest number counts"})," ","towards your score.",e.jsx("br",{}),e.jsx("span",{className:"text-gray-500 text-xs italic",children:"Example: 21, 22, 23 counts as just 21 points."})]})]})]}),e.jsx("div",{className:"p-4 bg-gray-950 border-t border-gray-800 text-center",children:e.jsx("button",{onClick:a,className:"bg-green-600 hover:bg-green-500 text-white px-8 py-3 rounded-lg font-bold",children:"Understood"})})]})}),ge=({onConfirmLeave:a,onConfirmLobby:d,onCancel:c,isHost:i,inGame:l})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6 max-w-sm w-full text-center shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Abandon Quarantine?"}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:i?"WARNING: As Host, leaving will disband the group and return everyone to the menu.":l?"Leaving now will impact the game for others.":"Leaving the lobby will disconnect you."}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:c,className:"bg-gray-700 hover:bg-gray-600 text-white py-3 rounded font-bold transition-colors",children:"Stay (Cancel)"}),i&&l&&e.jsxs("button",{onClick:d,className:"py-3 rounded font-bold transition-colors flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-500 text-white",children:[e.jsx(Qe,{size:18})," Return Crew to Lobby"]}),e.jsxs("button",{onClick:a,className:"bg-red-600 hover:bg-red-500 text-white py-3 rounded font-bold transition-colors flex items-center justify-center gap-2",children:[e.jsx(D,{size:18})," ",i?"Disband Group":"Leave Game"]})]})]})});function st(){const[a,d]=m.useState(null),[c,i]=m.useState("menu"),[l,f]=m.useState(""),[k,O]=m.useState(""),[t,$]=m.useState(null),[G,R]=m.useState(""),[q,A]=m.useState(!1),[Q,V]=m.useState(!1),[B,ve]=m.useState(!1),[X,E]=m.useState(!1),[Ne,J]=m.useState(!1),[Z,ee]=m.useState(!1),[we,T]=m.useState(!1),[N,ke]=m.useState(()=>localStorage.getItem("gameHub_playerName")||"");m.useEffect(()=>{N&&localStorage.setItem("gameHub_playerName",N)},[N]),m.useEffect(()=>{(async()=>typeof __initial_auth_token<"u"&&__initial_auth_token?await Ve(W,__initial_auth_token):await Le(W))(),$e(W,d)},[]),m.useEffect(()=>{const s=localStorage.getItem("angryvirus_roomId");s&&f(s)},[]),m.useEffect(()=>{const s=ne(p(y,"game_hub_settings","config"),r=>{r.exists()&&r.data()[Ze]?.maintenance?J(!0):J(!1)});return()=>s()},[]),m.useEffect(()=>{if(!l||!a)return;const s=ne(p(y,"artifacts",v,"public","data","rooms",l),r=>{if(r.exists()){const o=r.data();if($(o),o.players&&!o.players.find(x=>x.id===a.uid)){f(""),i("menu"),localStorage.removeItem("angryvirus_roomId"),R("You have been removed from the quarantine zone.");return}o.status==="playing"||o.status==="finished"?i("game"):o.status==="lobby"&&i("lobby")}else f(""),i("menu"),localStorage.removeItem("angryvirus_roomId"),R("Quarantine zone lifted (Room closed).")});return()=>s()},[l,a]),m.useEffect(()=>{t?.status==="finished"?T(!0):T(!1)},[t?.status]);const Ce=async()=>{if(!N)return R("Name required");A(!0);const s="123456789ABCDEFGHIJKLMNPQRSTUVWXYZ";let r="";for(let o=0;o<6;o++)r+=s.charAt(Math.floor(Math.random()*s.length));Array.from({length:33},(o,x)=>x+3),await Me(p(y,"artifacts",v,"public","data","rooms",r),{roomId:r,hostId:a.uid,status:"lobby",players:[{id:a.uid,name:N,tokens:0,cards:[],ready:!1}],deck:[],cardsToRemove:5,currentCard:null,tokensOnCard:0,turnIndex:0,logs:[],winnerId:null}),localStorage.setItem("angryvirus_roomId",r),f(r),A(!1)},te=async s=>{t.hostId===a.uid&&(s<5||s>9||await I(p(y,"artifacts",v,"public","data","rooms",l),{cardsToRemove:s}))},Ie=async()=>{if(!k||!N)return R("Code/Name required");A(!0);const s=p(y,"artifacts",v,"public","data","rooms",k),r=await oe(s);if(!r.exists()){R("Room not found"),A(!1);return}const o=r.data();if(o.status!=="lobby"){R("Outbreak already started"),A(!1);return}if(o.players.length>=7){R("Room full"),A(!1);return}o.players.find(x=>x.id===a.uid)||await I(s,{players:U({id:a.uid,name:N,tokens:0,cards:[],ready:!1})}),localStorage.setItem("angryvirus_roomId",k),f(k),A(!1)},se=async()=>{if(!(!l||!a)){try{const s=p(y,"artifacts",v,"public","data","rooms",l),r=await oe(s);if(r.exists()){const o=r.data();if(o.hostId===a.uid)await De(s);else{const j=o.players.findIndex(n=>n.id===a.uid),h=o.players.filter(n=>n.id!==a.uid);let b=o.status,u=o.turnIndex;j<u&&(u=Math.max(0,u-1)),u>=h.length&&(u=0),o.status==="playing"&&h.length<2&&(b="finished"),await I(s,{players:h,status:b,turnIndex:u,logs:U({text:`${N} abandoned the quarantine.`,type:"danger"})})}}}catch(s){console.error("Error leaving room:",s)}localStorage.removeItem("angryvirus_roomId"),f(""),i("menu"),$(null),E(!1),T(!1)}},ze=async s=>{if(t.hostId!==a.uid)return;const r=t.players.filter(o=>o.id!==s);await I(p(y,"artifacts",v,"public","data","rooms",l),{players:r})},Se=()=>{const s=t.roomId,r=()=>{ee(!0),setTimeout(()=>ee(!1),2e3),triggerFeedback&&triggerFeedback("neutral","COPIED!","",L)};try{navigator.clipboard.writeText(s),r()}catch{const x=document.createElement("textarea");x.value=s,document.body.appendChild(x),x.select(),document.execCommand("copy"),document.body.removeChild(x),r()}},ae=async()=>{if(t.hostId!==a.uid)return;const s=t.players.length;if(s<2)return;let r=11;s===6&&(r=9),s===7&&(r=7);let o=et(Array.from({length:33},(u,n)=>n+3));const x=t.cardsToRemove||5;o=o.slice(0,o.length-x);const j=o.pop(),h=t.players.map(u=>({...u,tokens:r,cards:[],ready:!1})),b=Math.floor(Math.random()*s);await I(p(y,"artifacts",v,"public","data","rooms",l),{status:"playing",players:h,deck:o,currentCard:j,tokensOnCard:0,turnIndex:b,logs:[{text:`The Outbreak Begins! (${x} cards removed hiddenly)`,type:"neutral"}]})},re=async s=>{const r=[...t.players],o=t.turnIndex,x=r[o];let j=[...t.deck],h=t.currentCard,b=t.tokensOnCard,u=t.turnIndex,n=[],g="playing",C=null;if(s==="PASS"){if(x.tokens<=0)return;x.tokens-=1,b+=1,u=(u+1)%r.length,n.push({text:`${x.name} passed (-1 Vitamin).`,type:"neutral"})}else if(s==="TAKE")if(x.cards.push(h),x.cards.sort((w,_)=>w-_),x.tokens+=b,n.push({text:`${x.name} took Virus ${h} and ${b} Vitamins!`,type:"warning"}),j.length>0)h=j.pop(),b=0;else{g="finished",h=null,b=0;const w=r.map(_=>({id:_.id,score:z(_.cards,_.tokens)}));w.sort((_,Te)=>_.score-Te.score),C=w[0].id,n.push({text:"All viruses contained. Game Over!",type:"success"})}await I(p(y,"artifacts",v,"public","data","rooms",l),{players:r,deck:j,currentCard:h,tokensOnCard:b,turnIndex:u,status:g,winnerId:C,logs:U(...n)})},H=async()=>{if(t.hostId!==a.uid)return;const s=t.players.map(r=>({...r,cards:[],tokens:0,ready:!1}));await I(p(y,"artifacts",v,"public","data","rooms",l),{status:"lobby",players:s,deck:[],currentCard:null,winnerId:null,logs:[]}),E(!1),T(!1)},Re=async()=>{t.hostId===a.uid&&(await ae(),T(!1))},Ae=async()=>{if(!l||!a)return;const s=t.players.map(r=>r.id===a.uid?{...r,ready:!r.ready}:r);await I(p(y,"artifacts",v,"public","data","rooms",l),{players:s})};if(Ne)return e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white p-4 text-center",children:[e.jsx(de,{}),e.jsxs("div",{className:"bg-orange-500/10 p-8 rounded-2xl border border-orange-500/30",children:[e.jsx(Pe,{size:64,className:"text-orange-500 mx-auto mb-4 animate-bounce"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Under Maintenance"}),e.jsx("p",{className:"text-gray-400",children:"Quarantine in effect. Stay safe until the last traces of virus in eradicated."})]}),e.jsx("div",{className:"h-8"}),e.jsx("a",{href:"/rawfids-gamehub/",children:e.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:e.jsx("div",{className:"text-center pb-12 animate-pulse",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-4 bg-slate-900/50 rounded-full border border-indigo-500/20 text-indigo-300 font-bold tracking-widest text-sm uppercase backdrop-blur-sm",children:[e.jsx(le,{size:16})," Visit Gamehub...Try our other releases..."," ",e.jsx(le,{size:16})]})})})}),e.jsx(K,{})]});if(!a)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center text-green-500 animate-pulse",children:"Spreading infection..."});if(l&&!t&&!G)return e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white p-4",children:[e.jsx(M,{}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur p-8 rounded-2xl border border-zinc-700 shadow-2xl flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsx(Be,{size:48,className:"text-green-500 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Reconnecting..."}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Resuming your session"})]})]})]});if(c==="menu")return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[e.jsx(M,{}),e.jsx("nav",{className:"absolute top-0 left-0 w-full p-4 z-50",children:e.jsxs("a",{href:"/rawfids-gamehub/",className:"flex items-center gap-2 text-green-800 rounded-lg font-bold shadow-md hover:text-green-400 transition-colors w-fit animate-pulse",children:[e.jsx(He,{}),e.jsx("span",{children:"Back to Gamehub"})]})}),e.jsxs("div",{className:"z-10 text-center mb-8 md:mb-10 animate-in fade-in zoom-in duration-700",children:[e.jsx(S,{size:64,className:"text-green-500 mx-auto mb-4 animate-bounce md:w-20 md:h-20"}),e.jsx("h1",{className:"text-4xl md:text-6xl font-black text-transparent bg-clip-text bg-linear-to-br from-green-400 to-lime-600 uppercase tracking-tighter",children:"Angry Virus"}),e.jsx("p",{className:"text-white-400/60 tracking-[0.3em] uppercase mt-2",children:"Infectious Strategy"})]}),e.jsxs("div",{className:"bg-gray-900/80 backdrop-blur border border-green-500/30 p-6 md:p-8 rounded-2xl w-full max-w-md shadow-2xl z-10 mx-4",children:[G&&e.jsx("div",{className:"bg-red-900/50 text-red-200 p-2 mb-4 rounded text-center text-sm border border-red-800",children:G}),e.jsx("input",{className:"w-full bg-black/50 border border-gray-600 p-3 rounded-xl mb-4 text-white focus:border-green-500 outline-none text-sm md:text-base",placeholder:"Survivor Name",value:N,onChange:s=>ke(s.target.value)}),e.jsxs("button",{onClick:Ce,disabled:q,className:"w-full bg-green-700 hover:bg-green-600 p-3 md:p-4 rounded-xl font-bold mb-4 flex items-center justify-center gap-2 transition-all text-sm md:text-base",children:[e.jsx(S,{size:20})," Start Outbreak"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 mb-4",children:[e.jsx("input",{className:"flex-1 bg-black/50 border border-gray-600 p-3 rounded-xl text-white focus:border-green-500 outline-none text-sm md:text-base",placeholder:"ROOM CODE",value:k,onChange:s=>O(s.target.value.toUpperCase())}),e.jsx("button",{onClick:Ie,disabled:q,className:"bg-gray-800 hover:bg-gray-700 border border-gray-600 px-6 py-3 rounded-xl font-bold transition-all text-sm md:text-base",children:"Join"})]}),e.jsxs("button",{onClick:()=>V(!0),className:"w-full text-center text-gray-400 hover:text-white text-xs md:text-sm flex items-center justify-center gap-2 py-2",children:[e.jsx(ie,{size:14})," Survival Guide"]})]}),Q&&e.jsx(ue,{onClose:()=>V(!1)}),e.jsxs("div",{className:"absolute bottom-4 text-slate-600 text-xs text-center",children:["Inspired by No Thanks. A tribute game.",e.jsx("br",{}),"Developed by ",e.jsx("strong",{children:"RAWFID K SHUVO"}),". Visit"," ",e.jsx("a",{href:"/rawfids-gamehub/",rel:"noopener noreferrer",className:"text-green-500 underline hover:text-green-600",children:"GAMEHUB"})," ","for more games."]})]});if(c==="lobby"&&t){const s=t.hostId===a.uid,r=t.cardsToRemove||5;return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-4 md:p-6 relative",children:[e.jsx(M,{}),e.jsx(de,{}),X&&e.jsx(ge,{onConfirmLeave:se,onConfirmLobby:H,onCancel:()=>E(!1),isHost:s,inGame:!1}),e.jsxs("div",{className:"z-10 w-full max-w-lg bg-gray-900/90 backdrop-blur p-6 md:p-8 rounded-2xl border border-green-500/30 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl text-green-500 font-bold uppercase",children:"Quarantine Zone"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-mono text-white font-black",children:t.roomId}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:Se,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:Z?e.jsx(L,{size:16,className:"text-green-500"}):e.jsx(Ue,{size:16})}),Z&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-green-500 text-black text-xs font-bold px-2 py-1 rounded shadow-lg animate-fade-in-up whitespace-nowrap",children:"Copied!"})]})]})]}),e.jsx("button",{onClick:()=>E(!0),className:"p-2 bg-red-900/30 text-red-400 rounded-full hover:bg-red-900/50",children:e.jsx(D,{size:20})})]}),e.jsxs("div",{className:"space-y-3 mb-8",children:[t.players.map(o=>e.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-3 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-gray-800",children:e.jsx(F,{size:18,className:"text-green-400"})}),e.jsx("span",{className:`font-bold ${o.id===a.uid?"text-green-400":"text-gray-300"}`,children:o.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o.id===t.hostId&&e.jsx(Fe,{size:16,className:"text-yellow-500"}),s&&o.id!==a.uid&&e.jsx("button",{onClick:()=>ze(o.id),className:"text-gray-500 hover:text-red-500 p-1 transition-colors",title:"Kick Player",children:e.jsx(We,{size:18})})]})]},o.id)),t.players.length<2&&e.jsx("div",{className:"text-center text-gray-500 py-4 italic text-sm",children:"Waiting for survivors..."})]}),s&&e.jsxs("div",{className:"bg-black/30 p-4 rounded-xl mb-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(Ke,{size:12})," Difficulty: Cards Removed"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:["Randomly remove ",e.jsx("strong",{children:r})," cards"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>te(r-1),disabled:r<=5,className:"w-8 h-8 flex items-center justify-center bg-gray-700 rounded hover:bg-gray-600 disabled:opacity-30 disabled:cursor-not-allowed font-bold",children:"-"}),e.jsx("button",{onClick:()=>te(r+1),disabled:r>=9,className:"w-8 h-8 flex items-center justify-center bg-gray-700 rounded hover:bg-gray-600 disabled:opacity-30 disabled:cursor-not-allowed font-bold",children:"+"})]})]})]}),s?e.jsx("button",{onClick:ae,disabled:t.players.length<2,className:"w-full py-4 rounded-xl font-black text-lg md:text-xl uppercase tracking-widest bg-green-600 hover:bg-green-500 text-white shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Release Virus"}):e.jsx("div",{className:"w-full py-4 rounded-xl font-bold text-center text-gray-500 bg-gray-800/50 border border-gray-700 animate-pulse text-sm md:text-base",children:"Waiting for Host..."})]}),e.jsx(K,{})]})}if(c==="game"&&t){const s=t.players.find(n=>n.id===a.uid);if(!s||!t.players[t.turnIndex])return e.jsx("div",{className:"min-h-screen bg-gray-950 text-white flex items-center justify-center",children:"Loading game state..."});const r=t.players[t.turnIndex].id===a.uid,o=t.players[t.turnIndex],x=t.hostId===a.uid,j=Y(s.cards),h=z(s.cards,s.tokens),b=t.logs?t.logs.slice(-2).reverse():[],u=t.players.filter(n=>n.id!==t.hostId).every(n=>n.ready);return e.jsxs("div",{className:"h-screen bg-gray-950 text-white flex flex-col relative overflow-hidden font-sans",children:[e.jsx(M,{}),X&&e.jsx(ge,{onConfirmLeave:se,onConfirmLobby:H,onCancel:()=>E(!1),isHost:x,inGame:!0}),we&&t.status==="finished"&&e.jsx(tt,{players:t.players,onClose:()=>T(!1)}),e.jsxs("div",{className:"h-14 md:h-16 bg-gray-900/90 border-b border-gray-800 flex items-center justify-between px-4 z-160 sticky top-0 backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"text-green-500 w-5 h-5 md:w-6 md:h-6"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-black uppercase leading-none text-sm md:text-base",children:"Angry Virus"}),e.jsxs("span",{className:"text-[10px] text-gray-500 tracking-wider",children:[t.deck.length," Unrevealed Cards"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>V(!0),className:"p-2 text-gray-400 hover:bg-gray-800 rounded-full",children:e.jsx(ie,{size:18})}),e.jsx("button",{onClick:()=>ve(!B),className:`p-2 rounded-full ${B?"bg-green-900 text-green-400":"text-gray-400 hover:bg-gray-800"}`,children:e.jsx(Ye,{size:18})}),e.jsx("button",{onClick:()=>E(!0),className:"p-2 text-red-400 hover:bg-red-900/20 rounded-full",children:e.jsx(D,{size:18})})]})]}),Q&&e.jsx(ue,{onClose:()=>V(!1)}),B&&e.jsx("div",{className:"fixed top-16 right-4 w-64 max-h-60 bg-gray-900/95 border border-gray-700 rounded-xl z-155 overflow-y-auto p-2 shadow-2xl",children:t.logs.slice().reverse().map((n,g)=>e.jsx("div",{className:`text-xs p-2 mb-1 rounded ${n.type==="warning"?"text-yellow-300 bg-yellow-900/20":n.type==="success"?"text-green-300 bg-green-900/20":"text-gray-400"}`,children:n.text},g))}),t.status==="finished"&&e.jsxs("div",{className:"fixed inset-0 top-14 z-150 bg-black/95 flex flex-col items-center justify-center p-6 text-center animate-in zoom-in",children:[e.jsx(he,{size:80,className:"text-yellow-400 mb-6 animate-bounce"}),e.jsx("h1",{className:"text-5xl font-black text-white mb-2 uppercase",children:"Survival Complete"}),e.jsxs("div",{className:"text-2xl text-gray-300 mb-8",children:["Winner:"," ",e.jsx("span",{className:"text-green-400 font-bold",children:t.players.find(n=>n.id===t.winnerId)?.name})]}),e.jsxs("button",{onClick:()=>T(!0),className:"mb-6 flex items-center gap-2 text-green-400 hover:text-green-300 underline",children:[e.jsx(be,{size:16})," View Detailed Report"]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 w-full max-w-md max-h-[30vh] overflow-y-auto mb-8",children:[...t.players].sort((n,g)=>z(n.cards,n.tokens)-z(g.cards,g.tokens)).map((n,g)=>e.jsxs("div",{className:`flex justify-between items-center p-4 rounded-xl border ${n.id===t.winnerId?"bg-green-900/30 border-green-500":"bg-gray-800 border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-mono text-gray-500",children:["#",g+1]}),e.jsx("span",{className:"font-bold",children:n.name}),n.ready&&e.jsx(L,{size:16,className:"text-green-500"})]}),e.jsxs("div",{className:"font-mono text-xl font-bold",children:[z(n.cards,n.tokens)," pts"]})]},n.id))}),e.jsx("div",{className:"flex flex-col gap-4 items-center w-full max-w-md",children:x?e.jsxs("div",{className:"flex flex-col w-full gap-3",children:[e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsxs("button",{onClick:H,disabled:!u,className:`flex-1 py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${u?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-800 text-gray-500 cursor-not-allowed border border-gray-700"}`,children:[e.jsx(D,{size:18})," Lobby"]}),e.jsxs("button",{onClick:Re,disabled:!u,className:`flex-1 py-3 rounded-xl font-bold text-white shadow-lg transition-all flex items-center justify-center gap-2 ${u?"bg-green-600 hover:bg-green-500 hover:scale-105":"bg-gray-800 text-gray-500 cursor-not-allowed border border-gray-700"}`,children:[e.jsx(pe,{size:18})," New Game"]})]}),!u&&e.jsx("p",{className:"text-gray-500 text-sm animate-pulse",children:"Waiting for survivors to confirm status..."})]}):s.ready?e.jsxs("div",{className:"w-full py-3 bg-gray-800 rounded-xl font-bold text-green-400 border border-green-500/50 flex items-center justify-center gap-2",children:[e.jsx(L,{size:20})," Waiting for host..."]}):e.jsx("button",{onClick:Ae,className:"w-full py-3 bg-blue-600 hover:bg-blue-500 rounded-xl font-bold text-white shadow-lg animate-pulse transition-all hover:scale-105",children:"Ready for Next Game"})})]}),e.jsxs("div",{className:"flex-1 flex flex-col w-full max-w-5xl mx-auto p-4 gap-4 overflow-hidden relative",children:[e.jsx("div",{className:"flex-none h-32 flex items-center gap-3 overflow-x-auto no-scrollbar px-2",children:t.players.filter(n=>n.id!==a.uid).map(n=>{const g=Y(n.cards);return e.jsxs("div",{className:`flex flex-col items-center justify-start min-w-[120px] p-2 rounded-xl border-2 h-full transition-all ${t.players[t.turnIndex].id===n.id?"border-green-500 bg-green-900/20 scale-105":"border-gray-800 bg-gray-900/50 opacity-70"}`,children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1 w-full justify-center",children:[e.jsx(F,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-xs font-bold truncate max-w-[80px]",children:n.name})]}),e.jsx("div",{className:"flex gap-1 overflow-x-auto w-full mb-1 no-scrollbar justify-center",children:g.length>0?g.map((C,w)=>e.jsxs("div",{className:"flex flex-col items-center bg-gray-800/80 rounded px-1 border border-gray-600",children:[e.jsx("span",{className:"text-[10px] font-bold text-green-400",children:C[0]}),C.length>1&&e.jsxs("span",{className:"text-[8px] text-gray-500",children:["+",C.length-1]})]},w)):e.jsx("div",{className:"text-[10px] text-gray-600",children:"No cards"})}),e.jsx("div",{className:"mt-auto flex gap-2 text-xs",children:e.jsxs("div",{className:"flex items-center gap-0.5 text-orange-400",children:[e.jsx(P,{size:10})," ",n.tokens]})})]},n.id)})}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6 relative min-h-0",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 flex flex-col items-center pointer-events-none z-10 space-y-1",children:b.map((n,g)=>e.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] md:text-xs font-bold shadow-lg backdrop-blur-md animate-in fade-in slide-in-from-top-2 border max-w-[90%] text-center truncate ${n.type==="warning"?"bg-yellow-900/60 border-yellow-500/30 text-yellow-100":n.type==="success"?"bg-green-900/60 border-green-500/30 text-green-100":"bg-gray-800/60 border-gray-600/30 text-gray-200"}`,children:n.text},g))}),!r&&e.jsxs("div",{className:"mt-8 bg-gray-900/80 px-4 py-2 rounded-full border border-gray-700 text-gray-400 text-sm animate-pulse",children:["Waiting for ",o.name,"..."]}),e.jsxs("div",{className:`relative group ${r?"mt-8":"mt-0"}`,children:[e.jsx("div",{className:`absolute -inset-4 bg-green-500/20 rounded-full blur-xl ${r?"animate-pulse":"hidden"}`}),t.currentCard!==null?e.jsxs("div",{className:"relative",children:[e.jsx(xe,{value:t.currentCard,size:"lg",isNew:!0}),t.tokensOnCard>0&&e.jsx("div",{className:"absolute -top-4 -right-4 z-20",children:e.jsx(me,{count:t.tokensOnCard,size:"lg"})})]}):e.jsx("div",{className:"w-32 h-48 rounded-xl border-2 border-dashed border-gray-700 flex items-center justify-center text-gray-600",children:"Empty"})]}),r&&t.status==="playing"&&e.jsxs("div",{className:"flex gap-4 z-20 mt-4 w-full justify-center px-4",children:[e.jsxs("button",{onClick:()=>re("PASS"),disabled:s.tokens<=0,className:"flex-1 max-w-[140px] flex flex-col items-center gap-1 px-4 py-3 bg-gray-800 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl border border-gray-600 transition-all active:scale-95",children:[e.jsx("span",{className:"font-bold text-gray-300 text-sm md:text-base",children:"PASS"}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-orange-400 font-bold bg-black/40 px-2 py-0.5 rounded-full",children:["Pay 1 ",e.jsx(P,{size:10})]})]}),e.jsxs("button",{onClick:()=>re("TAKE"),className:"flex-1 max-w-[160px] flex flex-col items-center gap-1 px-4 py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold shadow-lg shadow-green-900/40 hover:scale-105 transition-all active:scale-95",children:[e.jsx("span",{className:"text-sm md:text-base",children:"TAKE IT"}),t.tokensOnCard>0&&e.jsxs("div",{className:"text-[10px] text-green-100 bg-green-700/50 px-2 py-0.5 rounded-full",children:["Gain ",t.tokensOnCard," Tokens"]})]})]})]}),e.jsxs("div",{className:"flex-none bg-gray-900/80 backdrop-blur-md p-4 rounded-t-3xl border-t border-gray-800 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gray-800 p-2 rounded-lg border border-gray-700 hidden md:block",children:e.jsx(F,{size:24,className:"text-green-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs md:text-sm font-bold text-gray-400",children:"Your Score"}),e.jsx("div",{className:"text-2xl md:text-3xl font-black text-white leading-none",children:h})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("div",{className:"text-xs font-bold text-orange-400 uppercase tracking-widest mb-1",children:"Vitamins"}),e.jsx(me,{count:s.tokens,size:"lg"})]})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2 no-scrollbar min-h-[80px] md:min-h-[100px]",children:j.length===0?e.jsx("div",{className:"flex items-center justify-center w-full text-gray-600 text-sm italic",children:"No viruses collected yet..."}):j.map((n,g)=>e.jsx("div",{className:"flex gap-1 p-2 bg-black/20 rounded-xl border border-gray-700/50",children:n.map((C,w)=>e.jsx("div",{className:"transform hover:-translate-y-2 transition-transform",children:e.jsx(xe,{value:C,size:"sm",isSequenceStart:w===0})},w))},g))})]})]}),e.jsx(K,{})]})}return null}Oe.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(st,{})}));
