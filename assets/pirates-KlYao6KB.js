import{c as rt,i as It,g as Rt,a as At,r as b,e as $t,o as Je,d as I,j as e,H as Dt,S as Xe,R as Et,n as zt,s as Pt,h as _t,p as Qe,u as $,t as Mt,q as P,X as nt,f as Ie,m as Gt}from"./x-vdu6PxPT.js";import{L as lt,S as Tt,B as Ze,C as ae,a as Ot,b as Ee,R as ot,P as Lt}from"./step-back-ah_wnjl-.js";import{S as pe}from"./ship-Cm-6kyKK.js";import{U as ze}from"./user-hi-jrCL7.js";import{C as fe}from"./crown-DhFWzZA3.js";import{T as Yt}from"./trash-2-CC3Hg-Aa.js";import{S as Ft}from"./settings-BLesBdFP.js";import{H as Ht}from"./history-r3RmdCN7.js";import{S as U}from"./shield-YRjbg8Vk.js";import{F as Pe}from"./footprints-B3mhdmGG.js";import{C as ge}from"./coins-FTQ8_pUL.js";import{S as F}from"./skull--JE29QMg.js";import{A as Ut}from"./anchor-8bXp3bnj.js";import{B as _e}from"./bomb-Br6wsIsa.js";import{U as Wt}from"./utensils-CuQPaDLA.js";import{S as be}from"./sword-B_tdzrAl.js";import{E as dt}from"./eye-ByZgRM3i.js";import{T as se}from"./trophy-CV5zFLFQ.js";import{T as it}from"./triangle-alert-CO8fZ1I9.js";import{H as ct}from"./house-BdFnrmDF.js";import{I as Bt}from"./info-D-_2aBr4.js";const Kt=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Vt=rt("compass",Kt);const qt=[["path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1uwlt4"}],["path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z",key:"10291m"}],["path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z",key:"1tqoq1"}],["path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1x6lto"}]],Jt=rt("component",qt),et="/rawfids-gamehub/assets/pirate_cover-CzS8noek.png",Xt=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyBjIjK53vVJW1y5RaqEFGSFp0ECVDBEe1o",authDomain:"game-hub-ff8aa.firebaseapp.com",projectId:"game-hub-ff8aa",storageBucket:"game-hub-ff8aa.firebasestorage.app",messagingSenderId:"586559578902",appId:"1:586559578902:web:91da4fa4ace038d16aa637"},mt=It(Xt),Re=Rt(mt),R=At(mt),A=typeof __app_id<"u"?__app_id:"pirates-game",Qt="5",w={THIEF:{name:"Thief",val:0,defaultCount:2,icon:Pe,color:"text-gray-400",bg:"bg-gray-800",desc:"Gain 1 coin if you survive a round."},GUARD:{name:"Guard",val:1,defaultCount:6,icon:U,color:"text-blue-400",bg:"bg-blue-900",desc:"Guess a player's card. If right, they die."},SPY:{name:"Spy",val:2,defaultCount:2,icon:dt,color:"text-emerald-400",bg:"bg-emerald-900",desc:"Look at another player's hand."},SWORDSMAN:{name:"Swordsman",val:3,defaultCount:2,icon:be,color:"text-red-400",bg:"bg-red-900",desc:"Fight another player. Lower card dies."},COOK:{name:"Cook",val:4,defaultCount:2,icon:Wt,color:"text-orange-400",bg:"bg-orange-900",desc:"Immune to effects until your next turn."},CANNONEER:{name:"Cannoneer",val:5,defaultCount:2,icon:_e,color:"text-red-600",bg:"bg-red-950",desc:"Force discard & redraw. Kills Pirates. Gets killed if Captain."},MERCHANT:{name:"Merchant",val:6,defaultCount:2,icon:ge,color:"text-yellow-400",bg:"bg-yellow-900",desc:"Draw 2 extra, keep best of 3."},SAILOR:{name:"Sailor",val:7,defaultCount:1,icon:Ut,color:"text-cyan-400",bg:"bg-cyan-900",desc:"Swap hands with another player."},CAPTAIN:{name:"Captain",val:8,defaultCount:1,icon:fe,color:"text-purple-400",bg:"bg-purple-900",desc:"No action. Must play if holding Cannoneer/Sailor."},PIRATE:{name:"Pirate",val:9,defaultCount:1,icon:F,color:"text-white",bg:"bg-black",desc:"If played, you die. (Suicide)."}},Ae=n=>n>=6?3:n===5?4:n===4?5:6,$e=n=>{let N=n.length,j;for(;N!==0;)j=Math.floor(Math.random()*N),N--,[n[N],n[j]]=[n[j],n[N]];return n},Zt=({type:n,message:N,subtext:j,icon:g})=>e.jsx("div",{className:"fixed inset-0 z-160 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:`
      flex flex-col items-center justify-center p-8 md:p-12 rounded-3xl border-4 shadow-[0_0_50px_rgba(0,0,0,0.8)] 
      transform transition-all animate-in fade-in zoom-in slide-in-from-bottom-10 duration-300
      backdrop-blur-md
      ${n==="success"?"bg-green-900/90 border-green-500 text-green-100":""}
      ${n==="failure"?"bg-red-900/90 border-red-500 text-red-100":""}
      ${n==="neutral"?"bg-blue-900/90 border-blue-500 text-blue-100":""}
    `,children:[g&&e.jsx("div",{className:"mb-4 p-4 bg-black/30 rounded-full border-2 border-white/20",children:e.jsx(g,{size:64,className:"animate-bounce"})}),e.jsx("h2",{className:"text-3xl md:text-5xl font-black uppercase tracking-widest text-center drop-shadow-lg mb-2",children:N}),j&&e.jsx("p",{className:"text-lg md:text-xl font-bold opacity-90 tracking-wide text-center",children:j})]})}),he=({isShaking:n})=>e.jsxs("div",{className:`absolute inset-0 overflow-hidden pointer-events-none z-0 ${n?"animate-shake bg-red-900/20":""}`,children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,var(--tw-gradient-stops))] from-yellow-900/20 via-gray-950 to-black"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[...Array(20)].map((N,j)=>{const g=Object.keys(w),x=w[g[j%g.length]].icon;return e.jsx("div",{className:"absolute animate-float text-white/60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${10+Math.random()*20}s`,transform:`scale(${.5+Math.random()})`},children:e.jsx(x,{size:32})},j)})}),e.jsx("style",{children:`
      @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
      }
      .animate-float { animation: float infinite ease-in-out; }
      
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
      .animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
    `})]}),De=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(pe,{size:12,className:"text-red-500"}),e.jsx("span",{className:"text-[10px] font-black tracking-widest text-red-500 uppercase",children:"PIRATES"})]}),tt=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(pe,{size:22,className:"text-red-500"}),e.jsx("span",{className:"text-[20px] font-black tracking-widest text-red-500 uppercase",children:"PIRATES"})]}),at=({onConfirmLeave:n,onConfirmLobby:N,onCancel:j,isHost:g,inGame:x})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6 max-w-sm w-full text-center shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Abandon Ship?"}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:g?"Leaving will destroy the room for everyone!":x?"Leaving now will end the game for you!":"Leaving the lobby will disconnect you."}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:j,className:"bg-gray-700 hover:bg-gray-600 text-white py-3 rounded font-bold transition-colors",children:"Stay (Cancel)"}),x&&g&&e.jsxs("button",{onClick:N,className:"py-3 rounded font-bold transition-colors flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-500 text-white",children:[e.jsx(ct,{size:18})," Return Crew to Lobby"]}),e.jsxs("button",{onClick:n,className:"bg-red-600 hover:bg-red-500 text-white py-3 rounded font-bold transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ee,{size:18})," ",g?"Destroy Room":"Leave Game"]})]})]})}),ea=({title:n,text:N,onClose:j,type:g="info",card:x=null,compareCard:_=null,labels:k=[]})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-150 flex items-center justify-center p-4 animate-in fade-in",children:e.jsx("div",{className:"bg-gray-800 border-2 border-gray-600 rounded-xl p-6 w-full max-w-sm shadow-2xl relative",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[g==="error"?e.jsx(it,{className:"text-red-500 w-12 h-12"}):g==="spy"?e.jsx(dt,{className:"text-emerald-400 w-12 h-12"}):g==="sword"?e.jsx(be,{className:"text-red-400 w-12 h-12"}):g==="round_end"?e.jsx(se,{className:"text-yellow-400 w-12 h-12 animate-bounce"}):e.jsx(Bt,{className:"text-blue-400 w-12 h-12"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:n}),e.jsx("p",{className:"text-gray-300 text-lg",children:N}),(x||_)&&e.jsxs("div",{className:"flex gap-4 justify-center items-center my-2",children:[x&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-xs text-gray-400 mb-1 font-bold text-yellow-500",children:k[0]||"Target Hand"}),e.jsx(q,{type:x,small:!0})]}),_&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold text-xl text-gray-500",children:e.jsx(Jt,{size:24})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-xs text-gray-400 mb-1 font-bold text-yellow-500",children:k[1]||"Attacker"}),e.jsx(q,{type:_,small:!0})]})]})]}),e.jsx("button",{onClick:j,className:`w-full py-3 rounded-lg font-bold text-white transition-colors ${g==="error"?"bg-red-600 hover:bg-red-500":g==="spy"?"bg-emerald-600 hover:bg-emerald-500":g==="round_end"?"bg-yellow-600 hover:bg-yellow-500":"bg-blue-600 hover:bg-blue-500"}`,children:g==="round_end"?"Continue":"Okay"})]})})}),st=({onClose:n})=>e.jsx("div",{className:"fixed inset-0 bg-black/95 z-170 flex items-center justify-center p-0 md:p-4",children:e.jsxs("div",{className:"bg-gray-900 md:rounded-2xl w-full max-w-5xl h-full md:h-auto md:max-h-[90vh] overflow-hidden border-none md:border border-gray-700 shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-700 flex justify-between items-center bg-gray-800",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-2xl md:text-4xl font-black text-transparent bg-clip-text bg-linear-to-r from-red-400 to-orange-500 uppercase tracking-widest",children:"Pirate's Secret Rules"}),e.jsx("span",{className:"text-gray-400 text-xs md:text-sm font-medium tracking-wide",children:"Deception, Deduction & Discovery"})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-700 rounded-full text-gray-400 hover:text-white transition-colors",children:e.jsx(nt,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-6 md:space-y-10 text-gray-300 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-transparent",children:[e.jsxs("div",{className:"bg-linear-to-r from-red-900/30 to-orange-900/30 p-4 md:p-6 rounded-2xl border border-red-700/30",children:[e.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-white mb-3 flex items-center gap-3",children:[e.jsx(se,{className:"text-yellow-400 fill-current",size:24})," The Objective"]}),e.jsxs("p",{className:"text-sm md:text-lg leading-relaxed mb-4",children:["The high seas are treacherous. Your goal is simple:"," ",e.jsx("strong",{children:"survive"}),". The game is played in multiple rounds. To win a round, you must be the ",e.jsx("strong",{children:"Last Player Standing"})," ","or hold the ",e.jsx("strong",{children:"Highest Value Card"})," when the deck runs out.",e.jsx("br",{}),e.jsx("br",{}),"Survivors earn"," ",e.jsx("span",{className:"text-yellow-400 font-bold",children:"1 Coin"}),". The number of coins needed to win the game depends on the crew size:"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-black/40 border border-yellow-500/20 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"2-3 Players"}),e.jsx("div",{className:"text-xl font-bold text-yellow-400",children:"6 Coins"})]}),e.jsxs("div",{className:"bg-black/40 border border-yellow-500/20 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"4 Players"}),e.jsx("div",{className:"text-xl font-bold text-yellow-400",children:"5 Coins"})]}),e.jsxs("div",{className:"bg-black/40 border border-yellow-500/20 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"5 Players"}),e.jsx("div",{className:"text-xl font-bold text-yellow-400",children:"4 Coins"})]}),e.jsxs("div",{className:"bg-black/40 border border-yellow-500/20 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"6-8 Players"}),e.jsx("div",{className:"text-xl font-bold text-yellow-400",children:"3 Coins"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx(ze,{className:"text-red-400",size:24})," The Crew (Cards)"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-3 md:gap-4",children:Object.values(w).sort((N,j)=>N.val-j.val).map(N=>{const j=N.icon;return e.jsxs("div",{className:"flex items-start gap-3 md:gap-4 bg-gray-800/50 p-3 md:p-4 rounded-xl border border-gray-700 hover:border-gray-500 transition-colors",children:[e.jsx("div",{className:`p-3 md:p-4 rounded-xl ${N.bg} border border-gray-600 shadow-lg shrink-0`,children:e.jsx(j,{className:`${N.color}`,size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center w-full mb-1",children:[e.jsx("h4",{className:"font-bold text-white text-base md:text-lg",children:N.name}),e.jsxs("span",{className:"text-xs bg-black/60 px-2 py-1 rounded text-gray-300 font-mono border border-gray-600",children:["Val: ",N.val]})]}),e.jsx("p",{className:"text-xs md:text-sm text-gray-400 leading-snug",children:N.desc})]})]},N.name)})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx(Vt,{className:"text-orange-400",size:24})," How It Works"]}),e.jsxs("div",{className:"space-y-6 relative pl-4 border-l-2 border-gray-700 ml-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[25px] top-0 bg-gray-800 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold border-2 border-gray-600 shadow-lg",children:"1"}),e.jsxs("div",{className:"pl-6",children:[e.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:"The Draw"}),e.jsxs("p",{className:"text-gray-400 text-sm md:text-base",children:["You start the round with ",e.jsx("strong",{children:"1 card"})," in hand. At the start of your turn, you draw a"," ",e.jsx("strong",{children:"second card"})," from the deck."]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[25px] top-0 bg-gray-800 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold border-2 border-gray-600 shadow-lg",children:"2"}),e.jsxs("div",{className:"pl-6",children:[e.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:"The Play"}),e.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"Choose one of your two cards to play face up. Its ability triggers immediately. The other card remains hidden in your hand."})]})]})]})]})]}),e.jsx("div",{className:"p-4 md:p-6 bg-gray-800 border-t border-gray-700 text-center sticky bottom-0",children:e.jsx("button",{onClick:n,className:"w-full md:w-auto bg-linear-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white px-10 py-3 md:py-4 rounded-xl font-bold text-lg transition-all shadow-xl",children:"Got it, Let's Play!"})})]})}),q=({type:n,onClick:N,disabled:j,highlight:g,small:x,tiny:_})=>{const k=w[n];if(!k)return e.jsx("div",{className:"w-16 h-24 md:w-20 md:h-28 bg-gray-700 rounded border border-gray-600"});if(_)return e.jsx("div",{className:`w-5 h-7 md:w-6 md:h-8 rounded border flex items-center justify-center ${k.bg} border-gray-600 shadow-sm`,title:k.name,children:e.jsx(k.icon,{className:`${k.color} w-3 h-3`})});const K=x?"w-12 h-16 md:w-16 md:h-24 p-0.5 md:p-1":"w-24 h-36 md:w-32 md:h-48 p-2 md:p-3",s=x?"w-5 h-5 md:w-6 md:h-6":"w-10 h-10 md:w-12 md:h-12",re=x?"text-[8px] md:text-[10px]":"text-xs md:text-sm";return e.jsxs("button",{onClick:N,disabled:j,className:`relative rounded-xl border-2 shadow-lg transition-all flex flex-col items-center justify-between
        ${K}
        ${g?"ring-4 ring-yellow-400 scale-105 z-10":"border-gray-700"}
        ${k.bg} ${j?"opacity-50 cursor-not-allowed grayscale":"hover:scale-105 cursor-pointer"}
      `,children:[e.jsxs("div",{className:`font-bold ${re} ${k.type==="PIRATE","text-white"} w-full flex justify-between`,children:[e.jsx("span",{children:k.val}),!x&&e.jsx("span",{children:k.name})]}),e.jsx(k.icon,{className:`${k.color} ${s}`}),!x&&e.jsx("div",{className:"text-[9px] md:text-[10px] text-gray-300 text-center leading-tight bg-black/30 p-1 rounded w-full line-clamp-3 md:line-clamp-none",children:k.desc})]})},ta=({logs:n,onClose:N})=>e.jsx("div",{className:"fixed top-16 right-4 w-64 max-h-60 bg-gray-900/95 border border-gray-700 rounded-xl z-155 overflow-y-auto p-2 shadow-2xl",children:e.jsxs("div",{className:"bg-gray-800 w-full md:max-w-md h-full md:h-[70vh] rounded-none md:rounded-xl flex flex-col border-none md:border border-gray-700",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center bg-gray-800",children:[e.jsx("h3",{className:"text-white font-bold text-lg",children:"Game Log"}),e.jsx("button",{onClick:N,className:"p-2 bg-gray-700 rounded-full",children:e.jsx(nt,{className:"text-gray-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[...n].reverse().map((j,g)=>e.jsx("div",{className:`text-xs md:text-sm p-3 rounded border-l-2 ${j.type==="danger"?"bg-red-900/20 border-red-500 text-red-200":j.type==="success"?"bg-green-900/20 border-green-500 text-green-200":"bg-gray-700/50 border-gray-500 text-gray-300"}`,children:j.text},g))})]})}),aa=({onStart:n})=>{const[N,j]=b.useState(!1),[g,x]=b.useState(!1),[_,k]=b.useState(!1);return b.useEffect(()=>{const K=localStorage.getItem("pirates_room_id");j(!!K);const s=new Image;s.src=et,s.onload=()=>{x(!0),setTimeout(()=>{k(!0)},2e3)}},[]),e.jsxs("div",{className:"fixed inset-0 z-[200] bg-black flex flex-col items-center justify-end pb-20 md:justify-center md:pb-0 font-sans overflow-hidden",children:[!g&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-50 text-red-500/50",children:[e.jsx(lt,{size:48,className:"animate-spin mb-4"}),e.jsx("div",{className:"font-mono text-xs tracking-[0.3em] animate-pulse",children:"INITIALIZING SYSTEM..."})]}),e.jsxs("div",{className:`absolute inset-0 z-0 overflow-hidden transition-opacity duration-1000 ${g?"opacity-100":"opacity-0"}`,children:[e.jsx("div",{className:`w-full h-full bg-cover bg-center transition-transform duration-[2000ms] ease-out ${g?"scale-100":"scale-130"}`,style:{backgroundImage:`url(${et})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/40"})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center gap-8 animate-in fade-in slide-in-from-bottom-10 duration-1000",children:e.jsx("div",{className:`transform transition-all duration-1000 ease-out ${_?"translate-y-0 opacity-100":"translate-y-32 opacity-0"}`,children:e.jsxs("button",{onClick:n,className:"group relative px-12 py-5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/50 hover:border-red-400 text-red-300 font-black text-2xl tracking-widest rounded-none transform transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(34,211,238,0.4)] backdrop-blur-md overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-red-400/10 to-transparent translate-y-[-100%] animate-[scan_2s_infinite_linear]"}),e.jsx("span",{className:"relative z-10 flex items-center gap-3 animate-pulse",children:N?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"animate-spin-slow"})," RESUME"]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{})," PLAY"]})})]})})}),e.jsxs("div",{className:"absolute bottom-4 text-slate-600 text-xs text-center",children:["Inspired by Love Letter. A tribute game.",e.jsx("br",{}),"Developed by ",e.jsx("strong",{children:"RAWFID K SHUVO"}),"."]}),e.jsx("style",{children:`
        @keyframes scan {
          0% { transform: translateY(-100%); }
          100% { transform: translateY(200%); }
        }
      `})]})};function sa(){const[n,N]=b.useState(null),[j,g]=b.useState("splash"),[x,_]=b.useState(""),[k,K]=b.useState(""),[s,re]=b.useState(null),[ye,T]=b.useState(!1),[we,W]=b.useState(""),[Me,ne]=b.useState(!1),[Ge,B]=b.useState(!1),[ut,Te]=b.useState(!1),[Oe,Le]=b.useState(!1),[je,Ye]=b.useState(!1),[J,H]=b.useState(null),[xt,le]=b.useState(""),[Fe,Ne]=b.useState(null),[X,ve]=b.useState(null),[oe,de]=b.useState([]),[O,He]=b.useState(null),[Q,Ue]=b.useState(null),We=b.useRef(null),Be=b.useRef(null),[L,ht]=b.useState(()=>localStorage.getItem("gameHub_playerName")||"");b.useEffect(()=>{L&&localStorage.setItem("gameHub_playerName",L)},[L]),b.useEffect(()=>{(async()=>typeof __initial_auth_token<"u"&&__initial_auth_token?await zt(Re,__initial_auth_token):await Pt(Re))();const a=$t(Re,N);return()=>a()},[]);const ft=()=>{const t=localStorage.getItem("pirates_room_id");t&&(T(!0),_(t)),g("menu")};b.useEffect(()=>{if(!x||!n)return;const t=Je(I(R,"artifacts",A,"public","data","rooms",x),a=>{if(a.exists()){const r=a.data();if(!r.players.some(c=>c.id===n.uid)){_(""),g("menu"),W("The Captain abandoned the ship! (You were disconnected)"),localStorage.removeItem("pirates_room_id"),localStorage.removeItem("pirates_player_name"),T(!1);return}re(r),r.status==="playing"||r.status==="finished"?g("game"):r.status==="lobby"&&g("lobby"),T(!1)}else _(""),g("menu"),W("The ship has sunk! (Room Closed)"),localStorage.removeItem("pirates_room_id"),localStorage.removeItem("pirates_player_name"),T(!1)});return()=>t()},[x,n]),b.useEffect(()=>{!O&&oe.length>0&&(He(oe[0]),de(t=>t.slice(1)))},[O,oe]);const C=(t,a,r="",l=null)=>{Ue({type:t,message:a,subtext:r,icon:l}),setTimeout(()=>Ue(null),2e3)};if(b.useEffect(()=>{if(!(!s||!n)){if(s.lastAction){const t=s.lastAction;t.id!==We.current&&t.targetId===n.uid&&(We.current=t.id,t.type==="CANNONEER"?t.message.includes("Reflected")?C("success","DEFENDED","Captain Killed Attacker!",fe):t.message.includes("Pirate")?C("failure","ELIMINATED","Cannon Hit Pirate!",F):C("failure","UNDER ATTACK","Card Destroyed!",_e):t.type==="GUARD"&&t.message.includes("CORRECT")?C("failure","ELIMINATED","Guard Caught You!",F):t.type==="GUARD"&&t.message.includes("WRONG")?C("neutral","SAFE","Guard Guessed Wrong",ae):t.type==="SWORDSMAN"&&(t.message.includes("You Died")?C("failure","DEFEAT","Lost Sword Fight",F):t.message.includes("You Won")?C("success","VICTORY","Won Sword Fight",se):C("neutral","TIED","Both Survived",be)),de(a=>[...a,{title:"Action Alert!",text:t.message,type:t.type==="SWORDSMAN"?"sword":t.type==="SPY"?"spy":"warning",card:t.cardToShow,compareCard:t.compareCard,labels:t.labels}]))}if(s.lastRoundResult){const t=s.lastRoundResult;t.id!==Be.current&&(Be.current=t.id,de(a=>[...a,{title:`Round ${t.round} Complete!`,text:`${t.winnerName} won the round and earned a Coin!`,type:"round_end",card:null,compareCard:null}]))}}},[s,n]),b.useEffect(()=>{const t=Je(I(R,"game_hub_settings","config"),a=>{a.exists()&&(a.data()[Qt]?.maintenance?Te(!0):Te(!1))});return()=>t()},[]),ut)return e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white p-4 text-center",children:[e.jsx(tt,{}),e.jsxs("div",{className:"bg-orange-500/10 p-8 rounded-2xl border border-orange-500/30",children:[e.jsx(Dt,{size:64,className:"text-orange-500 mx-auto mb-4 animate-bounce"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Under Maintenance"}),e.jsx("p",{className:"text-gray-400",children:"The ship is in dry dock for repairs. The Captain says no sailing today!"})]}),e.jsx("div",{className:"h-8"}),e.jsx("a",{href:"/rawfids-gamehub/",children:e.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:e.jsx("div",{className:"text-center pb-12 animate-pulse",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-4 bg-slate-900/50 rounded-full border border-indigo-500/20 text-indigo-300 font-bold tracking-widest text-sm uppercase backdrop-blur-sm",children:[e.jsx(Xe,{size:16})," Visit Gamehub...Try our other releases..."," ",e.jsx(Xe,{size:16})]})})})}),e.jsx(De,{})]});const V=(t,a,r="error",l=null)=>{de(c=>[...c,{title:t,text:a,type:r,card:l}])},gt=async()=>{if(!L)return W("Name required");T(!0);const t="123456789ABCDEFGHIJKLMNPQRSTUVWXYZ";let a="";for(let l=0;l<6;l++)a+=t.charAt(Math.floor(Math.random()*t.length));const r={roomId:a,hostId:n.uid,status:"lobby",players:[{id:n.uid,name:L,coins:0,hand:[],playedCards:[],eliminated:!1,immune:!1,readyForNext:!1}],deck:[],deckConfig:{guards:6,merchants:2},discardPile:[],logs:[],turnIndex:0,roundCount:1,burntCard:null,thiefActive:null,pendingAction:null,lastAction:null,lastRoundResult:null};await _t(I(R,"artifacts",A,"public","data","rooms",a),r),localStorage.setItem("pirates_room_id",a),localStorage.setItem("pirates_player_name",L),_(a),K(a),g("lobby"),T(!1)},pt=async()=>{if(!k||!L)return W("Room ID and Name required");T(!0);const t=I(R,"artifacts",A,"public","data","rooms",k),a=await Qe(t);if(!a.exists()){W("Room not found"),T(!1);return}const r=a.data();if(r.status!=="lobby"&&!r.players.find(c=>c.id===n.uid)){W("Game already started"),T(!1);return}if(!r.players.find(l=>l.id===n.uid))if(r.players.length<8){const l=[...r.players,{id:n.uid,name:L,coins:0,hand:[],playedCards:[],eliminated:!1,immune:!1,readyForNext:!1}];await $(t,{players:l})}else{W("Room full (Max 8)"),T(!1);return}localStorage.setItem("pirates_room_id",k),localStorage.setItem("pirates_player_name",L),_(k),T(!1)},Ke=async()=>{if(!(!x||!n)){try{const t=I(R,"artifacts",A,"public","data","rooms",x),a=await Qe(t);if(a.exists()){const r=a.data();if(r.hostId===n.uid)await Mt(t);else if(r.status==="lobby"){const c=r.players.filter(y=>y.id!==n.uid);await $(t,{players:c})}else await bt(t,r)}}catch(t){console.error("Error leaving room:",t)}localStorage.removeItem("pirates_room_id"),localStorage.removeItem("pirates_player_name"),_(""),g("menu"),re(null),B(!1)}},bt=async(t,a)=>{const r=a.players.filter(c=>c.id!==n.uid);let l=null;r.length>0&&(l=r[0].id),await $(t,{status:"finished",winnerId:l,players:a.players.filter(c=>c.id!==n.uid),logs:P({id:Date.now().toString(),text:`${a.players.find(c=>c.id===n.uid)?.name} left the game. Game Over.`,type:"danger"})})},yt=async t=>{if(!s||s.hostId!==n.uid)return;const a=s.players.filter(r=>r.id!==t);await $(I(R,"artifacts",A,"public","data","rooms",x),{players:a})},wt=()=>{const t=s.roomId,a=()=>{Le(!0),setTimeout(()=>Le(!1),2e3),C&&C("neutral","COPIED!","",ae)};try{navigator.clipboard.writeText(t),a()}catch{const l=document.createElement("textarea");l.value=t,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),a()}},ie=async(t,a)=>{s.hostId===n.uid&&await $(I(R,"artifacts",A,"public","data","rooms",x),{deckConfig:{guards:t,merchants:a}})},ce=async(t=null)=>{const a=t?{...s,...t}:s,r=a.players.length;console.log("=== STARTING ROUND DEBUG ==="),console.log("Round Number:",a.roundCount||s.roundCount),console.log("Previous Starter Index:",a.roundStarterIdx),console.log("Type of Starter:",typeof a.roundStarterIdx);let l=a.deckConfig||{guards:6,merchants:2};r>4&&(l={guards:6,merchants:2});const c=[];Object.keys(w).forEach(m=>{let h=w[m].defaultCount;m==="GUARD"&&(h=l.guards??6),m==="MERCHANT"&&(h=l.merchants??2);for(let S=0;S<h;S++)c.push(m)});const y=$e(c),o=y.pop(),v=a.players.map(m=>({...m,hand:[y.pop()],playedCards:[],eliminated:!1,immune:!1,readyForNext:!1}));let d=0;if(a.roundStarterIdx!==void 0&&a.roundStarterIdx!==null){const m=Number(a.roundStarterIdx);d=(m+1)%r,console.log(`Calculation: (${m} + 1) % ${r} = ${d}`)}else d=Math.floor(Math.random()*v.length),console.log("First Round (or missing data) - Random Start:",d);v[d].hand.push(y.pop()),await $(I(R,"artifacts",A,"public","data","rooms",x),{status:"playing",deck:y,burntCard:o,players:v,discardPile:[],turnIndex:d,roundStarterIdx:d,thiefActive:null,lastAction:null,lastRoundResult:null,logs:P({id:Date.now()+Math.random().toString(),text:`--- Round ${a.roundCount||s.roundCount} Started (Player ${d+1} begins) ---`,type:"neutral"})})},jt=async()=>{const t=[...s.players],a=t.findIndex(r=>r.id===n.uid);t[a].readyForNext=!0,await $(I(R,"artifacts",A,"public","data","rooms",x),{players:t})},Ce=async()=>{if(!s||s.hostId!==n.uid)return;const t=s.players.map(a=>({...a,hand:[],playedCards:[],coins:0,eliminated:!1,immune:!1,readyForNext:!1}));await $(I(R,"artifacts",A,"public","data","rooms",x),{status:"lobby",players:t,deck:[],logs:[],roundCount:1,winnerId:null,lastAction:null,lastRoundResult:null})},Nt=async()=>{if(!s||s.hostId!==n.uid)return;const t=s.players.map(v=>({...v,hand:[],playedCards:[],coins:0,eliminated:!1,immune:!1,readyForNext:!1}));let a=s.deckConfig||{guards:6,merchants:2};t.length>4&&(a={guards:6,merchants:2});const r=[];Object.keys(w).forEach(v=>{let d=w[v].defaultCount;v==="GUARD"&&(d=a.guards??6),v==="MERCHANT"&&(d=a.merchants??2);for(let m=0;m<d;m++)r.push(v)});const l=$e(r),c=l.pop(),y=t.map(v=>({...v,hand:[l.pop()]})),o=Math.floor(Math.random()*y.length);y[o].hand.push(l.pop()),await $(I(R,"artifacts",A,"public","data","rooms",x),{status:"playing",deck:l,burntCard:c,players:y,discardPile:[],turnIndex:o,roundStarterIdx:o,thiefActive:null,lastAction:null,lastRoundResult:null,roundCount:1,winnerId:null,logs:[{id:Date.now().toString(),text:"--- NEW GAME STARTED ---",type:"neutral"}]})},Ve=async(t,a=[],r=null)=>{let l=[...t.players],c=[...t.deck],y=t.turnIndex,o=t.thiefActive;const v=l.filter(p=>!p.eliminated),d=a.map(p=>({...p,id:p.id||Date.now()+Math.random().toString()}));let m={players:l,deck:c};const h=Ae(l.length);if(r&&(m.lastAction=r),v.length===1){const p=v[0];p.coins+=1,d.push({id:Date.now()+Math.random().toString(),text:`üèÅ Round Over! ${p.name} survives alone (+1 Coin).`,type:"success"});const Y={id:Date.now(),winnerName:p.name,round:t.roundCount||s.roundCount};if(p.coins>=h){await $(I(R,"artifacts",A,"public","data","rooms",x),{...m,status:"finished",winnerId:p.id,logs:P(...d)});return}m.lastRoundResult=Y,await $(I(R,"artifacts",A,"public","data","rooms",x),{...m,roundCount:Ie(1),logs:P(...d)}),setTimeout(()=>ce({...t,players:l,roundCount:(t.roundCount||s.roundCount)+1}),3500);return}if(c.length===0){let p=-1,Y=[];v.forEach(E=>{if(E.hand.length>0){const G=w[E.hand[0]].val;G>p?(p=G,Y=[E]):G===p&&Y.push(E)}}),Y.forEach(E=>{const G=l.findIndex(xe=>xe.id===E.id);l[G].coins+=1});const ue=Y.map(E=>E.name).join(", ");d.push({id:Date.now()+Math.random().toString(),text:`üåä Deck Empty! Winners: ${ue} (Card Value: ${p}).`,type:"success"});const ke={id:Date.now(),winnerName:ue,round:t.roundCount||s.roundCount};if(l.some(E=>E.coins>=h)){await $(I(R,"artifacts",A,"public","data","rooms",x),{...m,status:"finished",winnerId:l.find(E=>E.coins>=h).id,logs:P(...d)});return}m.lastRoundResult=ke,await $(I(R,"artifacts",A,"public","data","rooms",x),{...m,roundCount:Ie(1),logs:P(...d)}),setTimeout(()=>ce({...t,players:l,roundCount:(t.roundCount||s.roundCount)+1}),3500);return}let S=(y+1)%l.length;for(;l[S].eliminated;)S=(S+1)%l.length;if(o&&o.playerId===l[S].id&&(l[S].id===n.uid&&C("success","+1 COIN","Survived as Thief",ge),l[S].coins+=1,d.push({id:Date.now()+Math.random().toString(),text:`üë£ ${l[S].name} survived the round as Thief (+1 Coin)!`,type:"success"}),o=null,l[S].coins>=h)){d.push({id:Date.now()+Math.random().toString(),text:`üèÜ ${l[S].name} collected ${h} coins via Thief and WINS THE GAME!`,type:"success"}),await $(I(R,"artifacts",A,"public","data","rooms",x),{players:l,status:"finished",winnerId:l[S].id,logs:P(...d)});return}l[S].immune=!1,c.length>0&&l[S].hand.push(c.pop()),m={...m,deck:c,turnIndex:S,thiefActive:o,players:l,logs:P(...d)},await $(I(R,"artifacts",A,"public","data","rooms",x),m)},vt=t=>{if(J){if(t===n.uid){V("Targeting Error","You cannot target yourself!","error");return}if(J==="GUARD"){Ne(t),ve(null);return}Se(J,t)}},Se=async(t,a=null,r=null)=>{if(!n||s.players[s.turnIndex].id!==n.uid)return;const l=["GUARD","SPY","SWORDSMAN","CANNONEER","SAILOR"],c=t==="GUARD",y=r||xt;if(l.includes(t)&&!a){H(t);return}if(c&&!y){H(t);return}const o=JSON.parse(JSON.stringify(s.players)),v=o.findIndex(i=>i.id===n.uid),d=o[v];let m=[...s.deck],h=[],S=s.thiefActive,p=null;const Y=d.hand,ue=Y.includes("CAPTAIN"),ke=Y.includes("CANNONEER")||Y.includes("SAILOR");if(ue&&ke&&t!=="CAPTAIN"){V("Captain's Orders","You MUST play the Captain if you hold a Cannoneer or Sailor!","error");return}const E=d.hand.indexOf(t);if(E===-1)return;d.hand.splice(E,1),d.playedCards||(d.playedCards=[]),d.playedCards.push(t);const G=(i,u)=>{const f=o.findIndex(D=>D.id===i);o[f].eliminated=!0,o[f].hand.length>0&&(o[f].playedCards||(o[f].playedCards=[]),o[f].playedCards.push(o[f].hand[0])),o[f].hand=[],h.push({text:`üíÄ ${o[f].name} was eliminated! (${u})`,type:"danger"}),S&&S.playerId===i&&(S=null)},xe=async()=>{let i=-1,u=[];const f=o.filter(z=>!z.eliminated),D=Ae(o.length);f.forEach(z=>{const te=w[z.hand[0]].val;te>i?(i=te,u=[z]):te===i&&u.push(z)}),u.forEach(z=>{const te=o.findIndex(kt=>kt.id===z.id);o[te].coins+=1});const ee=u.map(z=>z.name).join(", ");h.push({id:Date.now()+Math.random().toString(),text:`üåä Deck Empty! Winners: ${ee} (Card Value: ${i}).`,type:"success"});const qe=h.map(z=>({...z,id:Date.now()+Math.random().toString()})),St={id:Date.now(),winnerName:ee,round:s.roundCount};o.some(z=>z.coins>=D)?await $(I(R,"artifacts",A,"public","data","rooms",x),{players:o,deck:m,status:"finished",winnerId:o.find(z=>z.coins>=D).id,logs:P(...qe),discardPile:P(t),lastAction:p}):(await $(I(R,"artifacts",A,"public","data","rooms",x),{players:o,deck:m,roundCount:Ie(1),logs:P(...qe),discardPile:P(t),lastAction:p,lastRoundResult:St}),setTimeout(()=>ce({...s,players:o,roundCount:s.roundCount+1}),3500))};if(t==="THIEF")h.push({text:`üë£ ${d.name} plays Thief. (Gain coin if survived until next turn)`,type:"neutral"}),S&&h.push({text:`üö´ Previous Thief thwarted by ${d.name}!`,type:"neutral"}),S={playerId:n.uid,turnSet:s.turnIndex};else if(t==="GUARD"){const i=o.find(u=>u.id===a);if(h.push({text:`üõ°Ô∏è ${d.name} used Guard on ${i.name}, guessing ${w[y].name}.`,type:"neutral"}),i.immune)C("failure","IMMUNE","Target Protected",U),h.push({text:`üõ°Ô∏è ${i.name} is immune to the Guard!`,type:"warning"}),p={id:Date.now(),targetId:a,type:"GUARD",message:`${d.name} tried to Guard you, but you were Immune!`};else{const u=i.hand[0];u===y?(C("success","KILLED","Guard Guess Correct!",F),G(a,`Guard caught a ${w[y].name}`),p={id:Date.now(),targetId:a,type:"GUARD",message:`${d.name} guessed your card was a ${w[y].name}. They were CORRECT! You are out.`,cardToShow:u,compareCard:y,labels:["You Had","They Guessed"]}):(C("failure","MISSED","Guard Guess Wrong",U),h.push({text:`‚ùå Guard guess wrong. ${i.name} does not have ${w[y].name}.`,type:"neutral"}),p={id:Date.now(),targetId:a,type:"GUARD",message:`${d.name} guessed your card was a ${w[y].name}. They were WRONG. You are safe.`,cardToShow:u,compareCard:y,labels:["You Have","They Guessed"]})}}else if(t==="SPY"){const i=o.find(u=>u.id===a);i.immune?(C("failure","IMMUNE","Target Protected",U),h.push({text:`üõ°Ô∏è ${d.name} tried to Spy, but ${i.name} is immune!`,type:"warning"}),p={id:Date.now(),targetId:a,type:"SPY",message:`${d.name} tried to Spy on you, but you were Immune!`}):(h.push({text:`üëÅÔ∏è ${d.name} plays Spy and looks at ${i.name}'s hand.`,type:"neutral"}),V("Spy Report",`${i.name} is holding: ${w[i.hand[0]].name}`,"spy",i.hand[0]),p={id:Date.now(),targetId:a,type:"SPY",message:`${d.name} used a Spy to look at your hand.

üîç **${w[i.hand[0]].name}**`})}else if(t==="SWORDSMAN"){const i=o.find(u=>u.id===a);if(i.immune)C("failure","IMMUNE","Target Protected",U),h.push({text:`üõ°Ô∏è ${i.name} is immune to Sword Fight!`,type:"warning"}),p={id:Date.now(),targetId:a,type:"SWORDSMAN",message:`${d.name} tried to fight you, but you were Immune!`};else{const u=o[v].hand[0],f=i.hand[0],D=w[u].val,ee=w[f].val;h.push({text:`‚öîÔ∏è ${d.name} challenged ${i.name}.`,type:"neutral"}),D<ee?(C("failure","DEFEAT","You Died (Lower Card)",F),G(n.uid,"Lost Sword Fight (Lower Card)"),h.push({text:`... ${d.name} was defeated!`,type:"danger"}),p={id:Date.now(),targetId:a,type:"SWORDSMAN",message:`${d.name} challenged you! Your ${w[f].name} beat their ${w[u].name}. You Won!`,cardToShow:f,compareCard:u,labels:["Your Hand","Attacker"]},V("Sword Fight Result",`You challenged ${i.name}. Their ${w[f].name} beat your ${w[u].name}. You Died.`,"sword",f)):ee<D?(C("success","VICTORY","Target Died (Lower Card)",se),G(a,"Lost Sword Fight (Lower Card)"),h.push({text:`... ${i.name} was defeated!`,type:"danger"}),p={id:Date.now(),targetId:a,type:"SWORDSMAN",message:`${d.name} challenged you! Your ${w[f].name} lost to their ${w[u].name}. You Died.`,cardToShow:f,compareCard:u,labels:["Your Hand","Attacker"]},V("Sword Fight Result",`You challenged ${i.name}. Your ${w[u].name} beat their ${w[f].name}. You Won!`,"sword",f)):(C("neutral","TIED","Both Survived",be),h.push({text:"‚öîÔ∏è Sword Fight Tie! Both survive.",type:"neutral"}),p={id:Date.now(),targetId:a,type:"SWORDSMAN",message:`${d.name} challenged you! Tie (${w[f].name}). Both survive.`,cardToShow:f,compareCard:u,labels:["Your Hand","Attacker"]},V("Sword Fight Result",`Tie! You both have ${w[u].name}.`,"sword",f))}}else if(t==="COOK")o[v].immune=!0,h.push({text:`üç≥ ${d.name} plays Cook. Immune until next turn.`,type:"success"});else if(t==="CANNONEER"){const i=o.findIndex(f=>f.id===a),u=o[i];if(u.immune)C("failure","IMMUNE","Target Protected",U),h.push({text:`üõ° ${u.name} is immune to Cannoneer!`,type:"warning"}),p={id:Date.now(),targetId:a,type:"CANNONEER",message:`${d.name} tried to Cannon you, but you were Immune!`};else if(u.hand[0]==="PIRATE")C("success","KILLED","Pirate Eliminated!",F),h.push({text:`üí£ ${d.name} fires Cannon at ${u.name}... It's a Pirate! Target eliminated.`,type:"success"}),G(a,"Cannoneer hit a Pirate"),p={id:Date.now(),targetId:a,type:"CANNONEER",message:`${d.name} fired a Cannon at you. You had a Pirate and were eliminated!`};else if(u.hand[0]==="CAPTAIN"){C("failure","BACKFIRE","Hit Captain (You Died)",fe),h.push({text:`üí£ ${d.name} fires Cannon at ${u.name}... It's a Captain! ${d.name} blows themselves up!`,type:"danger"}),G(n.uid,"Cannoneer hit a Captain");const f=u.hand.pop();o[i].playedCards||(o[i].playedCards=[]),o[i].playedCards.push(f);let D;if(m.length>0?D=m.pop():(D=s.burntCard,h.push({text:"Deck empty! Recycled Burnt Card for Captain holder.",type:"warning"})),o[i].hand.push(D),p={id:Date.now(),targetId:a,type:"CANNONEER",message:`${d.name} fired a Cannon at you. Your Captain Reflected the attack! They died. You drew a new card.`,cardToShow:f,compareCard:D,labels:["Reflected","New Card"]},m.length===0){H(null),le(""),await xe();return}}else{C("success","DESTROYED","Card Removed",_e);const f=u.hand.pop();o[i].playedCards||(o[i].playedCards=[]),o[i].playedCards.push(f);let D;if(m.length>0?D=m.pop():(D=s.burntCard,h.push({text:"Deck empty! Recycled Burnt Card.",type:"warning"})),o[i].hand.push(D),h.push({text:`üí£ ${d.name} destroyed ${u.name}'s card!`,type:"neutral"}),p={id:Date.now(),targetId:a,type:"CANNONEER",message:`${d.name} destroyed your card! It was added to your history. You drew a new one.`,cardToShow:f,compareCard:D,labels:["Destroyed","New Card"]},m.length===0){H(null),le(""),await xe();return}}}else if(t==="MERCHANT"){let i=[];m.length>=2?i=[m.pop(),m.pop()]:m.length===1&&(i=[m.pop()]);const u=[...o[v].hand,...i];o[v].hand=[];const f=h.map(D=>({...D,id:Date.now()+Math.random().toString()}));await $(I(R,"artifacts",A,"public","data","rooms",x),{players:o,deck:m,thiefActive:S||null,logs:P(...f),discardPile:P(t),merchantState:{pool:u,originalDeckCount:m.length}}),H(null),le("");return}else if(t==="SAILOR"){const i=o.findIndex(u=>u.id===a);if(o[i].immune)h.push({text:`üõ°Ô∏è ${o[i].name} is immune to Swap!`,type:"warning"}),p={id:Date.now(),targetId:a,type:"SAILOR",message:`${d.name} tried to swap hands with you, but you were Immune!`};else{const u=o[v].hand.pop(),f=o[i].hand.pop();o[v].hand.push(f),o[i].hand.push(u),h.push({text:`‚öì ${d.name} swapped hands with ${o[i].name}.`,type:"neutral"}),p={id:Date.now(),targetId:a,type:"SAILOR",message:`${d.name} swapped hands with you.`,cardToShow:u,compareCard:f,labels:["Taken Card","Current Hand"]}}}else t==="CAPTAIN"?h.push({text:`üëë ${d.name} plays Captain (No Effect).`,type:"neutral"}):t==="PIRATE"&&(C("failure","SUICIDE","You Played Pirate!",F),G(n.uid,"Played Pirate (Suicide)"));H(null),le(""),await $(I(R,"artifacts",A,"public","data","rooms",x),{discardPile:P(t)}),await Ve({players:o,deck:m,turnIndex:s.turnIndex,thiefActive:S||null,burntCard:s.burntCard,deckConfig:s.deckConfig,roundCount:s.roundCount},h,p)},Ct=async t=>{const a=s.merchantState.pool,r=a.filter((o,v)=>v!==a.indexOf(t));let l=[...s.deck,...r];l=$e(l);const c=[...s.players],y=c.findIndex(o=>o.id===n.uid);c[y].hand=[t],await $(I(R,"artifacts",A,"public","data","rooms",x),{merchantState:null}),await Ve({players:c,deck:l,turnIndex:s.turnIndex,thiefActive:s.thiefActive,burntCard:s.burntCard,deckConfig:s.deckConfig,roundCount:s.roundCount},[{text:`üí∞ ${s.players.find(o=>o.id===n.uid).name} used Merchant to draw cards and kept one.`,type:"neutral"}])};s?.players.filter(t=>!t.eliminated&&t.id!==n?.uid);const M=s?.players.find(t=>t.id===n?.uid),me=s?.players[s?.turnIndex]?.id===n?.uid,Z=s?.players.filter(t=>t.id!==s.hostId).every(t=>t.readyForNext);if(!n)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center text-red-500 animate-pulse",children:"Setting sail..."});if(x&&!s&&!we)return e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white p-4",children:[e.jsx(he,{}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur p-8 rounded-2xl border border-zinc-700 shadow-2xl flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsx(lt,{size:48,className:"text-red-500 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Reconnecting..."}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Resuming your session"})]})]})]});if(j==="splash")return e.jsx(aa,{onStart:ft});if(j==="menu")return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-4 relative overflow-hidden font-sans",children:[e.jsx(he,{}),e.jsx("nav",{className:"absolute top-0 left-0 w-full p-4 z-50",children:e.jsxs("a",{href:"/rawfids-gamehub/",className:`flex items-center gap-2 text-red-800 rounded-lg 
			font-bold shadow-md hover:text-red-400 transition-colors w-fit animate-pulse`,children:[e.jsx(Tt,{}),e.jsx("span",{children:"Back to Gamehub"})]})}),Me&&e.jsx(st,{onClose:()=>ne(!1)}),e.jsxs("div",{className:"z-10 text-center mb-10",children:[e.jsx(pe,{size:64,className:"text-red-500 mx-auto mb-4 animate-bounce drop-shadow-[0_0_15px_rgba(239,68,68,0.5)]"}),e.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-linear-to-b from-red-500 to-orange-600 font-serif tracking-widest drop-shadow-md",children:"PIRATES"}),e.jsx("p",{className:"text-white-400/60 tracking-[0.3em] uppercase mt-2",children:"Adventure on the Sea"})]}),e.jsxs("div",{className:"bg-gray-900/80 backdrop-blur border border-red-500/30 p-8 rounded-2xl w-full max-w-md shadow-2xl z-10 animate-in slide-in-from-bottom-10 duration-700 delay-100",children:[we&&e.jsx("div",{className:"bg-red-900/50 text-red-200 p-2 mb-4 rounded text-center text-sm border border-red-800",children:we}),e.jsx("input",{className:"w-full bg-black/50 border border-gray-600 p-3 rounded mb-4 text-white placeholder-gray-500 focus:border-red-500 outline-none transition-colors",placeholder:"Pirate Name",value:L,onChange:t=>ht(t.target.value)}),e.jsxs("button",{onClick:gt,disabled:ye,className:"w-full bg-linear-to-r from-red-700 to-red-600 hover:from-red-600 hover:to-red-500 p-4 rounded font-bold mb-4 flex items-center justify-center gap-2 border border-red-500/30 shadow-[0_0_15px_rgba(220,38,38,0.2)] transition-all",children:[e.jsx(pe,{size:20})," Create New Ship"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsx("input",{className:"w-full sm:flex-1 bg-black/50 border border-gray-600 p-3 rounded text-white placeholder-gray-500 uppercase font-mono tracking-wider focus:border-red-500 outline-none",placeholder:"ROOM CODE",value:k,onChange:t=>K(t.target.value.toUpperCase())}),e.jsx("button",{onClick:pt,disabled:ye,className:"w-full sm:w-auto bg-gray-800 hover:bg-gray-700 border border-gray-600 px-6 py-3 rounded font-bold transition-colors",children:"Infiltrate Ship"})]}),e.jsxs("button",{onClick:()=>ne(!0),className:"w-full text-sm text-gray-400 hover:text-white flex items-center justify-center gap-2 py-2",children:[e.jsx(Ze,{size:16})," Read Pirate's Plan"]})]})]});if(j==="lobby"&&s){const t=s.hostId===n.uid,a=s.deckConfig?.guards??6,r=s.deckConfig?.merchants??2,l=s.players.length;return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-6 relative",children:[e.jsx(he,{}),e.jsx(tt,{}),Ge&&e.jsx(at,{onCancel:()=>B(!1),onConfirmLeave:Ke,onConfirmLobby:()=>{Ce(),B(!1)},isHost:t,inGame:!1}),e.jsxs("div",{className:"z-10 w-full max-w-lg bg-gray-900/90 backdrop-blur p-8 rounded-2xl border border-red-900/50 shadow-2xl mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-gray-700 pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl text-red-500 font-bold uppercase",children:"Cabin"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-mono text-white font-black",children:x}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:wt,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:Oe?e.jsx(ae,{size:16,className:"text-green-500"}):e.jsx(Ot,{size:16})}),Oe&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-red-500 text-black text-xs font-bold px-2 py-1 rounded shadow-lg animate-fade-in-up whitespace-nowrap",children:"Copied!"})]})]})]}),e.jsx("button",{onClick:()=>B(!0),className:"p-2 bg-red-900/30 hover:bg-red-900/50 rounded text-red-300",title:"Leave Room",children:e.jsx(Ee,{size:16})})]}),e.jsxs("div",{className:"bg-black/20 rounded-xl p-4 mb-8 border border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 text-xs uppercase tracking-wider mb-4 flex justify-between",children:e.jsxs("span",{children:["Crew (",s.players.length,"/8)"]})}),e.jsxs("div",{className:"space-y-2",children:[s.players.map(c=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-800/50 p-3 rounded border border-gray-700/50",children:[e.jsxs("span",{className:`font-bold flex items-center gap-2 ${c.id===n.uid?"text-red-400":"text-gray-300"}`,children:[e.jsx(ze,{size:14,className:c.id===n.uid?"text-red-400":"text-gray-500"}),c.name,c.id===s.hostId&&e.jsx(fe,{size:14,className:"text-yellow-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-green-500 text-xs flex items-center gap-1",children:[e.jsx(ae,{size:12})," Ready"]}),t&&c.id!==n.uid&&e.jsx("button",{onClick:()=>yt(c.id),className:"p-1 hover:bg-red-900/50 rounded text-red-400",title:"Kick Player",children:e.jsx(Yt,{size:16})})]})]},c.id)),s.players.length<2&&e.jsx("div",{className:"text-center text-gray-500 italic text-sm py-2",children:"Waiting for more agents..."})]})]}),t&&e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-red-300 font-bold mb-2 uppercase text-xs tracking-wider flex items-center gap-2",children:[e.jsx(Ft,{size:16})," Deck Config"]}),l>4&&e.jsx("span",{className:"text-xs text-red-400 bg-red-900/30 px-2 py-1 rounded",children:"Disabled (5+ Players)"})]}),e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 ${l>4?"opacity-50 pointer-events-none":""}`,children:[e.jsxs("div",{className:"bg-gray-900 p-3 rounded flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-400",children:["Guards (",a,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie(a-1,r),disabled:a<=4,className:"w-8 h-8 bg-gray-700 rounded hover:bg-gray-600 disabled:opacity-30 text-white",children:"-"}),e.jsx("button",{onClick:()=>ie(a+1,r),disabled:a>=6,className:"w-8 h-8 bg-gray-700 rounded hover:bg-gray-600 disabled:opacity-30 text-white",children:"+"})]})]}),e.jsxs("div",{className:"bg-gray-900 p-3 rounded flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm font-bold text-yellow-400",children:["Merchants (",r,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie(a,r-1),disabled:r<=0,className:"w-8 h-8 bg-gray-700 rounded hover:bg-gray-600 disabled:opacity-30 text-white",children:"-"}),e.jsx("button",{onClick:()=>ie(a,r+1),disabled:r>=2,className:"w-8 h-8 bg-gray-700 rounded hover:bg-gray-600 disabled:opacity-30 text-white",children:"+"})]})]})]})]}),t?e.jsx("button",{onClick:()=>ce(),disabled:s.players.length<2,className:`w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all flex items-center justify-center gap-2 ${s.players.length>=2?"bg-green-700 hover:bg-green-600 text-white shadow-green-900/20":"bg-gray-800 cursor-not-allowed text-gray-500"}`,children:s.players.length<2?"Awaiting Agents...":"Commence Operation"}):e.jsx("div",{className:"text-center text-red-400/60 animate-pulse font-serif italic",children:"Waiting for Host command..."})]}),e.jsx(De,{})]})}if(j==="game"&&s){const t=s.merchantState&&me,a=s.hostId===n.uid;return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col relative overflow-hidden font-sans",children:[e.jsx(he,{}),Q&&e.jsx(Zt,{type:Q.type,message:Q.message,subtext:Q.subtext,icon:Q.icon}),O&&e.jsx(ea,{title:O.title,text:O.text,type:O.type,card:O.card,compareCard:O.compareCard,labels:O.labels,onClose:()=>He(null)}),Ge&&e.jsx(at,{onCancel:()=>B(!1),onConfirmLeave:Ke,onConfirmLobby:()=>{Ce(),B(!1)},isHost:a,inGame:!0}),Me&&e.jsx(st,{onClose:()=>ne(!1)}),e.jsxs("div",{className:"h-14 bg-gray-900/80 border-b border-gray-800 flex items-center justify-between px-4 z-160 backdrop-blur-md sticky top-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-serif text-red-500 font-bold tracking-wider hidden md:block",children:"PIRATES"}),e.jsx("span",{className:"text-xs text-gray-500 bg-black/50 px-2 py-1 rounded",children:"SHIP'S CABIN"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ne(!0),className:"p-2 hover:bg-gray-800 rounded text-gray-400",title:"Guide",children:e.jsx(Ze,{size:18})}),e.jsx("button",{onClick:()=>Ye(!je),className:`p-2 rounded-full ${je?"bg-red-900 text-red-400":"text-gray-400 hover:bg-gray-800"}`,children:e.jsx(Ht,{size:18})}),e.jsx("button",{onClick:()=>B(!0),className:"p-2 hover:bg-red-900/50 rounded text-red-400",title:"Leave",children:e.jsx(Ee,{size:18})})]})]}),e.jsxs("div",{className:"flex-1 p-2 md:p-4 flex flex-col items-center justify-between relative z-10 max-w-6xl mx-auto w-full",children:[e.jsxs("div",{className:"absolute top-1/2 left-4 -translate-y-1/2 flex flex-col gap-2 items-center text-gray-500 hidden md:flex",children:[e.jsx("div",{className:"w-16 h-24 bg-gray-900/90 border-2 border-gray-700 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"font-bold text-xl",children:s.deck.length})}),e.jsx("span",{className:"text-xs uppercase",children:"Deck"})]}),e.jsxs("div",{className:"md:hidden bg-gray-800/80 px-3 py-1 rounded-full border border-gray-700 text-xs text-gray-400 mb-2",children:["Deck:"," ",e.jsx("span",{className:"text-white font-bold",children:s.deck.length})]}),e.jsx("div",{className:"flex gap-2 md:gap-4 justify-center flex-wrap w-full",children:s.players.map((r,l)=>{if(r.id===n.uid)return null;const c=s.turnIndex===l,y=me&&J&&!r.eliminated,o=r.immune,v=s.thiefActive?.playerId===r.id;return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:`
                    relative bg-gray-900/90 p-2 md:p-3 rounded-lg md:rounded-xl border-2 w-36 md:w-48 transition-all cursor-pointer
                    ${c?"border-red-500 shadow-red-500/20 shadow-lg scale-105":"border-gray-700"}
                    ${r.eliminated?"opacity-50 grayscale":""}
                    ${y?"ring-2 md:ring-4 ring-orange-500 hover:scale-110":""}
                    ${o?"ring-2 md:ring-4 ring-green-400/50 shadow-[0_0_15px_rgba(74,222,128,0.5)] animate-pulse":""}
                    ${v?"ring-2 md:ring-4 ring-red-500/50 shadow-[0_0_15px_rgba(239,68,68,0.5)] animate-pulse":""}
                  `,onClick:()=>y?vt(r.id):null,children:[e.jsx("div",{className:"flex justify-between items-start mb-1 md:mb-2",children:e.jsx("span",{className:`font-bold truncate text-xs md:text-sm w-full ${c?"text-red-300":"text-gray-300"}`,children:r.name})}),e.jsxs("div",{className:"absolute top-1 right-1 flex flex-col gap-0.5",children:[r.immune&&e.jsx(U,{size:10,className:"text-green-400"}),v&&e.jsx(Pe,{size:10,className:"text-red-400"})]}),e.jsx("div",{className:"flex gap-0.5 md:gap-1 justify-center mb-1 md:mb-2",children:r.hand.map((d,m)=>e.jsx("div",{className:"w-4 h-6 md:w-6 md:h-8 bg-blue-900 rounded border border-blue-500"},m))}),e.jsxs("div",{className:"flex justify-between items-center text-[8px] md:text-xs text-gray-400 bg-gray-900/50 p-0.5 md:p-1 rounded",children:[e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(ge,{size:8,className:"text-yellow-400"})," ",r.coins]}),r.eliminated&&e.jsx(F,{size:10,className:"text-red-500"})]}),c&&e.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 bg-red-600 text-white text-[8px] md:text-[10px] font-bold px-1.5 md:px-2 rounded-full whitespace-nowrap",children:"PLAYING"}),y&&e.jsx("div",{className:"absolute inset-0 bg-orange-500/20 rounded-lg md:rounded-xl flex items-center justify-center font-bold text-[10px] md:text-sm text-orange-300 animate-pulse",children:"TARGET"}),o&&e.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 bg-green-500 text-black text-[8px] md:text-[10px] font-bold px-1.5 md:px-2 rounded-full whitespace-nowrap z-20 shadow-lg",children:"IMMUNE"}),v&&e.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 bg-red-600 text-white text-[8px] md:text-[10px] font-bold px-1.5 md:px-2 rounded-full whitespace-nowrap z-20 shadow-lg",children:"THIEF"})]}),e.jsx("div",{className:"mt-1 md:mt-2 flex gap-0.5 justify-center flex-wrap max-w-20 md:max-w-32",children:r.playedCards&&r.playedCards.map((d,m)=>e.jsx(q,{type:d,tiny:!0},m))})]},r.id)})}),e.jsx("div",{className:"pointer-events-none z-0 my-2 flex flex-col items-center space-y-2 opacity-80 w-full px-4",children:s.logs.slice(-3).reverse().map((r,l)=>e.jsx("div",{className:"bg-black/60 px-3 py-1 rounded text-xs md:text-sm text-white backdrop-blur-sm text-center truncate max-w-full",children:r.text},l))}),e.jsxs("div",{className:`w-full max-w-2xl bg-gray-900/95 p-3 md:p-6 rounded-t-2xl md:rounded-t-3xl border-t border-red-900/50 backdrop-blur-md transition-colors ${M?.eliminated?"grayscale opacity-75":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start md:items-center mb-3 md:mb-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-3",children:[e.jsxs("div",{className:`bg-gray-900 px-2 md:px-4 py-1.5 md:py-2 rounded-lg border border-gray-700 flex items-center gap-2 
                    ${M.immune?"ring-2 ring-green-500 shadow-lg shadow-green-500/20":""}
                    ${s.thiefActive?.playerId===M.id?"ring-2 ring-red-500 shadow-lg shadow-red-500/20":""}
                   `,children:[e.jsx(ze,{className:"text-gray-400 w-4 h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"font-bold text-sm md:text-lg max-w-[80px] md:max-w-none truncate text-gray-300",children:M.name}),M.immune&&e.jsx(U,{className:"text-green-400 ml-1 md:ml-2 w-3 h-3 md:w-5 md:h-5"}),s.thiefActive?.playerId===M.id&&e.jsx(Pe,{className:"text-red-400 ml-1 md:ml-2 w-3 h-3 md:w-5 md:h-5"})]}),e.jsxs("div",{className:"bg-gray-900 px-2 md:px-4 py-1.5 md:py-2 rounded-lg border border-gray-700 flex items-center gap-2",children:[e.jsx(ge,{className:"text-yellow-400 w-4 h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"font-bold text-sm md:text-xl text-yellow-400",children:M.coins}),e.jsxs("span",{className:"text-[10px] md:text-xs text-gray-500 uppercase font-bold self-end mb-0.5 md:mb-1",children:["/ ",Ae(s.players.length)]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 max-w-[160px] md:max-w-xs",children:[me&&!M.eliminated&&!t&&e.jsx("div",{className:"text-green-400 font-bold animate-pulse uppercase tracking-widest text-xs md:text-sm mb-1 bg-green-900/20 px-2 py-0.5 rounded border border-green-500/50",children:"PLAYING"}),e.jsxs("div",{className:"flex gap-0.5 items-center bg-gray-900/50 p-1 md:p-2 rounded-lg border border-gray-700 w-full overflow-x-auto",children:[e.jsx("span",{className:"text-[8px] md:text-[10px] text-gray-500 uppercase mr-1 hidden md:inline shrink-0",children:"History"}),M.playedCards&&M.playedCards.map((r,l)=>e.jsx("div",{className:"shrink-0",children:e.jsx(q,{type:r,tiny:!0})},l))]})]})]}),M.eliminated?e.jsxs("div",{className:"text-center py-4 md:py-8 text-red-500 font-bold text-xl md:text-2xl uppercase tracking-widest border-2 border-red-900 bg-red-900/10 rounded-xl",children:[e.jsx(F,{className:"inline-block mb-1 md:mb-2 w-8 h-8 md:w-12 md:h-12"}),e.jsx("br",{}),"Eliminated"]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center gap-2 md:gap-4 mb-2",children:t?s.merchantState.pool.map((r,l)=>e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(q,{type:r,onClick:()=>Ct(r),highlight:!0}),e.jsx("span",{className:"text-xs text-green-400 font-bold",children:"Keep"})]},l)):M.hand.map((r,l)=>{const c=me,y=J===r;return e.jsxs("div",{className:"flex flex-col items-center gap-2 relative",children:[y&&e.jsx("div",{className:"absolute -top-8 md:-top-10 bg-yellow-500 text-black px-2 py-1 rounded text-[10px] md:text-xs font-bold animate-bounce z-20 whitespace-nowrap",children:"Select Target!"}),e.jsx(q,{type:r,onClick:()=>c?Se(r):null,disabled:!c,highlight:c&&y}),c&&y&&e.jsx("div",{className:"flex flex-col gap-1 w-full animate-in fade-in slide-in-from-bottom-2",children:e.jsx("button",{onClick:()=>H(null),className:"bg-red-900/50 hover:bg-red-900 text-[8px] md:text-[10px] py-1 rounded text-red-300 w-full",children:"Cancel"})})]},l)})})})]})]}),je&&e.jsx(ta,{logs:s.logs,onClose:()=>Ye(!1)}),Fe&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800 border-2 border-blue-500 rounded-xl p-4 md:p-6 w-full max-w-sm shadow-2xl animate-in fade-in zoom-in",children:[e.jsxs("h3",{className:"text-lg md:text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"text-blue-400"}),"Guess a Card"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:Object.keys(w).filter(r=>{if(r==="GUARD")return!1;const l=s.deckConfig?.merchants??2;return!(r==="MERCHANT"&&l===0)}).map(r=>e.jsxs("button",{onClick:()=>ve(r),className:`
                        p-2 rounded text-xs md:text-sm font-bold transition-colors flex items-center gap-1 md:gap-2 justify-center md:justify-start
                        ${X===r?"bg-yellow-500 text-black ring-2 ring-yellow-300":"bg-gray-700 hover:bg-blue-600 text-white"}
                      `,children:[Et.createElement(w[r].icon,{size:14}),w[r].name]},r))}),e.jsx("button",{onClick:()=>{X?(Se("GUARD",Fe,X),Ne(null),ve(null),H(null)):(Ne(null),H(null))},className:`
                  w-full py-3 rounded font-bold transition-colors
                  ${X?"bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-900/20":"bg-red-900/50 hover:bg-red-900 text-red-200"}
                `,children:X?"Confirm Play":"Cancel"})]})}),s.status==="finished"&&!O&&oe.length===0&&e.jsxs("div",{className:"fixed inset-0 top-14 bg-black/95 z-150 flex flex-col items-center justify-center p-4 text-center",children:[e.jsx(se,{size:48,className:"text-yellow-400 mb-4 animate-bounce"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"Game Over!"}),e.jsxs("div",{className:"text-xl md:text-2xl text-gray-300 mb-8",children:[s.players.find(r=>r.id===s.winnerId)?.name," ","wins the treasure!"]}),s.hostId===n.uid?e.jsxs("div",{className:"flex flex-col items-center gap-3 w-full max-w-xs",children:[!Z&&e.jsxs("div",{className:"text-red-400 text-xs md:text-sm animate-pulse mb-1 flex items-center gap-2 justify-center",children:[e.jsx(it,{size:16})," Waiting for crew..."]}),e.jsxs("button",{onClick:Nt,disabled:!Z,className:`w-full py-3 rounded-xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all
                        ${Z?"bg-blue-600 hover:bg-blue-500 shadow-blue-900/20 text-white":"bg-gray-700 cursor-not-allowed text-gray-400"}
                      `,children:[e.jsx(ot,{size:20})," Restart Game"]}),e.jsxs("button",{onClick:Ce,disabled:!Z,className:`w-full py-3 rounded-xl font-bold text-lg flex items-center justify-center gap-2 border-2 transition-all
                        ${Z?"border-green-600 text-green-500 hover:bg-green-600/10":"border-gray-700 text-gray-500 cursor-not-allowed"}
                      `,children:[e.jsx(ct,{size:20})," Return to Lobby"]})]}):e.jsx("button",{onClick:jt,disabled:s.players.find(r=>r.id===n.uid)?.readyForNext,className:`w-full max-w-xs py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all ${s.players.find(r=>r.id===n.uid)?.readyForNext?"bg-gray-700 text-green-400 border border-green-500 cursor-default":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:s.players.find(r=>r.id===n.uid)?.readyForNext?e.jsxs(e.Fragment,{children:[e.jsx(ae,{size:24})," Waiting for Host..."]}):"Ready for Next Game"})]}),e.jsx(De,{})]})}return null}Gt.createRoot(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(sa,{})}));
