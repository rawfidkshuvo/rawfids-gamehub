import{c as st,i as at,g as rt,a as nt,r as x,e as lt,o as Ce,d as j,j as e,H as it,S as Se,L as Me,R as ze,X as Z,n as ot,s as dt,h as ct,p as Te,u as I,t as xt,q as J,m as mt}from"./x-CZayGA_K.js";import{S as ut,B as Re,C as D,a as ft,L as de,R as Oe,P as pt}from"./step-back-B0OJpjC1.js";import{P as ee}from"./paw-print-WS0y3B9i.js";import{C as _e}from"./crown-Dx9ZX0tf.js";import{T as gt}from"./trash-2-CvQllGyi.js";import{H as bt}from"./history-Zl31ME6M.js";import{S as Pe}from"./skull-BGTgQEHs.js";import{H as Ge}from"./house-BF2Y3ccd.js";import{H as ht}from"./hand-BgVzhSGV.js";import{A as ce}from"./arrow-right-ComkeddA.js";import{S as yt,T as jt,a as wt,C as De,R as vt}from"./turtle-BwLHCN3D.js";import{B as Nt,F as kt}from"./fish-DQ5YZdb7.js";import{E as Ue}from"./eye-vNcUtVSg.js";import{U as xe}from"./user-iW0fLfER.js";import{T as It}from"./trophy-DYxnvBw2.js";import{T as Ct}from"./triangle-alert-DkjWnX7a.js";import{I as Fe}from"./info-Ck8746Bx.js";const St=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],zt=st("message-square",St),$e="/rawfids-gamehub/assets/royal_cover-rnTueNmX.png",Tt={apiKey:"AIzaSyBjIjK53vVJW1y5RaqEFGSFp0ECVDBEe1o",authDomain:"game-hub-ff8aa.firebaseapp.com",projectId:"game-hub-ff8aa",storageBucket:"game-hub-ff8aa.firebasestorage.app",messagingSenderId:"586559578902",appId:"1:586559578902:web:91da4fa4ace038d16aa637"},He=at(Tt),ie=rt(He),w=nt(He),N=typeof __app_id<"u"?__app_id:"royal-menagerie-game",Rt="19",u={RAT:{name:"Rat",icon:vt,color:"text-gray-200",bg:"bg-gray-800",border:"border-gray-600"},CAT:{name:"Cat",icon:De,color:"text-orange-200",bg:"bg-orange-900",border:"border-orange-700"},DOG:{name:"Dog",icon:ee,color:"text-white",bg:"bg-black",border:"border-gray-500"},RABBIT:{name:"Rabbit",icon:wt,color:"text-pink-200",bg:"bg-pink-900",border:"border-pink-700"},TURTLE:{name:"Turtle",icon:jt,color:"text-emerald-200",bg:"bg-emerald-900",border:"border-emerald-700"},FISH:{name:"Fish",icon:kt,color:"text-blue-200",bg:"bg-blue-900",border:"border-blue-700"},BIRD:{name:"Bird",icon:Nt,color:"text-sky-200",bg:"bg-sky-900",border:"border-sky-700"},SNAIL:{name:"Snail",icon:yt,color:"text-fuchsia-200",bg:"bg-fuchsia-900",border:"border-fuchsia-700"}},_t=s=>{let m=s.length,c;for(;m!==0;)c=Math.floor(Math.random()*m),m--,[s[m],s[c]]=[s[c],s[m]];return s},Ee=({onClose:s})=>e.jsx("div",{className:"fixed inset-0 bg-black/95 z-200 flex items-center justify-center p-0 md:p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-gray-900 md:rounded-2xl w-full max-w-5xl h-full md:h-auto md:max-h-[90vh] overflow-hidden border-none md:border border-gray-700 shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-700 flex justify-between items-center bg-gray-800",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-2xl md:text-4xl font-black text-transparent bg-clip-text bg-linear-to-r from-purple-400 to-pink-500 uppercase tracking-widest",children:"ROYAL GUIDE"}),e.jsx("span",{className:"text-gray-400 text-xs md:text-sm font-medium tracking-wide",children:"The Court of Deception"})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-700 rounded-full text-gray-400",children:e.jsx(Z,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-6 text-gray-300",children:[e.jsxs("div",{className:"bg-linear-to-r from-pink-900/30 to-pink-900/30 p-4 md:p-6 rounded-2xl border border-pink-700/30",children:[e.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-white mb-3 flex items-center gap-3",children:[e.jsx(It,{className:"text-yellow-400",size:24})," The Objective"]}),e.jsxs("p",{className:"text-sm md:text-lg leading-relaxed",children:["There is only ",e.jsx("strong",{children:"ONE LOSER"}),". Everyone else wins.",e.jsx("br",{}),e.jsx("br",{}),"You lose if you collect:",e.jsx("br",{}),"1. ",e.jsx("strong",{children:"4 cards"})," of the same Animal.",e.jsx("br",{}),"2. ",e.jsx("strong",{children:"1 card"})," of every Animal (8 total).",e.jsx("br",{}),"3. Or run out of cards in your hand when you need to play."]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx(zt,{className:"text-pink-400",size:24})," Gameplay"]}),e.jsxs("div",{className:"space-y-4 border-l-2 border-gray-700 ml-4 pl-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-lg",children:"1. The Offer"}),e.jsxs("p",{children:['Pick a card from your hand, pass it face-down to a player, and declare an animal name (e.g., "This is a Rat"). You can'," ",e.jsx("strong",{children:"Lie"})," or tell the ",e.jsx("strong",{children:"Truth"}),"."]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-lg",children:"2. The Response"}),e.jsx("p",{children:"The receiver has two choices:"}),e.jsxs("ul",{className:"list-disc ml-6 mt-1 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Guess:"}),' Say "True" or "False". If they guess right, YOU get the card face-up. If they guess wrong, THEY get the card.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Peek & Pass:"})," Peek at the card, then pass it to a ",e.jsx("em",{children:"new"})," player with a new claim."]})]})]})]})]})]}),e.jsx("div",{className:"p-4 bg-gray-800 border-t border-gray-700 text-center sticky bottom-0",children:e.jsx("button",{onClick:s,className:"bg-pink-600 hover:bg-pink-500 text-white px-10 py-3 rounded-xl font-bold text-lg shadow-xl",children:"Enter the Court"})})]})}),Ae=({onConfirmLeave:s,onConfirmLobby:m,onCancel:c,isHost:o,inGame:i})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6 max-w-sm w-full text-center shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Abandon the Court?"}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:i?"Leaving now will disrupt the proceedings!":"Leaving the lobby will disconnect you."}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:c,className:"bg-gray-700 hover:bg-gray-600 text-white py-3 rounded font-bold transition-colors",children:"Stay (Cancel)"}),i&&o&&e.jsxs("button",{onClick:m,className:"py-3 rounded font-bold transition-colors flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-500 text-white",children:[e.jsx(Ge,{size:18})," Return Court to Lobby"]}),e.jsxs("button",{onClick:s,className:"bg-red-600 hover:bg-red-500 text-white py-3 rounded font-bold transition-colors flex items-center justify-center gap-2",children:[e.jsx(de,{size:18})," ",i&&o?"End Game for All":"Leave Game"]})]})]})}),$t=({type:s,message:m,subtext:c,icon:o})=>e.jsx("div",{className:"fixed inset-0 z-160 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:`
      flex flex-col items-center justify-center p-8 md:p-12 rounded-3xl border-4 shadow-[0_0_50px_rgba(0,0,0,0.8)] 
      transform transition-all animate-in fade-in zoom-in slide-in-from-bottom-10 duration-300 backdrop-blur-md
      ${s==="success"?"bg-green-900/90 border-green-500 text-green-100":""}
      ${s==="failure"?"bg-red-900/90 border-red-500 text-red-100":""}
      ${s==="neutral"?"bg-pink-900/90 border-pink-500 text-pink-100":""}
    `,children:[o&&e.jsx("div",{className:"mb-4 p-4 bg-black/30 rounded-full border-2 border-white/20",children:e.jsx(o,{size:64,className:"animate-bounce"})}),e.jsx("h2",{className:"text-3xl md:text-5xl font-black uppercase tracking-widest text-center drop-shadow-lg mb-2",children:m}),c&&e.jsx("p",{className:"text-lg md:text-xl font-bold opacity-90 tracking-wide text-center",children:c})]})}),Q=({isShaking:s})=>e.jsxs("div",{className:`absolute inset-0 overflow-hidden pointer-events-none z-0 ${s?"animate-shake bg-red-900/20":""}`,children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,var(--tw-gradient-stops))] from-yellow-900/20 via-gray-950 to-black"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[...Array(20)].map((m,c)=>{const o=Object.keys(u),i=u[o[c%o.length]].icon;return e.jsx("div",{className:"absolute animate-float text-white/60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${10+Math.random()*20}s`,transform:`scale(${.5+Math.random()})`},children:e.jsx(i,{size:32})},c)})}),e.jsx("style",{children:`
      @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
      }
      .animate-float { animation: float infinite ease-in-out; }
      
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
      .animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
    `})]}),oe=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(ee,{size:12,className:"text-purple-500"}),e.jsx("span",{className:"text-[10px] font-black tracking-widest text-pink-500 uppercase",children:"ROYAL MENAGERIE"})]}),Le=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(ee,{size:20,className:"text-purple-500"}),e.jsx("span",{className:"text-[20px] font-black tracking-widest text-pink-500 uppercase",children:"ROYAL MENAGERIE"})]}),Et=({title:s,text:m,onClose:c,type:o="info",card:i=null})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-150 flex items-center justify-center p-4 animate-in fade-in",children:e.jsx("div",{className:"bg-gray-800 border-2 border-pink-600 rounded-xl p-6 w-full max-w-sm shadow-2xl relative",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[o==="error"?e.jsx(Ct,{className:"text-red-500 w-12 h-12"}):o==="loss"?e.jsx(Pe,{className:"text-red-500 w-12 h-12 animate-bounce"}):e.jsx(Fe,{className:"text-pink-400 w-12 h-12"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:s}),e.jsx("p",{className:"text-gray-300 text-lg",children:m}),i&&e.jsxs("div",{className:"my-2",children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold mb-1 block",children:"The Card Was"}),e.jsx(E,{type:i,small:!0})]}),e.jsx("button",{onClick:c,className:"w-full py-3 rounded-lg font-bold text-white bg-pink-600 hover:bg-pink-500 transition-colors",children:o==="loss"?"Accept Fate":"Understood"})]})})}),At=({turnState:s,players:m,currentUserId:c})=>{if(!s||s.originId===c||s.holderId===c)return null;const o=m.find(h=>h.id===s.originId),i=m.find(h=>h.id===s.holderId),p=u[s.declaredType];return!o||!i||!p?null:e.jsx("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-80 pointer-events-none animate-in fade-in zoom-in",children:e.jsxs("div",{className:"bg-gray-900/90 border-2 border-pink-500/50 backdrop-blur-md p-4 rounded-2xl shadow-[0_0_30px_rgba(168,85,247,0.3)] flex flex-col items-center gap-3 w-64 md:w-80",children:[e.jsxs("div",{className:"flex items-center gap-2 text-pink-300 text-xs font-bold uppercase tracking-widest",children:[e.jsx(Ue,{size:14,className:"animate-pulse"})," Live Interaction"]}),e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 border border-gray-600 flex items-center justify-center mb-1",children:e.jsx(xe,{size:20,className:"text-gray-400"})}),e.jsx("span",{className:"text-xs font-bold text-gray-300 max-w-[80px] truncate",children:o.name})]}),e.jsxs("div",{className:"flex flex-col items-center px-2",children:[e.jsx(ce,{className:"text-pink-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] text-pink-400 font-bold mt-1",children:"OFFERS"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 border border-gray-600 flex items-center justify-center mb-1",children:e.jsx(xe,{size:20,className:"text-gray-400"})}),e.jsx("span",{className:"text-xs font-bold text-gray-300 max-w-[80px] truncate",children:i.name})]})]}),e.jsxs("div",{className:"w-full bg-gray-800/50 rounded-lg p-2 flex items-center justify-center gap-2 border border-gray-700",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Claim:"}),e.jsxs("div",{className:`flex items-center gap-1 font-bold ${p.color}`,children:[e.jsx(p.icon,{size:16}),e.jsx("span",{children:p.name})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500 italic text-center w-full",children:["Waiting for ",i.name," to decide..."]})]})})},E=({type:s,onClick:m,disabled:c,highlight:o,small:i,tiny:p,isFaceDown:h})=>{if(h)return e.jsx("div",{onClick:m,className:`relative rounded-xl border-2 border-pink-800 bg-pink-950 shadow-lg flex items-center justify-center
            ${i?"w-12 h-16":"w-24 h-36 md:w-32 md:h-48"} 
            ${c?"opacity-50":"cursor-pointer hover:scale-105 transition-transform"}`,children:e.jsx(De,{className:"text-pink-700 opacity-20",size:i?16:48})});const g=u[s];if(!g)return e.jsx("div",{className:"w-16 h-24 bg-gray-700 rounded"});const t=i?"w-12 h-16 md:w-16 md:h-24":"w-24 h-36 md:w-32 md:h-48",U=i?"w-6 h-6 md:w-8 md:h-8":"w-12 h-12 md:w-16 md:h-16",F=i?"text-[8px] md:text-[10px]":"text-sm md:text-base";return p?e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${g.bg} border border-gray-400`,title:g.name,children:e.jsx(g.icon,{className:`${g.color} w-3 h-3`})}):e.jsxs("button",{onClick:m,disabled:c,className:`relative rounded-xl border-4 shadow-lg transition-all flex flex-col items-center justify-center gap-1 md:gap-2
        ${t}
        ${o?"ring-4 ring-yellow-400 scale-105 z-10":g.border}
        ${g.bg} 
        ${c?"opacity-50 cursor-not-allowed grayscale":"hover:scale-105 cursor-pointer"}
      `,children:[e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(g.icon,{className:`${g.color} ${U} drop-shadow-md`})}),e.jsx("div",{className:`font-black uppercase tracking-wider ${F} ${g.color} w-full text-center pb-2 md:pb-4`,children:e.jsx("span",{children:g.name})})]})},Lt=({logs:s,onClose:m})=>e.jsx("div",{className:"fixed top-16 right-4 w-64 max-h-60 bg-gray-900/95 border border-gray-700 rounded-xl z-155 overflow-y-auto p-2 shadow-2xl",children:e.jsxs("div",{className:"bg-gray-800 w-full md:max-w-md h-full md:h-[70vh] flex flex-col border border-gray-700 md:rounded-xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center bg-gray-800",children:[e.jsx("h3",{className:"text-white font-bold text-lg",children:"Court Records"}),e.jsx("button",{onClick:m,className:"p-2 bg-gray-700 rounded-full",children:e.jsx(Z,{className:"text-gray-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[...s].reverse().map((c,o)=>e.jsx("div",{className:`text-xs md:text-sm p-3 rounded border-l-2 ${c.type==="danger"?"bg-red-900/20 border-red-500 text-red-200":c.type==="success"?"bg-green-900/20 border-green-500 text-green-200":"bg-gray-700/50 border-gray-500 text-gray-300"}`,children:c.text},o))})]})}),Mt=({onStart:s})=>{const[m,c]=x.useState(!1),[o,i]=x.useState(!1),[p,h]=x.useState(!1);return x.useEffect(()=>{const g=localStorage.getItem("royal_menagerie_roomId");c(!!g);const t=new Image;t.src=$e,t.onload=()=>{i(!0),setTimeout(()=>{h(!0)},2e3)}},[]),e.jsxs("div",{className:"fixed inset-0 z-[200] bg-black flex flex-col items-center justify-end pb-20 md:justify-center md:pb-0 font-sans overflow-hidden",children:[!o&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-50 text-pink-500/50",children:[e.jsx(Me,{size:48,className:"animate-spin mb-4"}),e.jsx("div",{className:"font-mono text-xs tracking-[0.3em] animate-pulse",children:"INITIALIZING SYSTEM..."})]}),e.jsxs("div",{className:`absolute inset-0 z-0 overflow-hidden transition-opacity duration-1000 ${o?"opacity-100":"opacity-0"}`,children:[e.jsx("div",{className:`w-full h-full bg-cover bg-center transition-transform duration-[2000ms] ease-out ${o?"scale-100":"scale-130"}`,style:{backgroundImage:`url(${$e})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/40"})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center gap-8 animate-in fade-in slide-in-from-bottom-10 duration-1000",children:e.jsx("div",{className:`transform transition-all duration-1000 ease-out ${p?"translate-y-0 opacity-100":"translate-y-32 opacity-0"}`,children:e.jsxs("button",{onClick:s,className:"group relative px-12 py-5 bg-pink-600/20 hover:bg-pink-600/40 border border-pink-500/50 hover:border-pink-400 text-pink-300 font-black text-2xl tracking-widest rounded-none transform transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(34,211,238,0.4)] backdrop-blur-md overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-pink-400/10 to-transparent translate-y-[-100%] animate-[scan_2s_infinite_linear]"}),e.jsx("span",{className:"relative z-10 flex items-center gap-3 animate-pulse",children:m?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"animate-spin-slow"})," RESUME"]}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{})," PLAY"]})})]})})}),e.jsxs("div",{className:"absolute bottom-4 text-slate-600 text-xs text-center",children:["Inspired by Cockroach Poker. A tribute game.",e.jsx("br",{}),"Developed by ",e.jsx("strong",{children:"RAWFID K SHUVO"}),"."]}),e.jsx("style",{children:`
        @keyframes scan {
          0% { transform: translateY(-100%); }
          100% { transform: translateY(200%); }
        }
      `})]})};function Ot(){const[s,m]=x.useState(null),[c,o]=x.useState("splash"),[i,p]=x.useState(""),[h,g]=x.useState(""),[t,U]=x.useState(null),[F,C]=x.useState(!1),[te,$]=x.useState(""),[se,me]=x.useState(!1),[S,ae]=x.useState(null),[y,H]=x.useState(null),[k,O]=x.useState(null),[ue,fe]=x.useState(!1),[B,re]=x.useState(!1),[pe,z]=x.useState(!1),[ge,Y]=x.useState(!1),[be,he]=x.useState(null),[ye,Be]=x.useState(null),[Ye,je]=x.useState(!1),[we,ve]=x.useState(!1),[T,Ve]=x.useState(()=>localStorage.getItem("gameHub_playerName")||"");x.useEffect(()=>{T&&localStorage.setItem("gameHub_playerName",T)},[T]),x.useEffect(()=>{(async()=>typeof __initial_auth_token<"u"&&__initial_auth_token?await ot(ie,__initial_auth_token):await dt(ie))(),lt(ie,m)},[]);const We=()=>{const n=localStorage.getItem("royal_menagerie_roomId");n&&(C(!0),p(n)),o("menu")};x.useEffect(()=>{const n=Ce(j(w,"game_hub_settings","config"),r=>{r.exists()&&r.data()[Rt]?.maintenance?je(!0):je(!1)});return()=>n()},[]),x.useEffect(()=>{if(!i||!s)return;const n=Ce(j(w,"artifacts",N,"public","data","rooms",i),r=>{if(r.exists()){const l=r.data();if(!l.players.some(d=>d.id===s.uid)){localStorage.removeItem("royal_menagerie_roomId"),p(""),o("menu"),$("You have been removed from the court.");return}U(l),l.status==="lobby"?o("lobby"):o("game")}else localStorage.removeItem("royal_menagerie_roomId"),p(""),o("menu"),$("The court has been dissolved.")});return()=>n()},[i,s]);const P=(n,r,l,d)=>{he({type:n,message:r,subtext:l,icon:d}),setTimeout(()=>he(null),3e3)},qe=async()=>{if(!T)return $("Name required");C(!0);const n="123456789ABCDEFGHIJKLMNPQRSTUVWXYZ";let r="";for(let d=0;d<6;d++)r+=n.charAt(Math.floor(Math.random()*n.length));const l={roomId:r,hostId:s.uid,status:"lobby",players:[{id:s.uid,name:T,hand:[],faceUpCards:[],eliminated:!1,ready:!1}],turnState:null,turnIndex:0,logs:[],winnerId:null};await ct(j(w,"artifacts",N,"public","data","rooms",r),l),localStorage.setItem("royal_menagerie_roomId",r),p(r),o("lobby"),C(!1)},Ke=async()=>{if(!h||!T)return $("Code and Name required");C(!0);const n=j(w,"artifacts",N,"public","data","rooms",h),r=await Te(n);if(!r.exists()){$("Room not found"),C(!1);return}const l=r.data();if(l.status!=="lobby"&&!l.players.find(d=>d.id===s.uid)){$("Game in progress"),C(!1);return}if(l.players.length>=7&&!l.players.find(d=>d.id===s.uid)){$("Room full"),C(!1);return}if(!l.players.find(d=>d.id===s.uid)){const d=[...l.players,{id:s.uid,name:T,hand:[],faceUpCards:[],eliminated:!1,ready:!1}];await I(n,{players:d})}localStorage.setItem("royal_menagerie_roomId",h),p(h),C(!1)},Ne=async()=>{if(!i||!s)return;const n=j(w,"artifacts",N,"public","data","rooms",i),r=await Te(n);if(r.exists()){const l=r.data();if(l.hostId===s.uid||l.players.length<=1)await xt(n);else{const b=l.players.filter(f=>f.id!==s.uid);await I(n,{players:b})}}localStorage.removeItem("royal_menagerie_roomId"),p(""),o("menu"),U(null),z(!1)},Xe=async n=>{if(!t||t.hostId!==s.uid)return;const r=t.players.filter(l=>l.id!==n);await I(j(w,"artifacts",N,"public","data","rooms",i),{players:r})},Je=()=>{const n=t.roomId,r=()=>{ve(!0),setTimeout(()=>ve(!1),2e3),P&&P("neutral","COPIED!","",D)};try{navigator.clipboard.writeText(n),r()}catch{const d=document.createElement("textarea");d.value=n,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d),r()}},Qe=async()=>{if(!t||!s)return;const n=t.players.map(r=>r.id===s.uid?{...r,ready:!r.ready}:r);await I(j(w,"artifacts",N,"public","data","rooms",i),{players:n})},ne=async()=>{if(!t||t.hostId!==s.uid)return;const n=t.players.map(r=>({...r,hand:[],faceUpCards:[],eliminated:!1,ready:!1}));await I(j(w,"artifacts",N,"public","data","rooms",i),{status:"lobby",players:n,turnState:null,logs:[],winnerId:null}),z(!1)},Ze=async()=>{!t||t.hostId!==s.uid||ke()},ke=async()=>{if(t.hostId!==s.uid)return;const n=t.players.map(a=>({...a,hand:[],faceUpCards:[],eliminated:!1,ready:!1})),r=n.length;let l=[];Object.keys(u).forEach(a=>{for(let v=0;v<9;v++)l.push(a)}),l=_t(l);const d=l.length%r;for(let a=0;a<d;a++)l.pop();r<4&&(l.pop(),l.pop(),l.pop());let b=0;for(;l.length>0;)n[b].hand.push(l.pop()),b=(b+1)%r;const f=Math.floor(Math.random()*r);await I(j(w,"artifacts",N,"public","data","rooms",i),{status:"playing",players:n,turnIndex:f,turnState:null,winnerId:null,logs:[{id:Date.now().toString(),text:"The Royal Menagerie is open! Let the deception begin.",type:"neutral"}]})},et=async()=>{if(!S||!y||!k)return;const n=[...t.players],r=n.findIndex(a=>a.id===s.uid),l=n[r],d=l.hand.indexOf(S);if(d===-1)return;l.hand.splice(d,1);const b={activeCard:S,declaredType:k,holderId:y,originId:s.uid,passedTrace:[s.uid]},f=t.players.find(a=>a.id===y)?.name||"Unknown";await I(j(w,"artifacts",N,"public","data","rooms",i),{players:n,turnState:b,logs:J({id:Date.now().toString(),text:`${l.name} passed a card to ${f} claiming it is a ${u[k].name}.`,type:"neutral"})}),ae(null),H(null),O(null)},Ie=async n=>{const r=t.turnState,l=r.activeCard,d=r.declaredType,b=l===d,f=n&&b||!n&&!b,a=f?r.originId:s.uid,v=f?s.uid:r.originId,R=[...t.players],A=R.findIndex(_=>_.id===a);if(A===-1)return;R[A].faceUpCards.push(l);const G=R[A],L=G.name,M=R.find(_=>_.id===v)?.name||"Unknown";let V=f?`${M} correctly guessed! ${L} takes the ${u[l].name}.`:`${M} guessed wrong! They take the ${u[l].name}.`;s.uid===v?P("success","CORRECT!",`${L} takes the card`,D):s.uid===a?P("failure","WRONG!",`You take the ${u[l].name}`,Z):P("neutral","RESULT",V,Fe);const W={};G.faceUpCards.forEach(_=>W[_]=(W[_]||0)+1);let q=!1,K="";Object.values(W).some(_=>_>=4)?(q=!0,K=`collected 4 ${u[l].name}s`):Object.keys(W).length===8?(q=!0,K="collected every animal type"):G.hand.length===0&&(q=!0,K="ran out of cards to play");const X={players:R,turnState:null,turnIndex:A,logs:J({id:Date.now().toString(),text:V,type:f?"success":"danger"})};q&&(X.status="finished",X.winnerId=a,X.logs=J({id:Date.now().toString(),text:`GAME OVER! ${L} ${K} and is the Royal Fool!`,type:"danger"})),await I(j(w,"artifacts",N,"public","data","rooms",i),X)},tt=async()=>{if(!y||!k)return;const n=t.turnState,r=[...n.passedTrace,s.uid],l={...n,holderId:y,originId:s.uid,declaredType:k,passedTrace:r},d=t.players.find(b=>b.id===s.uid)?.name||"Unknown";await I(j(w,"artifacts",N,"public","data","rooms",i),{turnState:l,logs:J({id:Date.now().toString(),text:`${d} looked and passed the card.`,type:"neutral"})}),re(!1),H(null),O(null)},le=(n=[])=>t.players.filter(r=>r.id!==s.uid&&!n.includes(r.id)&&!r.eliminated);if(Ye)return e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white p-4 text-center",children:[e.jsx(Le,{}),e.jsxs("div",{className:"bg-orange-500/10 p-8 rounded-2xl border border-orange-500/30",children:[e.jsx(it,{size:64,className:"text-orange-500 mx-auto mb-4 animate-bounce"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Under Maintenance"}),e.jsx("p",{className:"text-gray-400",children:"The Queen is feeding the royal animals. The animals will return after some rest."})]}),e.jsx("div",{className:"h-8"}),e.jsx("a",{href:"/rawfids-gamehub/",children:e.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:e.jsx("div",{className:"text-center pb-12 animate-pulse",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-4 bg-slate-900/50 rounded-full border border-indigo-500/20 text-indigo-300 font-bold tracking-widest text-sm uppercase backdrop-blur-sm",children:[e.jsx(Se,{size:16})," Visit Gamehub...Try our other releases..."," ",e.jsx(Se,{size:16})]})})})}),e.jsx(oe,{})]});if(!s)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center text-pink-500 animate-pulse",children:"Openning cages..."});if(i&&!t&&!te)return e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white p-4",children:[e.jsx(Q,{}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur p-8 rounded-2xl border border-zinc-700 shadow-2xl flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsx(Me,{size:48,className:"text-pink-500 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Reconnecting..."}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Resuming your session"})]})]})]});if(c==="splash")return e.jsx(Mt,{onStart:We});if(c==="menu")return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-4 relative overflow-hidden font-sans",children:[e.jsx(Q,{}),e.jsx("nav",{className:"absolute top-0 left-0 w-full p-4 z-50",children:e.jsxs("a",{href:"/rawfids-gamehub/",className:`flex items-center gap-2 text-pink-800 rounded-lg 
			font-bold shadow-md hover:text-pink-400 transition-colors w-fit animate-pulse`,children:[e.jsx(ut,{}),e.jsx("span",{children:"Back to Gamehub"})]})}),ge&&e.jsx(Ee,{onClose:()=>Y(!1)}),e.jsxs("div",{className:"z-10 text-center mb-10",children:[e.jsx(ee,{size:80,className:"text-purple-500 mx-auto mb-4 animate-bounce drop-shadow-[0_0_15px_rgba(168,85,247,0.5)]"}),e.jsx("h1",{className:"text-4xl md:text-6xl font-black text-transparent bg-clip-text bg-linear-to-b from-purple-400 to-pink-600 font-serif tracking-widest drop-shadow-md",children:"ROYAL MENAGERIE"}),e.jsx("p",{className:"text-white-400/60 tracking-[0.3em] uppercase mt-2",children:"The Court of Deception"})]}),e.jsxs("div",{className:"bg-gray-900/80 backdrop-blur border border-pink-500/30 p-8 rounded-2xl w-full max-w-md shadow-2xl z-10",children:[te&&e.jsx("div",{className:"bg-red-900/50 text-red-200 p-2 mb-4 rounded text-center text-sm border border-red-800",children:te}),e.jsx("input",{className:"w-full bg-black/50 border border-gray-600 p-3 rounded mb-4 text-white placeholder-gray-500 focus:border-pink-500 outline-none transition-colors",placeholder:"Your Title (Name)",value:T,onChange:n=>Ve(n.target.value)}),e.jsxs("button",{onClick:qe,disabled:F,className:"w-full bg-linear-to-r from-pink-700 to-pink-600 hover:from-pink-600 hover:to-pink-500 p-4 rounded font-bold mb-4 flex items-center justify-center gap-2 border border-pink-500/30 shadow-[0_0_15px_rgba(168,85,247,0.2)] transition-all",children:[e.jsx(_e,{size:20})," Establish Court"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsx("input",{className:"w-full sm:flex-1 bg-black/50 border border-gray-600 p-3 rounded text-white placeholder-gray-500 uppercase font-mono tracking-wider focus:border-pink-500 outline-none",placeholder:"CODE",value:h,onChange:n=>g(n.target.value.toUpperCase())}),e.jsx("button",{onClick:Ke,disabled:F,className:"w-full sm:w-auto bg-gray-800 hover:bg-gray-700 border border-gray-600 px-6 py-3 rounded font-bold transition-colors",children:"Join"})]}),e.jsxs("button",{onClick:()=>Y(!0),className:"w-full text-sm text-gray-400 hover:text-white flex items-center justify-center gap-2 py-2",children:[e.jsx(Re,{size:16})," Royal Guide"]})]})]});if(c==="lobby"&&t){const n=t.hostId===s.uid;return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-6 relative",children:[e.jsx(Q,{}),e.jsx(Le,{}),pe&&e.jsx(Ae,{onCancel:()=>z(!1),onConfirmLeave:Ne,onConfirmLobby:()=>{ne(),z(!1)},isHost:n,inGame:!1}),e.jsxs("div",{className:"z-10 w-full max-w-lg bg-gray-900/90 backdrop-blur p-8 rounded-2xl border border-pink-900/50 shadow-2xl mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-gray-700 pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl text-pink-400 font-bold uppercase",children:"Court Room"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-mono text-white font-black",children:i}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:Je,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:we?e.jsx(D,{size:16,className:"text-green-500"}):e.jsx(ft,{size:16})}),we&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-pink-500 text-black text-xs font-bold px-2 py-1 rounded shadow-lg animate-fade-in-up whitespace-nowrap",children:"Copied!"})]})]})]}),e.jsx("button",{onClick:()=>z(!0),className:"p-2 bg-red-900/30 hover:bg-red-900/50 rounded text-red-300",children:e.jsx(de,{size:16})})]}),e.jsxs("div",{className:"space-y-2 mb-8",children:[t.players.map(r=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-800/50 p-3 rounded border border-gray-700/50",children:[e.jsxs("span",{className:`font-bold flex items-center gap-2 ${r.id===s.uid?"text-pink-400":"text-gray-300"}`,children:[r.id===t.hostId&&e.jsx(_e,{size:14,className:"text-yellow-500"}),r.name]}),n&&r.id!==s.uid&&e.jsx("button",{onClick:()=>Xe(r.id),className:"text-gray-500 hover:text-red-500 transition-colors p-1",title:"Kick Player",children:e.jsx(gt,{size:16})})]},r.id)),t.players.length<2&&e.jsx("div",{className:"text-gray-500 italic text-center",children:"Waiting for diplomats..."})]}),n?e.jsx("button",{onClick:ke,disabled:t.players.length<2,className:`w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all ${t.players.length>=2?"bg-green-700 hover:bg-green-600 text-white":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:t.players.length<2?"Awaiting Diplomats...":"Start the Masquerade"}):e.jsx("div",{className:"text-center text-pink-400/60 animate-pulse font-serif italic",children:"The Host is preparing the deck..."})]}),e.jsx(oe,{})]})}if(c==="game"&&t){const n=t.hostId===s.uid,r=t.players.find(a=>a.id===s.uid),l=t.status==="playing"&&!t.turnState&&t.players[t.turnIndex]?.id===s.uid,d=t.status==="playing"&&t.turnState&&t.turnState.holderId===s.uid,b=t.winnerId,f=t.players.filter(a=>a.id!==t.hostId).every(a=>a.ready);return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col relative overflow-hidden font-sans",children:[e.jsx(Q,{}),be&&e.jsx($t,{...be}),ye&&e.jsx(Et,{...ye,onClose:()=>Be(null)}),se&&e.jsx(Lt,{logs:t.logs,onClose:()=>me(!1)}),ge&&e.jsx(Ee,{onClose:()=>Y(!1)}),t.status==="playing"&&e.jsx(At,{turnState:t.turnState,players:t.players,currentUserId:s.uid}),pe&&e.jsx(Ae,{onCancel:()=>z(!1),onConfirmLeave:Ne,onConfirmLobby:()=>{ne(),z(!1)},isHost:n,inGame:!0}),e.jsxs("div",{className:"h-14 bg-gray-900/80 border-b border-gray-800 flex items-center justify-between px-4 z-160 backdrop-blur-md sticky top-0",children:[e.jsx("span",{className:"font-serif text-pink-500 font-bold tracking-wider",children:"ROYAL MENAGERIE"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Y(!0),className:"p-2 hover:bg-gray-800 rounded text-gray-400",children:e.jsx(Re,{size:18})}),e.jsx("button",{onClick:()=>me(!se),className:`p-2 rounded-full ${se?"bg-pink-900 text-pink-400":"text-gray-400 hover:bg-gray-800"}`,children:e.jsx(bt,{size:18})}),e.jsx("button",{onClick:()=>z(!0),className:"p-2 hover:bg-red-900/50 rounded text-red-400",children:e.jsx(de,{size:18})})]})]}),t.status==="finished"&&e.jsxs("div",{className:"fixed inset-0 top-14 bg-black/95 z-150 flex flex-col items-center justify-center p-4 text-center animate-in fade-in",children:[e.jsx(Pe,{size:64,className:"text-red-500 mb-6 animate-bounce"}),e.jsx("h1",{className:"text-3xl md:text-5xl font-black text-white mb-2 uppercase tracking-widest",children:"Game Over"}),e.jsxs("div",{className:"text-xl md:text-2xl text-gray-300 mb-8 max-w-lg",children:[e.jsx("span",{className:"text-red-400 font-bold text-3xl block mb-2",children:t.players.find(a=>a.id===b)?.name}),"is the Royal Fool!"]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8 max-w-md",children:t.players.map(a=>e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm border ${a.ready?"border-green-500 bg-green-900/20 text-green-300":"border-gray-600 bg-gray-800 text-gray-400"}`,children:[a.name," ",a.ready&&"âœ“"]},a.id))}),e.jsx("div",{className:"w-full max-w-xs space-y-3",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Ze,disabled:!f,className:`w-full py-3 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all ${f?"bg-blue-600 hover:bg-blue-500 text-white shadow-lg hover:scale-105":"bg-gray-800 text-gray-500 cursor-not-allowed border border-gray-700"}`,children:[e.jsx(Oe,{size:20})," Restart Court"]}),e.jsxs("button",{onClick:ne,disabled:!f,className:`w-full py-3 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all ${f?"border-2 border-green-600 text-green-500 hover:bg-green-600/10":"border-2 border-gray-700 text-gray-600 cursor-not-allowed"}`,children:[e.jsx(Ge,{size:20})," Return to Lobby"]}),!f&&e.jsx("p",{className:"text-gray-500 text-sm animate-pulse",children:"Waiting for diplomats to be ready..."})]}):r.ready?e.jsxs("div",{className:"w-full py-3 bg-gray-800 rounded-xl font-bold text-green-400 border border-green-500/50 flex items-center justify-center gap-2",children:[e.jsx(D,{size:20})," Waiting for Host..."]}):e.jsx("button",{onClick:Qe,className:"w-full py-3 rounded-xl font-bold text-lg bg-green-600 hover:bg-green-500 text-white shadow-lg animate-pulse hover:scale-105 transition-all",children:"Ready for Next Game"})})]}),e.jsxs("div",{className:"flex-1 p-2 md:p-4 flex flex-col items-center justify-between relative z-10 max-w-6xl mx-auto w-full",children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-2 w-full mb-4",children:t.players.map((a,v)=>{if(a.id===s.uid)return null;const R=t.turnState?t.turnState.holderId===a.id:t.players[t.turnIndex]&&t.turnIndex===v,A=l&&S||B,G=le(B?t.turnState.passedTrace:[]),L=A&&G.some(M=>M.id===a.id);return e.jsxs("div",{onClick:()=>L?H(a.id):null,className:`relative bg-gray-900/90 p-2 rounded-lg border-2 w-28 md:w-36 flex flex-col items-center transition-all
                                              ${R?"border-yellow-500 shadow-lg shadow-yellow-500/20":"border-gray-700"}
                                              ${L?"cursor-pointer ring-2 ring-green-500 hover:scale-105":""}
                                              ${y===a.id?"bg-green-900/30 ring-4 ring-green-400":""}
                                             `,children:[e.jsxs("div",{className:"flex items-center justify-between w-full mb-2",children:[e.jsx("span",{className:"text-xs font-bold truncate text-gray-300",children:a.name}),e.jsxs("div",{className:"flex items-center gap-1 bg-black/40 px-1.5 rounded",children:[e.jsx(ht,{size:10,className:"text-gray-400"}),e.jsx("span",{className:"text-xs font-bold",children:a.hand.length})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-1 min-h-8",children:[a.faceUpCards.sort().map((M,V)=>e.jsx(E,{type:M,tiny:!0},V)),a.faceUpCards.length===0&&e.jsx("span",{className:"text-[10px] text-gray-600",children:"Safe... for now"})]}),R&&e.jsx("div",{className:"absolute -top-2 bg-yellow-600 text-[10px] font-bold px-2 rounded-full text-white",children:"ACTIVE"})]},a.id)})}),e.jsx("div",{className:"my-2 bg-black/60 px-4 py-2 rounded-full backdrop-blur text-sm md:text-lg text-center font-bold text-gray-200 border border-gray-700",children:t.turnState?d?e.jsx("span",{className:"text-yellow-400 animate-pulse",children:"Incoming Card! Is it true or false?"}):`${t.players.find(a=>a.id===t.turnState.holderId)?.name||"Opponent"} is deciding...`:l?e.jsx("span",{className:"text-green-400",children:"Your Turn! Select a card from hand."}):`Waiting for ${t.players[t.turnIndex]?.name||"Player"}...`}),ue&&e.jsx("div",{className:"fixed inset-0 bg-black/95 z-200 flex items-center justify-center p-4 animate-in zoom-in",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-sm p-6 rounded-2xl border border-gray-600 flex flex-col items-center shadow-2xl relative",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Sneak Peek"}),e.jsx("div",{className:"mb-6",children:e.jsx(E,{type:t.turnState.activeCard})}),e.jsx("div",{className:"flex gap-4 w-full",children:e.jsx("button",{onClick:()=>{fe(!1),re(!0)},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-500 rounded-lg text-white font-bold",children:"Ready to pass"})})]})}),l&&S&&!t.turnState&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none p-4",children:e.jsxs("div",{className:"w-full max-w-lg bg-gray-900 rounded-2xl border border-gray-700 shadow-2xl p-6 animate-in zoom-in pointer-events-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-xs uppercase text-gray-500 font-bold block mb-1",children:"Hidden"}),e.jsx(E,{type:S,small:!0})]}),e.jsx(ce,{className:"text-gray-500"}),e.jsxs("div",{className:"text-center w-32",children:[e.jsx("span",{className:"text-xs uppercase text-gray-500 font-bold block mb-1",children:"Target"}),y?e.jsx("div",{className:"bg-gray-700 p-2 rounded font-bold",children:t.players.find(a=>a.id===y)?.name}):e.jsx("div",{className:"text-yellow-500 text-sm animate-pulse",children:"Tap an Opponent"})]})]}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("span",{className:"text-xs uppercase text-gray-500 font-bold block mb-1",children:"Declare (Lie or Truth)"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.keys(u).map(a=>e.jsxs("button",{onClick:()=>O(a),className:`p-2 rounded text-[10px] md:text-xs font-bold flex flex-col items-center gap-1 border transition-all
                                                                ${k===a?"bg-pink-600 border-pink-400 text-white scale-105 shadow-lg":"bg-gray-800 border-gray-700 text-gray-400 hover:bg-gray-700"}
                                                               `,children:[ze.createElement(u[a].icon,{size:14}),u[a].name]},a))})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full mt-4",children:[e.jsx("button",{onClick:et,disabled:!y||!k,className:"bg-green-600 hover:bg-green-500 disabled:opacity-50 text-white font-bold py-3 px-6 rounded-lg w-full",children:"Pass Card"}),e.jsx("button",{onClick:()=>{ae(null),H(null),O(null)},className:"bg-red-900/50 hover:bg-red-900 text-red-300 py-2 rounded-lg w-full text-sm",children:"Cancel"})]})]})}),B&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none p-4",children:e.jsxs("div",{className:"w-full max-w-lg bg-gray-900 rounded-2xl border border-gray-700 shadow-2xl p-6 animate-in zoom-in pointer-events-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-xs uppercase text-gray-500 font-bold block mb-1",children:"The Card"}),e.jsx(E,{type:t.turnState.activeCard,small:!0})]}),e.jsx(ce,{className:"text-gray-500"}),e.jsxs("div",{className:"text-center w-32",children:[e.jsx("span",{className:"text-xs uppercase text-gray-500 font-bold block mb-1",children:"Next Victim"}),y?e.jsx("div",{className:"bg-gray-700 p-2 rounded font-bold",children:t.players.find(a=>a.id===y)?.name}):e.jsx("div",{className:"text-yellow-500 text-sm animate-pulse",children:"Tap an Opponent"})]})]}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("span",{className:"text-xs uppercase text-gray-500 font-bold block mb-1",children:"Declare (Lie or Truth)"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.keys(u).map(a=>e.jsxs("button",{onClick:()=>O(a),className:`p-2 rounded text-[10px] md:text-xs font-bold flex flex-col items-center gap-1 border transition-all
                                                                ${k===a?"bg-pink-600 border-pink-400 text-white scale-105 shadow-lg":"bg-gray-800 border-gray-700 text-gray-400 hover:bg-gray-700"}
                                                               `,children:[ze.createElement(u[a].icon,{size:14}),u[a].name]},a))})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full mt-4",children:[e.jsx("button",{onClick:tt,disabled:!y||!k,className:"bg-blue-600 hover:bg-blue-500 disabled:opacity-50 text-white font-bold py-3 px-6 rounded-lg w-full",children:"Pass It On"}),e.jsx("button",{onClick:()=>re(!1),className:"text-xs text-gray-500 hover:text-white mt-1",children:"Cancel"})]})]})}),d&&!ue&&!B&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none p-4",children:e.jsxs("div",{className:"w-full max-w-lg bg-gray-900 rounded-2xl border-2 border-yellow-500/50 shadow-2xl p-6 animate-in zoom-in pointer-events-auto",children:[e.jsxs("h3",{className:"text-xl md:text-2xl font-black text-center text-white mb-2",children:[t.players.find(a=>a.id===t.turnState.originId)?.name||"Opponent"," ","offers a card..."]}),e.jsxs("p",{className:"text-center text-gray-300 mb-6 text-lg",children:['"This is a'," ",e.jsx("strong",{className:"text-pink-400 text-xl uppercase",children:u[t.turnState.declaredType].name}),'."']}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-4",children:[e.jsxs("button",{onClick:()=>Ie(!0),className:"flex-1 bg-green-700 hover:bg-green-600 p-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2",children:[e.jsx(D,{}),' "True!"']}),e.jsxs("button",{onClick:()=>Ie(!1),className:"flex-1 bg-red-700 hover:bg-red-600 p-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2",children:[e.jsx(Z,{}),' "False!"']}),le(t.turnState.passedTrace).length>0&&e.jsx("div",{className:"w-px bg-gray-600 mx-2 hidden md:block"}),le(t.turnState.passedTrace).length>0&&e.jsxs("button",{onClick:()=>fe(!0),className:"flex-1 bg-blue-700 hover:bg-blue-600 p-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2",children:[e.jsx(Ue,{})," Peek & Pass"]})]})]})}),e.jsx("div",{className:"w-full max-w-4xl bg-gray-900/95 p-4 rounded-t-3xl border-t border-pink-900/50 backdrop-blur-md",children:r&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xe,{className:"text-pink-400",size:16}),e.jsx("span",{className:"font-bold text-gray-300",children:"My Hand"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:r.hand.map((a,v)=>e.jsxs("div",{className:"relative group shrink-0",children:[S===a&&l&&!t.turnState&&e.jsx("div",{className:"absolute -top-8 left-0 right-0 text-center bg-yellow-500 text-black text-[10px] font-bold px-1 rounded animate-bounce z-20",children:"Selected"}),e.jsx(E,{type:a,small:!0,highlight:S===a,disabled:!l||t.turnState,onClick:()=>!t.turnState&&l?ae(a):null})]},`${a}-${v}`))}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t border-gray-800 w-full overflow-hidden",children:[e.jsxs("span",{className:"text-xs text-red-400 font-bold uppercase shrink-0",children:["My Failures (",r.faceUpCards.length,")"]}),e.jsx("div",{className:"flex gap-1 overflow-x-auto flex-1 pb-1 scrollbar-hide",children:r.faceUpCards.map((a,v)=>e.jsx("div",{className:"shrink-0",children:e.jsx(E,{type:a,tiny:!0})},v))})]})]})})]}),e.jsx(oe,{})]})}return null}mt.createRoot(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(Ot,{})}));
