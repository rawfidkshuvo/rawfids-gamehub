import{c as lt,i as it,g as ot,a as ct,r as E,e as dt,d as m,o as Ce,j as e,H as pt,S as Ae,X as Oe,n as ut,s as xt,h as mt,u as b,p as gt,q as _,t as ft,m as bt}from"./x-vdu6PxPT.js";import{L as ht,S as yt,B as me,C as X,a as jt,b as Se}from"./step-back-DgPuYW0s.js";import{E as ie}from"./eye-ByZgRM3i.js";import{C as J}from"./crown-DhFWzZA3.js";import{U as pe}from"./user-hi-jrCL7.js";import{T as Nt}from"./trash-2-CC3Hg-Aa.js";import{H as _e}from"./history-r3RmdCN7.js";import{C as ne}from"./coins-FTQ8_pUL.js";import{S as Re}from"./skull--JE29QMg.js";import{T as vt}from"./trophy-CV5zFLFQ.js";import{R as De}from"./rotate-ccw-B8nxxfV1.js";import{U as wt}from"./users-Dsm1N_Bg.js";import{C as Pe}from"./circle-x-CjDkV9cY.js";import{D as It}from"./door-open-Dw7N36nG.js";import{S as ze}from"./sword-B_tdzrAl.js";import{S as kt}from"./shield-YRjbg8Vk.js";import{H as Et}from"./hand-D9d9Q_H-.js";const Ct=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],$e=lt("refresh-ccw",Ct),At="/rawfids-gamehub/assets/conspiracy_cover-B0aQRpiO.png",St={apiKey:"AIzaSyBjIjK53vVJW1y5RaqEFGSFp0ECVDBEe1o",authDomain:"game-hub-ff8aa.firebaseapp.com",projectId:"game-hub-ff8aa",storageBucket:"game-hub-ff8aa.firebasestorage.app",messagingSenderId:"586559578902",appId:"1:586559578902:web:91da4fa4ace038d16aa637"},Ge=it(St),ue=ot(Ge),g=ct(Ge),f=typeof __app_id<"u"?__app_id:"conspiracy-game",_t="1",le={HERO:{name:"Hero",color:"bg-purple-600",icon:J,desc:"Grabs 3 coins. Blocks Export."},ROBBER:{name:"Robber",color:"bg-blue-600",icon:Et,desc:"Steal 2 coins. Blocks Stealing."},GENIE:{name:"Genie",color:"bg-pink-600",icon:kt,desc:"Blocks Stab."},MONSTER:{name:"Monster",color:"bg-red-700",icon:ze,desc:"Stab (Pay 3 to kill)."},RIDDLER:{name:"Riddler",color:"bg-emerald-600",icon:$e,desc:"Exchange cards. Blocks Stealing."}},W=[...Array(3).fill("HERO"),...Array(3).fill("ROBBER"),...Array(3).fill("GENIE"),...Array(3).fill("MONSTER"),...Array(3).fill("RIDDLER")],q={EARN:{name:"Earn",cost:0,income:1,blockable:!1,challengeable:!1},EXPORT:{name:"Export",cost:0,income:2,blockable:!0,challengeable:!1,blockedBy:["HERO"]},TAX:{name:"Hero Bonus",cost:0,income:3,blockable:!1,challengeable:!0,claim:"HERO"},STEAL:{name:"Steal",cost:0,income:0,blockable:!0,challengeable:!0,claim:"ROBBER",blockedBy:["ROBBER","RIDDLER"]},STAB:{name:"Stab",cost:3,income:0,blockable:!0,challengeable:!0,claim:"MONSTER",blockedBy:["GENIE"]},EXCHANGE:{name:"Exchange",cost:0,income:0,blockable:!1,challengeable:!0,claim:"RIDDLER"},KILL:{name:"Kill",cost:7,income:0,blockable:!1,challengeable:!1}},ae=n=>{let S=n.length,C;for(;S!==0;)C=Math.floor(Math.random()*S),S--,[n[S],n[C]]=[n[C],n[S]];return n},re=({isShaking:n})=>e.jsxs("div",{className:`absolute inset-0 overflow-hidden pointer-events-none z-0 ${n?"animate-shake bg-red-900/20":""}`,children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,var(--tw-gradient-stops))] from-yellow-900/20 via-gray-950 to-black"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[...Array(20)].map((S,C)=>{const w=Object.keys(le),B=le[w[C%w.length]].icon;return e.jsx("div",{className:"absolute animate-float text-white/60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${10+Math.random()*20}s`,transform:`scale(${.5+Math.random()})`},children:e.jsx(B,{size:32})},C)})}),e.jsx("style",{children:`
      @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
      }
      .animate-float { animation: float infinite ease-in-out; }
      
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
      .animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
    `})]}),Le=({onClose:n})=>{const[S,C]=E.useState("basics"),w=({id:B,label:z,icon:u})=>e.jsxs("button",{onClick:()=>C(B),className:`flex items-center gap-2 px-4 py-3 text-sm font-bold rounded-lg transition-all ${S===B?"bg-purple-600 text-white shadow-lg":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[u&&e.jsx(u,{size:16})," ",z]});return e.jsx("div",{className:"fixed inset-0 bg-black/90 z-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden border border-purple-500/30 shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-950",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 font-serif tracking-wider",children:[e.jsx(me,{className:"text-purple-400"})," Archive of Secrets"]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-800 rounded-full text-gray-400 hover:text-white",children:e.jsx(Oe,{})})]}),e.jsxs("div",{className:"flex gap-2 p-4 bg-gray-900 border-b border-gray-800 overflow-x-auto",children:[e.jsx(w,{id:"basics",label:"Basics",icon:ne}),e.jsx(w,{id:"cards",label:"Roles",icon:J}),e.jsx(w,{id:"actions",label:"Actions",icon:ze}),e.jsx(w,{id:"challenges",label:"Bluffing",icon:Pe})]}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1 text-gray-300 space-y-6",children:[S==="basics"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-400",children:"Objective: Last Survivor"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm md:text-base",children:[e.jsxs("li",{children:["Start with ",e.jsx("strong",{children:"2 Cards"})," (Lives) and"," ",e.jsx("strong",{children:"2 Coins"}),"."]}),e.jsxs("li",{children:["Cards are hidden. You can ",e.jsx("strong",{children:"lie"})," about what you have."]}),e.jsx("li",{children:"Lose a life (flip card) if you are successfully challenged or assassinated."}),e.jsxs("li",{children:["Lose all cards = ",e.jsx("strong",{children:"Eliminated"}),"."]})]})]}),S==="cards"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-in fade-in",children:Object.entries(le).map(([B,z])=>e.jsxs("div",{className:"p-4 rounded-lg border border-gray-700 bg-gray-800 flex items-start gap-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${z.color} text-white shadow-lg`,children:e.jsx(z.icon,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:z.name}),e.jsx("p",{className:"text-sm text-gray-400",children:z.desc})]})]},B))}),S==="actions"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg border-l-4 border-green-500",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"Safe Actions (Unblockable and Unchallengeable)"}),e.jsxs("ul",{className:"list-disc pl-5 text-sm space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Earn:"})," +1 Coin."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Kill:"})," Pay 7 coins to eliminate a life."]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg border-l-4 border-purple-500",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"Unsafe/Role Actions (Can LIE about these! Challengeable and Blockable)"}),e.jsxs("ul",{className:"list-disc pl-5 text-sm space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Export:"})," +2 Coins."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Hero Bonus:"})," +3 Coins."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Steal:"})," Take 2 coins from player."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Stab:"})," Pay 3 coins to kill."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Exchange:"})," Draw 2 new cards, return 2."]})]})]})]}),S==="challenges"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-red-400 mb-2",children:"The Art of Lying"}),e.jsx("p",{className:"text-sm",children:"You can perform ANY action, even if you don't have the card. If someone challenges you, you must prove it."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-red-900/20 p-4 rounded-lg border border-red-500/30",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"If Challenged:"}),e.jsxs("ul",{className:"list-disc pl-5 text-sm mt-2 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Have it?"})," Reveal it. Challenger loses a life. You get a fresh card."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Don't have it?"})," You lose a life."]})]})]}),e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-lg border border-blue-500/30",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"Blocking"}),e.jsx("p",{className:"text-sm",children:"Block attacks by claiming a defensive role (e.g. Genie blocks Stab). Blocks can also be challenged!"})]})]})]})]})]})})},Te=({onConfirm:n,onCancel:S,isHost:C,onReturnToLobby:w})=>e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6 max-w-sm w-full text-center shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Abandon Conspiracy?"}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:C&&w?"As Host, you can return everyone to the lobby or leave the game completely.":C?"WARNING: Leaving as Host will close the room for everyone.":"Leaving now will forfeit your position in the game."}),e.jsxs("div",{className:"flex flex-col gap-3",children:[C&&w&&e.jsx("button",{onClick:w,className:"w-full bg-purple-700 hover:bg-purple-600 text-white py-3 rounded font-bold transition-colors border border-purple-500 shadow-lg mb-2",children:"Return Group to Lobby"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:S,className:"bg-gray-700 hover:bg-gray-600 text-white py-3 rounded font-bold transition-colors",children:"Stay"}),e.jsx("button",{onClick:n,className:"bg-red-600 hover:bg-red-500 text-white py-3 rounded font-bold transition-colors",children:C?"Close Room":"Leave"})]})]})]})}),xe=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(ie,{size:12,className:"text-purple-500"}),e.jsx("span",{className:"text-[10px] font-black tracking-widest text-purple-500 uppercase",children:"CONSPIRACY"})]}),Be=()=>e.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[e.jsx(ie,{size:22,className:"text-purple-500"}),e.jsx("span",{className:"text-[20px] font-black tracking-widest text-purple-500 uppercase",children:"CONSPIRACY"})]}),Rt=({onStart:n})=>{const[S,C]=E.useState(!1);return E.useEffect(()=>{const w=localStorage.getItem("conspiracy_room_id");C(!!w)},[]),e.jsxs("div",{className:"fixed inset-0 z-[200] bg-black flex flex-col items-center justify-end pb-20 md:justify-center md:pb-0 font-sans",children:[e.jsx("div",{className:"absolute inset-0 z-0 bg-cover bg-center opacity-80",style:{backgroundImage:`url(${At})`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/40"})}),e.jsx("div",{className:"relative z-10 flex flex-col items-center gap-8 animate-in fade-in slide-in-from-bottom-10 duration-1000",children:e.jsxs("button",{onClick:n,className:"group relative px-12 py-5 bg-purple-600/20 hover:bg-purple-600/40 border border-purple-500/50 hover:border-purple-400 text-purple-300 font-black text-2xl tracking-widest rounded-none transform transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(34,211,238,0.4)] backdrop-blur-md overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-purple-400/10 to-transparent translate-y-[-100%] animate-[scan_2s_infinite_linear]"}),e.jsx("span",{className:"relative z-10 flex items-center gap-3 animate-pulse",children:S?e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"animate-spin-slow"})," RESUME SESSION"]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{})," JACK IN"]})})]})}),e.jsx("style",{children:`
        @keyframes scan {
          0% { transform: translateY(-100%); }
          100% { transform: translateY(200%); }
        }
      `})]})};function Lt(){const[n,S]=E.useState(null),[C,w]=E.useState("splash"),[B,z]=E.useState(""),[u,F]=E.useState(null),[t,He]=E.useState(null),[oe,$]=E.useState(""),[ge,G]=E.useState(!1),[U,ce]=E.useState([]),[fe,Q]=E.useState(!1),[be,Y]=E.useState(!1),[Z,he]=E.useState(!1),[Me,ye]=E.useState(!1),[je,Ne]=E.useState(!1),[D,Xe]=E.useState(()=>localStorage.getItem("gameHub_playerName")||"");E.useEffect(()=>{D&&localStorage.setItem("gameHub_playerName",D)},[D]),E.useEffect(()=>{(async()=>typeof __initial_auth_token<"u"&&__initial_auth_token?await ut(ue,__initial_auth_token):await xt(ue))();const a=dt(ue,r=>S(r));return()=>a()},[]);const Fe=()=>{const s=localStorage.getItem("conspiracy_room_id");s&&F(s),w("menu")};if(E.useEffect(()=>{if(!u||!n)return;const s=m(g,"artifacts",f,"public","data","rooms",u),a=Ce(s,r=>{if(r.exists()){const d=r.data();if(!d.players?.find(p=>p.id===n.uid)){F(null),w("menu"),$("You have been removed from the room."),localStorage.removeItem("conspiracy_room_id"),localStorage.removeItem("conspiracy_player_name"),G(!1);return}if(d.status==="closed"){F(null),w("menu"),$("The Host has closed the room."),localStorage.removeItem("conspiracy_room_id"),localStorage.removeItem("conspiracy_player_name"),G(!1);return}He({id:r.id,...d}),d.status==="lobby"?w("lobby"):d.status==="playing"||d.status==="finished"?w("game"):w("lobby"),G(!1)}else F(null),w("menu"),$("Room closed or does not exist."),G(!1),localStorage.removeItem("conspiracy_room_id"),localStorage.removeItem("conspiracy_player_name")},r=>console.error(r));return()=>a()},[u,n]),E.useEffect(()=>{const s=Ce(m(g,"game_hub_settings","config"),a=>{a.exists()&&(a.data()[_t]?.maintenance?ye(!0):ye(!1))});return()=>s()},[]),Me)return e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white p-4 text-center",children:[e.jsx(Be,{}),e.jsxs("div",{className:"bg-orange-500/10 p-8 rounded-2xl border border-orange-500/30",children:[e.jsx(pt,{size:64,className:"text-orange-500 mx-auto mb-4 animate-bounce"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Under Maintenance"}),e.jsx("p",{className:"text-gray-400",children:"The Council is in a closed session. No plots can be hatched at this time."})]}),e.jsx("div",{className:"h-8"}),e.jsx("a",{href:"/rawfids-gamehub/",children:e.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:e.jsx("div",{className:"text-center pb-12 animate-pulse",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-4 bg-slate-900/50 rounded-full border border-indigo-500/20 text-indigo-300 font-bold tracking-widest text-sm uppercase backdrop-blur-sm",children:[e.jsx(Ae,{size:16})," Visit Gamehub...Try our other releases..."," ",e.jsx(Ae,{size:16})]})})})}),e.jsx(xe,{})]});const Ke=async()=>{if(!n||!D.trim())return $("Enter a nickname first.");G(!0);const s="123456789ABCDEFGHIJKLMNPQRSTUVWXYZ";let a="";for(let d=0;d<6;d++)a+=s.charAt(Math.floor(Math.random()*s.length));const r={hostId:n.uid,maxPlayers:6,startingCards:2,players:[{id:n.uid,name:D,coins:2,cards:[],isEliminated:!1,ready:!0}],status:"lobby",turnIndex:0,deck:[],logs:[],turnState:"IDLE",currentAction:null};try{await mt(m(g,"artifacts",f,"public","data","rooms",a),r),localStorage.setItem("conspiracy_room_id",a),localStorage.setItem("conspiracy_player_name",D),F(a)}catch{$("Failed to create room.")}G(!1)},Ue=async s=>{!t||t.hostId!==n.uid||await b(m(g,"artifacts",f,"public","data","rooms",u),{startingCards:parseInt(s)})},Ye=async s=>{if(!t||t.hostId!==n.uid)return;const a=t.players.filter(r=>r.id!==s);await b(m(g,"artifacts",f,"public","data","rooms",u),{players:a})},Ve=async()=>{if(!n||!B||!D.trim())return $("Enter nickname & room code.");G(!0);try{const s=m(g,"artifacts",f,"public","data","rooms",B),a=await gt(s);if(!a.exists())throw new Error("Room not found.");const r=a.data();if(r.status==="closed")throw new Error("Room has been closed.");if(r.players.length>=r.maxPlayers)throw new Error("Room full.");const d=r.players.find(o=>o.id===n.uid);if(r.status!=="lobby"&&!d)throw new Error("Game started.");d||await b(s,{players:_({id:n.uid,name:D,coins:2,cards:[],isEliminated:!1,ready:!0})}),localStorage.setItem("conspiracy_room_id",B),localStorage.setItem("conspiracy_player_name",D),F(B)}catch(s){$(s.message)}G(!1)},We=()=>{const s=u,a=()=>{Ne(!0),setTimeout(()=>Ne(!1),2e3),triggerFeedback&&triggerFeedback("neutral","COPIED!","",X)};try{navigator.clipboard.writeText(s),a()}catch{const d=document.createElement("textarea");d.value=s,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d),a()}},ve=async()=>{if(!u||!n||!t)return;if(t.hostId===n.uid)try{await ft(m(g,"artifacts",f,"public","data","rooms",u))}catch(a){console.error("Error deleting room:",a)}else{const a=t.players.filter(c=>c.id!==n.uid);let r=t.status;r==="playing"&&a.length<2&&(r="finished");const d=t.players.findIndex(c=>c.id===n.uid);let o=t.turnIndex;d<t.turnIndex&&(o=Math.max(0,o-1)),o>=a.length&&(o=0);const p=[...t.logs||[]],l=t.players.find(c=>c.id===n.uid);l&&p.push({text:`${l.name} left the game.`,type:"danger"}),r==="finished"&&t.status==="playing"&&p.push({text:"Not enough players. Game Over.",type:"neutral"});try{await b(m(g,"artifacts",f,"public","data","rooms",u),{players:a,status:r,turnIndex:o,logs:p})}catch(c){console.error("Error leaving room",c)}}localStorage.removeItem("conspiracy_room_id"),localStorage.removeItem("conspiracy_player_name"),F(null),w("menu"),Y(!1)},qe=async()=>{if(!t||t.hostId!==n.uid)return;if(t.players.length<2)return $("Need 2+ players.");const s=ae([...W,...W]),a=t.startingCards||2,r=t.players.map(o=>{const p=[];for(let l=0;l<a;l++)p.push({type:s.pop(),flipped:!1});return{...o,coins:2,cards:p,isEliminated:!1,ready:!1}}),d=Math.floor(Math.random()*r.length);await b(m(g,"artifacts",f,"public","data","rooms",u),{status:"playing",deck:s,players:r,turnIndex:d,turnState:"IDLE",logs:_({text:"Game Started!",type:"info"})})},Je=async()=>{if(!t||t.hostId!==n.uid)return;const s=ae([...W,...W]),a=t.startingCards||2,r=t.players.map(o=>{const p=[];for(let l=0;l<a;l++)p.push({type:s.pop(),flipped:!1});return{...o,coins:2,cards:p,isEliminated:!1,ready:!1}}),d=Math.floor(Math.random()*r.length);await b(m(g,"artifacts",f,"public","data","rooms",u),{status:"playing",deck:s,players:r,turnIndex:d,turnState:"IDLE",logs:[{text:"Game Restarted!",type:"info"}],currentAction:null})},we=async()=>{if(!t||t.hostId!==n.uid)return;const s=t.players.map(a=>({...a,coins:2,cards:[],isEliminated:!1,ready:!0}));try{await b(m(g,"artifacts",f,"public","data","rooms",u),{status:"lobby",players:s,deck:[],turnIndex:0,turnState:"IDLE",currentAction:null,logs:[{text:"Host returned the group to the lobby.",type:"neutral"}]}),Y(!1)}catch(a){console.error("Error returning to lobby:",a)}},Qe=async()=>{if(!t)return;const s=t.players.map(a=>a.id===n.uid?{...a,ready:!0}:a);await b(m(g,"artifacts",f,"public","data","rooms",u),{players:s})},ee=()=>t?.players.filter(s=>!s.isEliminated)||[],te=()=>t?.players[t.turnIndex],Ie=()=>te()?.id===n.uid,de=s=>s.filter(r=>!r.isEliminated).length<=1,H=async s=>{let a=(s.turnIndex+1)%s.players.length,r=0;for(;s.players[a].isEliminated&&r<10;)a=(a+1)%s.players.length,r++;r>=10&&(a=s.players.findIndex(d=>!d.isEliminated)),await b(m(g,"artifacts",f,"public","data","rooms",u),{turnIndex:a,turnState:"IDLE",currentAction:null,players:s.players,loseReason:null})},K=async(s,a=null)=>{if(!Ie())return;const r=te(),d=q[s];if(r.coins<d.cost)return;if(r.coins>=10&&s!=="KILL")return alert("Must use Kill!");const o={type:s,actorId:n.uid,targetId:a,status:"PENDING",votes:[],actionPending:!1};if(s==="EARN"){const p=[...t.players];p[t.turnIndex].coins+=1,await b(m(g,"artifacts",f,"public","data","rooms",u),{players:p,logs:_({text:`${r.name} takes Income (+1 coin).`,type:"neutral"})}),await H({...t,players:p});return}if(s==="KILL"){const p=[...t.players];p[t.turnIndex].coins-=7;const l=t.players.find(c=>c.id===a).name;await b(m(g,"artifacts",f,"public","data","rooms",u),{players:p,turnState:"LOSE_CARD",currentAction:o,loserId:a,loseReason:"kill",logs:_({text:`${r.name} killed ${l} (-7 coins).`,type:"danger"})});return}if(s==="STAB"){const p=[...t.players];p[t.turnIndex].coins-=3,await b(m(g,"artifacts",f,"public","data","rooms",u),{players:p,turnState:"ACTION_PENDING",currentAction:o});return}await b(m(g,"artifacts",f,"public","data","rooms",u),{turnState:"ACTION_PENDING",currentAction:o})},Ze=async()=>{if(t.turnState!=="ACTION_PENDING"||!t.currentAction||t.currentAction.votes.includes(n.uid))return;const s=[...t.currentAction.votes,n.uid],a=ee().length;s.length>=a-1?await et():await b(m(g,"artifacts",f,"public","data","rooms",u),{"currentAction.votes":s})},et=async()=>{if(t.turnState!=="ACTION_PENDING")return;q[t.currentAction.type];const s=t.players.find(o=>o.id===t.currentAction.actorId),a=[...t.players];let r="";const d=a.findIndex(o=>o.id===s.id);if(t.currentAction.type==="EXPORT")a[d].coins+=2,r=`${s.name} completes Export and gains 2 coins.`;else if(t.currentAction.type==="TAX")a[d].coins+=3,r=`${s.name} collects Hero Bonus and gains 3 coins.`;else if(t.currentAction.type==="STEAL"){const o=a.findIndex(c=>c.id===t.currentAction.targetId),p=a[o].name,l=Math.min(a[o].coins,2);a[o].coins-=l,a[d].coins+=l,r=`${s.name} steals ${l} coins from ${p}.`}else if(t.currentAction.type==="STAB"){const o=t.players.find(p=>p.id===t.currentAction.targetId).name;await b(m(g,"artifacts",f,"public","data","rooms",u),{players:a,turnState:"LOSE_CARD",loserId:t.currentAction.targetId,loseReason:"stab",logs:_({text:`${s.name} Assassinated ${o}!`,type:"danger"})});return}else if(t.currentAction.type==="EXCHANGE"){const o=[...t.deck];o.length<2&&o.push(...W);const p=[o.pop(),o.pop()];await b(m(g,"artifacts",f,"public","data","rooms",u),{turnState:"EXCHANGE_SELECT",deck:o,tempCards:p,logs:_({text:`${s.name} examines the deck (Exchange).`,type:"neutral"})});return}await b(m(g,"artifacts",f,"public","data","rooms",u),{players:a,logs:_({text:r,type:"success"})}),await H({...t,players:a})},se=async(s,a)=>{const r=t.players.find(p=>p.id===s).name,d=t.players.find(p=>p.id===t.currentAction.actorId).name,o=q[t.currentAction.type].name;await b(m(g,"artifacts",f,"public","data","rooms",u),{turnState:"BLOCK_PENDING",currentAction:{...t.currentAction,blockerId:s,blockClaim:a,votes:[]},logs:_({text:`${r} blocks ${d}'s ${o} claiming ${a}!`,type:"warning"})})},tt=async()=>{if(t.turnState!=="BLOCK_PENDING"||t.currentAction.votes.includes(n.uid))return;const s=[...t.currentAction.votes,n.uid],a=ee().length;s.length>=a-1?(await b(m(g,"artifacts",f,"public","data","rooms",u),{logs:_({text:"Block Accepted. Action Failed (Coins lost).",type:"info"})}),await H({...t})):await b(m(g,"artifacts",f,"public","data","rooms",u),{"currentAction.votes":s})},ke=async s=>{const a=t.turnState==="BLOCK_PENDING",r=a?t.currentAction.blockerId:t.currentAction.actorId,d=a?t.currentAction.blockClaim:q[t.currentAction.type].claim,o=t.players.find(l=>l.id===s).name,p=t.players.find(l=>l.id===r).name;await b(m(g,"artifacts",f,"public","data","rooms",u),{turnState:"CHALLENGE_RESOLVE",challengerId:s,accusedId:r,challengedCard:d,logs:_({text:`${o} challenges ${p}'s claim of ${d}!`,type:"danger"})})},st=async()=>{const s=[...t.players],a=s.find(x=>x.id===n.uid),r=s.findIndex(x=>x.id===n.uid),d=a.cards.map((x,h)=>({...x,index:h})).filter(x=>!x.flipped),o=t.players.find(x=>x.id===t.currentAction.actorId);let p="";if(t.currentAction.targetId){const x=t.players.find(h=>h.id===t.currentAction.targetId);p=x?x.name:"Target"}let l=[],c=!1,j="IDLE",I=null,R=null;if(t.currentAction.blockerId===n.uid){l.push({text:`Blocker ${a.name} admits to lying! Block removed.`,type:"danger"});const x=t.currentAction,h=s.findIndex(A=>A.id===x.actorId);if(x.type==="STEAL"){const A=s.findIndex(T=>T.id===x.targetId),P=Math.min(s[A].coins,2);s[A].coins-=P,s[h].coins+=P,l.push({text:`Block Failed: ${o.name} steals ${P} from ${p}.`,type:"success"})}else x.type==="EXPORT"?(s[h].coins+=2,l.push({text:`Block Failed: ${o.name} gains 2 coins (Export).`,type:"success"})):x.type==="TAX"?(s[h].coins+=3,l.push({text:`Block Failed: ${o.name} gains 3 coins (Hero Bonus).`,type:"success"})):x.type==="STAB"?(c=!0,l.push({text:`Block Failed: ${o.name}'s Assassination proceeds!`,type:"danger"})):x.type==="EXCHANGE"&&(c=!0,l.push({text:`Block Failed: ${o.name} proceeds with Exchange.`,type:"info"}))}else l.push({text:`Actor ${a.name} admits to lying! Action cancelled.`,type:"danger"});d.length===1?(s[r].cards[d[0].index].flipped=!0,s[r].isEliminated=!0,l.push({text:`${a.name} is ELIMINATED!`,type:"danger"})):(j="LOSE_CARD",I=n.uid,R="challenge");const N=de(s);let k={players:s,logs:_(...l),"currentAction.actionPending":c};if(N?(k.status="finished",k.players=s.map(x=>({...x,ready:!1}))):j==="LOSE_CARD"&&(k.turnState="LOSE_CARD",k.loserId=I,R&&(k.loseReason=R)),await b(m(g,"artifacts",f,"public","data","rooms",u),k),!N&&j!=="LOSE_CARD"){if(c){if(t.currentAction.type==="STAB"){const x=t.currentAction,h=s.find(A=>A.id===x.targetId);if(h&&!h.isEliminated){await b(m(g,"artifacts",f,"public","data","rooms",u),{turnState:"LOSE_CARD",loserId:x.targetId,loseReason:"stab","currentAction.actionPending":!1,logs:_({text:"Assassination continues... Target must lose a life.",type:"danger"})});return}else{await b(m(g,"artifacts",f,"public","data","rooms",u),{logs:_({text:"Target eliminated. Assassination complete.",type:"neutral"})}),await H({...t,players:s});return}}else if(t.currentAction.type==="EXCHANGE"){const x=[...t.deck],h=[x.pop(),x.pop()];await b(m(g,"artifacts",f,"public","data","rooms",u),{turnState:"EXCHANGE_SELECT",deck:x,tempCards:h,"currentAction.actionPending":!1});return}}await H({...t,players:s})}},at=async s=>{const a=t.players.find(y=>y.id===n.uid),r=a.cards[s],d=t.challengedCard,o=r.type===d,p=t.players.find(y=>y.id===t.currentAction.actorId),l=t.players.find(y=>y.id===t.challengerId);t.currentAction.targetId&&t.players.find(y=>y.id===t.currentAction.targetId).name;let c=[...t.players],j=[...t.deck],I=[],R="IDLE",M=null,N=null,k=!1;const x=t.currentAction.blockerId&&t.currentAction.blockerId===t.accusedId;if(o){I.push({text:`Challenge Failed: ${a.name} shows ${d}! ${l.name} loses a life.`,type:"success"}),j.push(r.type),j=ae(j);const y=c.findIndex(O=>O.id===n.uid);c[y].cards[s]={type:j.pop(),flipped:!1},R="LOSE_CARD",M=t.challengerId,N="challenge"}else I.push({text:`Challenge Won: ${a.name} caught lying! Choose a card to lose.`,type:"danger"}),R="LOSE_CARD",M=n.uid,N="challenge";const h=t.currentAction,A=c.findIndex(y=>y.id===h.actorId);if(x)if(o)I.push({text:`Block Upheld. ${p.name}'s action blocked.`,type:"warning"});else{if(h.type==="TAX"&&(c[A].coins+=3,I.push({text:"Block Invalid: Hero Bonus succeeds (+3).",type:"success"})),h.type==="EXPORT"&&(c[A].coins+=2,I.push({text:"Block Invalid: Export succeeds (+2).",type:"success"})),h.type==="STEAL"){const y=c.findIndex(i=>i.id===h.targetId),O=Math.min(c[y].coins,2);c[y].coins-=O,c[A].coins+=O,I.push({text:`Block Invalid: Steal succeeds (+${O}).`,type:"success"})}h.type==="STAB"&&(k=!0,I.push({text:"Block Invalid: Stab proceeds! (Double Kill pending)",type:"danger"})),h.type==="EXCHANGE"&&(k=!0)}else if(o){if(h.type==="TAX"&&(c[A].coins+=3),h.type==="EXPORT"&&(c[A].coins+=2),h.type==="STEAL"){const y=c.findIndex(i=>i.id===h.targetId),O=Math.min(c[y].coins,2);c[y].coins-=O,c[A].coins+=O}h.type==="STAB"&&(k=!0),h.type==="EXCHANGE"&&(k=!0),k||I.push({text:"Action Upheld: Success.",type:"success"})}else I.push({text:"Action Failed: Bluff called.",type:"warning"});const P=de(c);let T={players:c,deck:j,logs:_(...I),"currentAction.actionPending":k};if(P?(T.status="finished",T.players=c.map(y=>({...y,ready:!1}))):R==="LOSE_CARD"&&(T.turnState="LOSE_CARD",T.loserId=M,N&&(T.loseReason=N)),await b(m(g,"artifacts",f,"public","data","rooms",u),T),!(P||R==="LOSE_CARD"))if(k&&t.currentAction.type==="EXCHANGE"){const y=[...j],O=[y.pop(),y.pop()];await b(m(g,"artifacts",f,"public","data","rooms",u),{turnState:"EXCHANGE_SELECT",deck:y,tempCards:O,"currentAction.actionPending":!1})}else await H({...t,players:c})},rt=async s=>{if(t.loserId!==n.uid)return;const a=[...t.players],r=a.findIndex(c=>c.id===n.uid);if(a[r].cards[s].flipped)return;a[r].cards[s].flipped=!0;const d=a[r].cards.every(c=>c.flipped);d&&(a[r].isEliminated=!0);const o=[{text:`${a[r].name} lost a life (${t.loseReason}).`,type:"danger"}];d&&o.push({text:`${a[r].name} is ELIMINATED!`,type:"danger"});const p=de(a);let l={players:a,logs:_(...o)};if(p){const c=a.filter(j=>!j.isEliminated);l.status="finished",l.logs=_({text:`Game Over! ${c[0]?.name} Wins!`,type:"success"}),l.players=a.map(j=>({...j,ready:!1})),await b(m(g,"artifacts",f,"public","data","rooms",u),l);return}if(t.currentAction?.actionPending){if(t.currentAction.type==="EXCHANGE"){await b(m(g,"artifacts",f,"public","data","rooms",u),l);const c=[...t.deck],j=[c.pop(),c.pop()];await b(m(g,"artifacts",f,"public","data","rooms",u),{turnState:"EXCHANGE_SELECT",deck:c,tempCards:j,"currentAction.actionPending":!1});return}if(t.currentAction.type==="STAB"){const c=t.currentAction.targetId,j=a.find(I=>I.id===c);if(j&&!j.isEliminated){l.logs=_(...o,{text:"Challenge penalty paid. Assassination continues... (Lose 2nd Life)",type:"danger"}),l.turnState="LOSE_CARD",l.loserId=c,l.loseReason="stab",l["currentAction.actionPending"]=!1,await b(m(g,"artifacts",f,"public","data","rooms",u),l);return}else o.push({text:"Target eliminated. Assassination complete.",type:"neutral"}),l.logs=_(...o)}}await b(m(g,"artifacts",f,"public","data","rooms",u),l),await H({...t,players:a})},nt=async()=>{const s=t.players.find(N=>N.id===n.uid),a=s.cards.filter(N=>!N.flipped).length;if(U.length!==a){alert(`You must select exactly ${a} cards.`);return}const r=[...t.players],d=r.findIndex(N=>N.id===n.uid),p=[...s.cards.filter(N=>!N.flipped).map(N=>N.type),...t.tempCards],l=U.map(N=>p[N]),c=p.filter((N,k)=>!U.includes(k)),j=s.cards.filter(N=>N.flipped),R=[...l.map(N=>({type:N,flipped:!1})),...j],M=[...t.deck,...c];r[d].cards=R,await b(m(g,"artifacts",f,"public","data","rooms",u),{players:r,deck:ae(M),turnState:"IDLE",tempCards:null,currentAction:null}),await H({...t,players:r}),ce([])},Ee=({type:s,flipped:a,onClick:r,selectable:d,selected:o,size:p="md"})=>{const l=le[s];if(!l&&!a)return null;let c="ring-purple-400";o&&(c="ring-emerald-400 ring-offset-emerald-900");const j=`rounded-lg shadow-md border-2 transition-all duration-200 relative ${d||o?`cursor-pointer hover:scale-105 ring-2 ring-offset-2 ${c}`:""}`,I=p==="sm"?"w-14 h-20 text-[10px]":"w-24 h-36 text-sm";return a?e.jsx("div",{className:`${j} ${I} bg-gray-800 border-gray-700 flex items-center justify-center opacity-60`,children:e.jsx(Re,{className:"text-gray-500"})}):e.jsxs("div",{onClick:r,className:`${j} ${I} ${l.color} border-white/20 flex flex-col items-center justify-between p-2 text-white shadow-lg`,children:[e.jsx("div",{className:"font-bold uppercase tracking-wider truncate w-full text-center",children:l.name}),e.jsx(l.icon,{size:p==="sm"?16:32}),p!=="sm"&&e.jsx("div",{className:"text-[10px] leading-tight text-center opacity-90",children:l.desc}),o&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-emerald-500 text-white rounded-full p-1 shadow-lg",children:e.jsx(X,{size:12})})]})};if(!n)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center text-purple-500 animate-pulse",children:"Unfolding truths..."});if(u&&!t&&!oe)return e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white p-4",children:[e.jsx(re,{}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur p-8 rounded-2xl border border-zinc-700 shadow-2xl flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsx(ht,{size:48,className:"text-purple-500 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Reconnecting..."}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Resuming your session"})]})]})]});if(C==="splash")return e.jsx(Rt,{onStart:Fe});if(C==="menu")return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-4 relative overflow-hidden font-sans",children:[e.jsx(re,{}),e.jsx("nav",{className:"absolute top-0 left-0 w-full p-4 z-50",children:e.jsxs("a",{href:"/rawfids-gamehub/",className:"flex items-center gap-2 text-purple-800 rounded-lg font-bold shadow-md hover:text-purple-400 transition-colors w-fit animate-pulse",children:[e.jsx(yt,{}),e.jsx("span",{children:"Back to Gamehub"})]})}),fe&&e.jsx(Le,{onClose:()=>Q(!1)}),e.jsxs("div",{className:"z-10 text-center mb-10",children:[e.jsx(ie,{size:64,className:"text-purple-500 mx-auto mb-4 animate-bounce drop-shadow-[0_0_15px_rgba(168,85,247,0.5)]"}),e.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-linear-to-b from-purple-300 to-purple-600 font-serif tracking-widest drop-shadow-md",children:"CONSPIRACY"}),e.jsx("p",{className:"text-white-400/60 tracking-[0.3em] uppercase mt-2",children:"The Silent Betrayal"})]}),e.jsxs("div",{className:"bg-gray-900/80 backdrop-blur border border-purple-500/30 p-8 rounded-2xl w-full max-w-md shadow-2xl z-10 animate-in slide-in-from-bottom-10 duration-700 delay-100",children:[oe&&e.jsx("div",{className:"bg-red-900/50 text-red-200 p-2 mb-4 rounded text-center text-sm border border-red-800",children:oe}),e.jsx("input",{className:"w-full bg-black/50 border border-gray-600 p-3 rounded mb-4 text-white placeholder-gray-500 focus:border-purple-500 outline-none transition-colors",placeholder:"Agent Codename",value:D,onChange:s=>Xe(s.target.value)}),e.jsxs("button",{onClick:Ke,disabled:ge,className:"w-full bg-linear-to-r from-purple-700 to-purple-600 hover:from-purple-600 hover:to-purple-500 p-4 rounded font-bold mb-4 flex items-center justify-center gap-2 border border-purple-500/30 shadow-[0_0_15px_rgba(147,51,234,0.2)] transition-all",children:[e.jsx(J,{size:20})," Establish Dark Chamber"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsx("input",{className:"w-full sm:flex-1 bg-black/50 border border-gray-600 p-3 rounded text-white placeholder-gray-500 uppercase font-mono tracking-wider focus:border-purple-500 outline-none",placeholder:"ROOM CODE",value:B,onChange:s=>z(s.target.value.toUpperCase())}),e.jsx("button",{onClick:Ve,disabled:ge,className:"w-full sm:w-auto bg-gray-800 hover:bg-gray-700 border border-gray-600 px-6 py-3 rounded font-bold transition-colors",children:"Infiltrate"})]}),e.jsxs("button",{onClick:()=>Q(!0),className:"w-full text-sm text-gray-400 hover:text-white flex items-center justify-center gap-2 py-2",children:[e.jsx(me,{size:16})," Archive of Secrets"]})]}),e.jsxs("div",{className:"absolute bottom-4 text-slate-600 text-xs text-center",children:["Inspired by Coup. A tribute game.",e.jsx("br",{}),"Developed by ",e.jsx("strong",{children:"RAWFID K SHUVO"}),". Visit"," ",e.jsx("a",{href:"/rawfids-gamehub/",rel:"noopener noreferrer",className:"text-purple-500 underline hover:text-green-600",children:"GAMEHUB"})," ","for more games."]})]});if(C==="lobby"&&t){const s=t.hostId===n.uid,a=t.startingCards||2;return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white flex flex-col items-center justify-center p-6 relative",children:[e.jsx(re,{}),e.jsx(Be,{}),e.jsxs("div",{className:"z-10 w-full max-w-lg bg-gray-900/90 backdrop-blur p-8 rounded-2xl border border-purple-900/50 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-gray-700 pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl text-purple-500 font-bold uppercase",children:"Back Room"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-mono text-white font-black",children:u}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:We,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:je?e.jsx(X,{size:16,className:"text-green-500"}):e.jsx(jt,{size:16})}),je&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-purple-500 text-black text-xs font-bold px-2 py-1 rounded shadow-lg animate-fade-in-up whitespace-nowrap",children:"Copied!"})]})]})]}),e.jsx("button",{onClick:()=>Y(!0),className:"p-2 bg-red-900/30 hover:bg-red-900/50 rounded text-red-300",title:"Leave Room",children:e.jsx(Se,{size:16})})]}),s&&e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-6 border border-gray-700",children:[e.jsx("h3",{className:"text-purple-300 font-bold mb-2 uppercase text-xs tracking-wider",children:"Protocol Settings"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Lives per Agent:"}),e.jsx("div",{className:"flex gap-2",children:[2,3].map(r=>e.jsx("button",{onClick:()=>Ue(r),className:`px-3 py-1 rounded text-xs font-bold transition-all ${a===r?"bg-purple-600 text-white shadow-lg":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:r},r))})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-xl p-4 mb-8 border border-gray-800",children:[e.jsxs("h3",{className:"text-gray-500 text-xs uppercase tracking-wider mb-4 flex justify-between",children:[e.jsxs("span",{children:["Operatives (",t.players.length,"/",t.maxPlayers,")"]}),e.jsxs("span",{className:"text-purple-400 font-bold",children:["Mode: ",a," Lives"]})]}),e.jsxs("div",{className:"space-y-2",children:[t.players.map(r=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-800/50 p-3 rounded border border-gray-700/50 group",children:[e.jsxs("span",{className:`font-bold flex items-center gap-2 ${r.id===n.uid?"text-purple-400":"text-gray-300"}`,children:[e.jsx(pe,{size:14,className:r.id===n.uid?"text-purple-400":"text-gray-500"}),r.name,r.id===t.hostId&&e.jsx(J,{size:14,className:"text-yellow-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-green-500 text-xs flex items-center gap-1",children:[e.jsx(X,{size:12})," Ready"]}),s&&r.id!==n.uid&&e.jsx("button",{onClick:()=>Ye(r.id),className:"p-1.5 text-red-500/60 hover:text-red-500 hover:bg-red-900/20 rounded transition-colors",title:"Kick Player",children:e.jsx(Nt,{size:14})})]})]},r.id)),t.players.length<2&&e.jsx("div",{className:"text-center text-gray-500 italic text-sm py-2",children:"Waiting for more agents..."})]})]}),s?e.jsx("button",{onClick:qe,disabled:t.players.length<2,className:`w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all flex items-center justify-center gap-2 ${t.players.length>=2?"bg-green-700 hover:bg-green-600 text-white shadow-green-900/20":"bg-gray-800 cursor-not-allowed text-gray-500"}`,children:t.players.length<2?"Awaiting Agents...":"Commence Operation"}):e.jsx("div",{className:"text-center text-purple-400/60 animate-pulse font-serif italic",children:"Waiting for Host command..."})]}),e.jsx(xe,{}),be&&e.jsx(Te,{onConfirm:ve,onCancel:()=>Y(!1),isHost:t?.hostId===n?.uid})]})}if(C==="game"&&t){const s=t.players.find(i=>i.id===n.uid);if(!s)return null;const a=Ie(),r=t.currentAction?q[t.currentAction.type].name:"",d=t.turnState==="ACTION_PENDING"?t.currentAction.votes.length:0,o=ee().length-1,p=t.currentAction?.votes.includes(n.uid),l=t.currentAction,c=l&&(l.type==="STEAL"||l.type==="STAB"),j=c&&l.votes.includes(l.targetId),I=c&&l.targetId===n.uid;let R=!1;t.turnState==="ACTION_PENDING"&&l.actorId!==n.uid&&!s.isEliminated&&(c?j?I||(R=!0):I&&(R=!0):R=!0);const M=t.turnState==="BLOCK_PENDING"&&t.currentAction.blockerId!==n.uid&&!s.isEliminated,N=t.players.filter(i=>!i.isEliminated);ee().every(i=>i.ready);const k=t.players.every(i=>i.ready);let x=!1;l&&(l.type==="EXPORT"||(l.type==="STEAL"||l.type==="STAB")&&l.targetId===n.uid)&&(x=!0);const h=t.turnState==="EXCHANGE_SELECT"&&s.id===te().id;let A=null,P=null;if(l){const i=t.players.find(L=>L.id===l.targetId),v=t.players.find(L=>L.id===l.actorId);i&&(A=i.name),v&&(P=v.name)}let T="",y="";if(t.turnState==="LOSE_CARD"){const i=t.players.find(L=>L.id===t.loserId),v=i?i.name:"Player";t.loseReason==="challenge"?(T="Challenge Lost",y=`${v} is discarding a card...`):l&&l.type==="KILL"?(T=`${P} performs`,y=`Kill on ${A}`):l&&l.type==="STAB"?(T=`${P} performs`,y=`Stab on ${A}`):(T=`${v} lost a life`,y="Choosing card to lose...")}const O=h||t.status==="finished";return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white overflow-hidden flex flex-col relative font-sans",children:[e.jsx(re,{}),fe&&e.jsx(Le,{onClose:()=>Q(!1)}),e.jsxs("div",{className:"h-14 bg-gray-900/80 border-b border-gray-800 flex items-center justify-between px-4 z-50 backdrop-blur-md sticky top-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-serif text-purple-500 font-bold tracking-wider hidden md:block",children:"CONSPIRACY"}),e.jsx("span",{className:"text-xs text-gray-500 bg-black/50 px-2 py-1 rounded",children:"Back Room"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Q(!0),className:"p-2 hover:bg-gray-800 rounded text-gray-400",title:"Rules",children:e.jsx(me,{size:18})}),e.jsx("button",{onClick:()=>he(!Z),className:`p-2 rounded-full ${Z?"bg-green-900 text-green-400":"text-gray-400 hover:bg-gray-800"}`,children:e.jsx(_e,{size:18})}),e.jsx("button",{onClick:()=>Y(!0),className:"p-2 hover:bg-red-900/50 rounded text-red-400",title:"Leave Game",children:e.jsx(Se,{size:18})})]})]}),e.jsxs("div",{className:"flex-1 relative p-4 flex flex-col z-10 max-w-5xl mx-auto w-full",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-4 z-10",children:t.players.map((i,v)=>i.id===n.uid?null:e.jsxs("div",{className:`bg-gray-900/90 p-3 rounded-lg border transition-all ${t.turnIndex===v?"border-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.3)]":"border-gray-700"} ${i.isEliminated?"opacity-50 grayscale":""} relative`,children:[t.turnIndex===v&&!i.isEliminated&&e.jsx("div",{className:"absolute -top-2.5 left-1/2 -translate-x-1/2 bg-purple-600 text-white text-[9px] font-bold px-2 py-0.5 rounded-full shadow-lg animate-pulse border border-purple-400 tracking-wider z-30",children:"PLAYING"}),i.isEliminated&&e.jsx("div",{className:"absolute inset-x-0 top-1/2 -translate-y-1/2 bg-red-900/90 text-red-200 text-xs font-black uppercase tracking-widest text-center py-1 z-20 border-y border-red-500 rotate-12",children:"Terminated"}),t.status==="finished"&&i.ready&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-green-500 text-white rounded-full p-1 z-30 shadow-lg animate-in zoom-in",children:e.jsx(X,{size:12})}),e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("span",{className:`font-bold text-sm truncate w-20 flex items-center gap-1 ${t.turnIndex===v?"text-purple-300":"text-gray-300"}`,children:[e.jsx(pe,{size:12})," ",i.name]}),e.jsxs("div",{className:"flex items-center space-x-1 bg-black/40 px-2 py-0.5 rounded-full border border-gray-700",children:[e.jsx(ne,{size:10,className:"text-yellow-400"}),e.jsx("span",{className:"text-xs font-mono",children:i.coins})]})]}),e.jsx("div",{className:"flex justify-center space-x-1 mb-2",children:i.cards.map((L,V)=>e.jsx("div",{className:`w-6 h-9 rounded border ${L.flipped?"bg-black border-gray-800":"bg-linear-to-br from-purple-900 to-indigo-900 border-purple-700"} flex items-center justify-center`,children:L.flipped?e.jsx(Re,{size:10,className:"text-gray-700"}):e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500/50"})},V))}),a&&t.turnState==="IDLE"&&!i.isEliminated&&e.jsxs("div",{className:"grid grid-cols-3 gap-1 mt-1",children:[e.jsx("button",{disabled:i.coins<2,onClick:()=>K("STEAL",i.id),className:"disabled:opacity-20 bg-blue-900/40 border border-blue-800 hover:bg-blue-800 text-blue-300 py-1 rounded text-[9px] font-bold",children:"Steal"}),e.jsx("button",{disabled:s.coins<3,onClick:()=>K("STAB",i.id),className:"disabled:opacity-20 bg-red-900/40 border border-red-800 hover:bg-red-800 text-red-300 py-1 rounded text-[9px] font-bold",children:"Stab(3)"}),e.jsx("button",{disabled:s.coins<7,onClick:()=>K("KILL",i.id),className:"disabled:opacity-20 bg-gray-800 border border-red-900/50 hover:bg-red-950 text-red-500 py-1 rounded text-[9px] font-bold",children:"Kill(7)"})]}),t.currentAction?.votes.includes(i.id)&&(t.turnState==="ACTION_PENDING"||t.turnState==="BLOCK_PENDING")&&e.jsx("div",{className:"absolute -top-2 -right-2 z-20 text-green-400 bg-gray-900 rounded-full p-0.5 border border-green-500 shadow-lg",children:e.jsx(X,{size:14,className:"fill-current"})})]},i.id))}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center my-2 space-y-4 z-10 relative",children:[t.status==="finished"&&e.jsxs("div",{className:"absolute inset-0 bg-black/95 flex flex-col items-center justify-center z-50 backdrop-blur-md rounded-xl border border-purple-500/30 p-8",children:[e.jsx(vt,{size:64,className:"text-yellow-400 mb-4 animate-bounce drop-shadow-[0_0_15px_rgba(250,204,21,0.5)]"}),e.jsx("div",{className:"text-4xl font-bold text-white mb-2 font-serif",children:"Victory"}),e.jsxs("div",{className:"text-xl text-purple-400 mb-6",children:["Agent ",N[0]?.name," Survives"]}),e.jsxs("div",{className:"w-full max-w-sm mb-6 bg-gray-900/50 rounded-lg p-4 border border-gray-700",children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:t.players.map(i=>e.jsxs("div",{className:`flex items-center gap-1 text-xs px-2 py-1 rounded border ${i.ready?"bg-green-900/30 border-green-600 text-green-400":"bg-gray-800 border-gray-700 text-gray-500"}`,children:[i.ready?e.jsx(X,{size:10}):e.jsx("div",{className:"w-2.5 h-2.5 rounded-full border border-gray-500"}),i.name]},i.id))}),s.ready?e.jsx("div",{className:"text-center text-green-500 font-bold py-2 bg-green-900/20 rounded",children:"You are Ready"}):e.jsx("button",{onClick:Qe,className:"w-full bg-purple-600 hover:bg-purple-500 text-white font-bold py-3 rounded-lg transition-all animate-pulse",children:"Mark as Ready"})]}),t.hostId===n.uid?e.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[e.jsxs("button",{onClick:Je,disabled:!k,className:`px-8 py-3 rounded-xl font-bold text-lg flex items-center justify-center gap-2 shadow-lg transition-all ${k?"bg-green-700 hover:bg-green-600 cursor-pointer":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(De,{size:18})," New Operation"]}),e.jsxs("button",{onClick:we,disabled:!k,className:`px-8 py-3 rounded-xl font-bold text-lg flex items-center justify-center gap-2 shadow-lg transition-all border ${k?"bg-transparent border-purple-500 text-purple-300 hover:bg-purple-900/20 cursor-pointer":"bg-transparent border-gray-700 text-gray-600 cursor-not-allowed"}`,children:[e.jsx(wt,{size:18})," Return to Lobby"]}),!k&&e.jsx("div",{className:"text-xs text-center text-gray-500 animate-pulse mt-1",children:"Wait for all agents to signal readiness..."})]}):e.jsx("div",{className:"text-gray-500 animate-pulse text-sm mt-4",children:"Waiting for Host Protocol..."})]}),(t.turnState==="ACTION_PENDING"||t.turnState==="LOSE_CARD")&&e.jsxs("div",{className:"w-full max-w-md bg-gray-900/95 p-6 rounded-xl border border-purple-500 shadow-[0_0_30px_rgba(168,85,247,0.15)] relative animate-in zoom-in-95",children:[e.jsx("div",{className:"text-center mb-6",children:t.turnState==="LOSE_CARD"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500 mb-2",children:T}),e.jsx("div",{className:`text-2xl font-black ${t.loseReason==="challenge"?"text-red-500":"text-purple-400"}`,children:y})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500 mb-1",children:"Current Operation"}),e.jsxs("div",{className:"text-xl font-bold text-white mb-2",children:[e.jsx("span",{className:"text-purple-400",children:te().name})," ","uses"," ",e.jsx("span",{className:"text-yellow-400 uppercase",children:r}),A&&e.jsxs("span",{className:"text-gray-400",children:[" ","on ",A]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-4 mb-1",children:[e.jsx("span",{children:"Consensus"}),e.jsxs("span",{children:[d,"/",o]})]}),e.jsx("div",{className:"w-full bg-gray-800 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-full transition-all duration-300",style:{width:`${d/o*100}%`}})})]})}),t.turnState==="ACTION_PENDING"&&R&&!s.isEliminated&&e.jsx("div",{className:"grid grid-cols-2 gap-3",children:p?e.jsx("div",{className:"col-span-2 bg-gray-800 py-3 text-center text-gray-400 text-sm rounded font-mono animate-pulse",children:"... Awaiting Network ..."}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Ze,className:"col-span-2 bg-gray-700 hover:bg-gray-600 border border-gray-600 py-3 rounded font-bold text-white transition-all",children:"Allow / Pass"}),l.type!=="EXPORT"&&e.jsxs("button",{onClick:()=>ke(n.uid),className:"bg-red-900/80 hover:bg-red-800 border border-red-700 py-3 rounded text-xs font-bold flex items-center justify-center gap-1 text-red-200 transition-all",children:[e.jsx(Pe,{size:14})," Challenge Bluff"]}),x&&l.type==="EXPORT"&&e.jsx("button",{onClick:()=>se(n.uid,"HERO"),className:"bg-purple-700 hover:bg-purple-600 border border-purple-500 py-3 rounded text-xs font-bold",children:"Block (Hero)"}),x&&l.type==="STEAL"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>se(n.uid,"ROBBER"),className:"bg-blue-700 hover:bg-blue-600 border border-blue-500 py-3 rounded text-xs font-bold",children:"Block (Robber)"}),e.jsx("button",{onClick:()=>se(n.uid,"RIDDLER"),className:"bg-emerald-700 hover:bg-emerald-600 border border-emerald-500 py-3 rounded text-xs font-bold",children:"Block (Riddler)"})]}),x&&l.type==="STAB"&&e.jsx("button",{onClick:()=>se(n.uid,"GENIE"),className:"bg-pink-700 hover:bg-pink-600 border border-pink-500 py-3 rounded text-xs font-bold",children:"Block (Genie)"})]})}),t.turnState==="ACTION_PENDING"&&!R&&e.jsx("div",{className:"text-center text-xs text-purple-400/60 animate-pulse font-mono mt-4",children:c&&!j?e.jsx("span",{children:"Target is deliberating..."}):e.jsx("span",{children:"Waiting for consensus..."})})]}),t.turnState==="BLOCK_PENDING"&&e.jsxs("div",{className:"bg-gray-900 p-6 rounded-xl border border-purple-500 w-full max-w-md text-center shadow-2xl animate-in zoom-in-95",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"font-bold text-white",children:t.players.find(i=>i.id===t.currentAction.blockerId).name})," ","is blocking with"," ",e.jsx("span",{className:"font-black text-purple-400 text-lg block mt-1",children:t.currentAction.blockClaim})]}),M&&e.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.currentAction.votes.includes(n.uid)?e.jsx("div",{className:"col-span-2 text-gray-500 text-xs italic",children:"Processing..."}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:tt,className:"bg-gray-700 hover:bg-gray-600 text-white py-3 rounded font-bold",children:"Accept Block"}),e.jsx("button",{onClick:()=>ke(n.uid),className:"bg-red-600 hover:bg-red-500 text-white py-3 rounded font-bold shadow-red-900/20",children:"Challenge!"})]})})]}),t.turnState==="CHALLENGE_RESOLVE"&&e.jsxs("div",{className:"text-center w-full max-w-md animate-in fade-in slide-in-from-bottom-4",children:[e.jsx("div",{className:"text-red-400 font-bold text-xs uppercase tracking-widest mb-2 bg-red-950/50 p-2 rounded border border-red-900",children:"Interrogation in Progress"}),t.accusedId===n.uid?e.jsxs("div",{className:"bg-gray-900 p-6 rounded-xl border border-red-500 shadow-[0_0_30px_rgba(239,68,68,0.2)]",children:[e.jsxs("div",{className:"text-lg mb-6 font-medium text-gray-300",children:["Prove you possess the: ",e.jsx("br",{}),e.jsx("span",{className:"text-3xl font-black text-yellow-400 uppercase tracking-wider block mt-2 drop-shadow-md",children:t.challengedCard})]}),e.jsx("div",{className:"flex justify-center gap-3 flex-wrap",children:s.cards.map((i,v)=>i.flipped||i.type!==t.challengedCard?null:e.jsxs("button",{onClick:()=>at(v),className:"bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-bold shadow-lg border-b-4 border-green-800 active:border-b-0 active:translate-y-1 transition-all flex items-center gap-2",children:[e.jsx(X,{size:20})," Reveal ",i.type]},v))}),e.jsx("button",{onClick:st,className:`mt-8 text-sm uppercase tracking-wider font-bold transition-all p-2 rounded ${s.cards.some(i=>!i.flipped&&i.type===t.challengedCard)?"text-gray-600 hover:text-gray-400":"text-red-400 hover:text-white hover:bg-red-900 border border-transparent hover:border-red-500"}`,children:"I Admit Deception (Surrender)"})]}):e.jsxs("div",{className:"text-sm animate-pulse text-gray-400 bg-gray-900/80 p-6 rounded-xl border border-gray-700",children:["Awaiting confession from"," ",e.jsx("span",{className:"text-white font-bold",children:t.players.find(i=>i.id===t.accusedId)?.name}),"..."]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex flex-col items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl bg-gray-900 p-6 rounded-2xl border border-emerald-500/50 shadow-2xl max-h-[85vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2 text-emerald-400 font-serif sticky top-0 bg-gray-900/90 backdrop-blur pb-2 z-10",children:"The Riddler's Exchange"}),e.jsxs("p",{className:"text-gray-400 mb-6",children:["Select exactly"," ",e.jsx("span",{className:"text-white font-bold",children:s.cards.filter(i=>!i.flipped).length})," ","cards to keep."]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8",children:[...s.cards.filter(i=>!i.flipped).map(i=>i.type),...t.tempCards].map((i,v)=>e.jsx("div",{children:e.jsx(Ee,{type:i,flipped:!1,selected:U.includes(v),selectable:!0,onClick:()=>{const L=[...U];if(L.includes(v)){const V=L.indexOf(v);L.splice(V,1),ce(L)}else L.length<s.cards.filter(V=>!V.flipped).length&&ce([...L,v])}})},v))}),e.jsx("button",{onClick:nt,className:"w-full bg-emerald-600 hover:bg-emerald-500 py-4 rounded-xl font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-900/20",disabled:U.length!==s.cards.filter(i=>!i.flipped).length,children:"Confirm Selection"})]})})]}),!h&&t.status!=="finished"&&e.jsx("div",{className:"w-full max-w-md mx-auto mb-2 flex flex-col items-center space-y-1 pointer-events-none z-20 h-16 justify-end",children:t.logs?.slice(-2).reverse().map((i,v)=>e.jsx("div",{className:"text-xs px-3 py-1.5 rounded bg-black/80 backdrop-blur-md border border-gray-800 text-gray-300 shadow-lg transition-opacity duration-500",style:{opacity:Math.max(.4,.9-v*.3)},children:i.text},v))}),!O&&(s.isEliminated?e.jsx("div",{className:"bg-red-950/80 backdrop-blur-sm p-6 text-center border-t border-red-800 text-red-500 font-black tracking-widest z-30 relative shadow-[0_-10px_50px_rgba(220,38,38,0.3)]",children:"ELIMINATED"}):e.jsxs("div",{className:`mt-auto bg-gray-900/95 backdrop-blur-md p-4 rounded-t-2xl border-t border-purple-500/30 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] relative z-30 transition-all ${t.turnState==="LOSE_CARD"&&t.loserId===n.uid?"ring-2 ring-red-500 shadow-red-900/20":""}`,children:[e.jsxs("div",{className:"grid grid-cols-3 items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 justify-start",children:[e.jsx(pe,{size:16,className:"text-purple-400"}),e.jsx("span",{className:"text-sm font-bold text-gray-300 truncate",children:s.name})]}),e.jsx("div",{className:"flex justify-center",children:t.turnState==="LOSE_CARD"&&t.loserId===n.uid?e.jsx("div",{className:"text-red-400 font-black text-[10px] md:text-xs animate-bounce bg-red-900/20 px-2 py-1 rounded border border-red-500/50 whitespace-nowrap",children:" SACRIFICE"}):a&&t.turnState==="IDLE"&&e.jsx("span",{className:"bg-green-600 text-white text-[10px] md:text-xs font-bold px-3 py-0.5 rounded-full shadow-lg animate-bounce border border-green-400 tracking-wider whitespace-nowrap",children:"YOUR TURN"})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600/50 text-yellow-500 px-3 py-1 rounded-full font-bold text-sm flex items-center shadow-sm",children:[e.jsx(ne,{size:14,className:"mr-1.5"})," ",s.coins]})})]}),e.jsx("div",{className:"flex justify-center space-x-3 mb-6 perspective-1000",children:s.cards.map((i,v)=>e.jsx("div",{className:`transition-transform hover:-translate-y-2 duration-300 ${t.turnState==="LOSE_CARD"&&t.loserId===n.uid&&!i.flipped?"animate-pulse cursor-pointer":""}`,children:e.jsx(Ee,{type:i.type,flipped:i.flipped,selectable:t.turnState==="LOSE_CARD"&&t.loserId===n.uid&&!i.flipped,onClick:()=>{t.turnState==="LOSE_CARD"&&t.loserId===n.uid&&!i.flipped&&rt(v)}})},v))}),a&&t.turnState==="IDLE"&&e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("button",{onClick:()=>K("EARN"),className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 p-2 rounded-lg flex flex-col items-center transition-colors group",children:[e.jsx(ne,{size:20,className:"text-gray-400 group-hover:text-yellow-200 mb-1"}),e.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white font-bold",children:"Income (+1)"})]}),e.jsxs("button",{onClick:()=>K("EXPORT"),className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 p-2 rounded-lg flex flex-col items-center transition-colors group",children:[e.jsx(It,{size:20,className:"text-blue-400/70 group-hover:text-blue-300 mb-1"}),e.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white font-bold",children:"Export (+2)"})]}),e.jsxs("button",{onClick:()=>K("TAX"),className:"bg-purple-900/30 hover:bg-purple-900/50 border border-purple-800/50 p-2 rounded-lg flex flex-col items-center transition-colors group",children:[e.jsx(J,{size:20,className:"text-purple-400 mb-1"}),e.jsx("span",{className:"text-[10px] text-purple-300 font-bold",children:"Hero (+3)"})]}),e.jsxs("button",{onClick:()=>K("EXCHANGE"),className:"bg-emerald-900/30 hover:bg-emerald-900/50 border border-emerald-800/50 p-2 rounded-lg flex flex-col items-center transition-colors group",children:[e.jsx($e,{size:20,className:"text-emerald-400 mb-1"}),e.jsx("span",{className:"text-[10px] text-emerald-300 font-bold",children:"Exchange"})]})]})]}))]}),e.jsx("div",{className:"bg-gray-950 pb-1 pt-1 z-50",children:e.jsx(xe,{})}),be&&e.jsx(Te,{onConfirm:ve,onCancel:()=>Y(!1),isHost:t?.hostId===n?.uid,onReturnToLobby:we}),Z&&e.jsx("div",{className:"fixed top-16 right-4 w-64 max-h-60 bg-gray-900/95 border border-gray-700 rounded-xl z-155 overflow-y-auto p-2 shadow-2xl",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl w-full max-w-md h-[70vh] flex flex-col border border-gray-700 shadow-2xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-950 rounded-t-2xl",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 font-serif",children:[e.jsx(_e,{size:18,className:"text-purple-500"})," Mission Log"]}),e.jsx("button",{onClick:()=>he(!Z),children:e.jsx(Oe,{className:"text-gray-400 hover:text-white"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[...t.logs||[]].reverse().map((i,v)=>e.jsx("div",{className:`text-xs p-3 rounded border-l-2 ${i.type==="danger"?"bg-red-900/10 border-red-500 text-red-300":i.type==="success"?"bg-green-900/10 border-green-500 text-green-300":i.type==="warning"?"bg-yellow-900/10 border-yellow-500 text-yellow-300":"bg-gray-800 border-gray-600 text-gray-400"}`,children:i.text},v))})]})})]})}return null}bt.createRoot(document.getElementById("root")).render(e.jsx(E.StrictMode,{children:e.jsx(Lt,{})}));
