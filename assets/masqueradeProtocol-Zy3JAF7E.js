import{c as W,i as kt,g as Et,a as Rt,R as U,j as e,r as y,e as Tt,o as Xe,d as C,H as At,S as Ze,L as rt,X as Z,n as Dt,s as zt,h as _t,p as Ot,u as E,q as M,t as Lt,f as P,m as Mt}from"./x-CZayGA_K.js";import{C as K,S as Pt,B as Ce,a as Ut,L as we,R as $t,P as Gt}from"./step-back-B0OJpjC1.js";import{W as Se,D as ze}from"./wifi-Ca5fnQT4.js";import{B as _e}from"./bug-Byvs5i_t.js";import{C as ie}from"./cpu-ss1vPBLf.js";import{S as Ht}from"./server-s-MhMLRi.js";import{U as ke}from"./user-iW0fLfER.js";import{C as Ee}from"./crown-Dx9ZX0tf.js";import{T as Re}from"./trash-2-CvQllGyi.js";import{H as Vt}from"./history-Zl31ME6M.js";import{C as et}from"./circle-play-BUJqSwRA.js";import{T as Te}from"./triangle-alert-DkjWnX7a.js";import{S as Ae}from"./skull-BGTgQEHs.js";import{T as Ft}from"./terminal-DrEPxxNu.js";import{G as Wt}from"./ghost-BsYVa44o.js";import{S as it}from"./search-B-K_GsOX.js";import{S as Oe}from"./shield-rt-fAWQh.js";import{S as ot}from"./syringe-pHhMlrOS.js";import{L as oe}from"./lock-CZZW-3wT.js";import{Z as De}from"./zap-DHEZY8d6.js";import{C as tt}from"./circle-question-mark-B5mV-RbA.js";import{A as Yt}from"./arrow-right-ComkeddA.js";import{H as Bt}from"./house-BF2Y3ccd.js";const qt=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],Kt=W("arrow-left-right",qt);const Jt=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],le=W("award",Jt);const Qt=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],dt=W("code",Qt);const Xt=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Zt=W("hard-drive",Xt);const es=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ts=W("radio",es);const ss=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]],as=W("scan-eye",ss);const ns=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],ls=W("skip-forward",ns),st="/rawfids-gamehub/assets/masquerade_cover-FoF55m12.png",rs={apiKey:"AIzaSyC1rk47vYi_kdLnywxgPdPlVdbeyAhDpLc",authDomain:"rawfids-gamehub.firebaseapp.com",projectId:"rawfids-gamehub",storageBucket:"rawfids-gamehub.firebasestorage.app",messagingSenderId:"33131208034",appId:"1:33131208034:web:030549a981b3e80d6b603b"},ct=kt(rs),Ne=Et(ct),S=Rt(ct),k=typeof __app_id<"u"?__app_id:"masquerade-protocol-game",is="17",R={FIREWALL:{id:"FIREWALL",name:"Firewall",icon:Oe,color:"text-orange-500",bg:"bg-orange-950/50",border:"border-orange-600",passive:"Higher Tolerance: You are eliminated at 4 Viruses instead of 3.",glitch:"Purge: Discard all VIRUS cards in your hand and draw that many new cards."},SEARCH_ENGINE:{id:"SEARCH_ENGINE",name:"Search Engine",icon:it,color:"text-blue-400",bg:"bg-blue-950/50",border:"border-blue-600",passive:"Scan: Peek at 1 random card from a player's hand once per turn.",glitch:"Index & Extract: Look at target's hand and steal 1 card of your choice."},MINER:{id:"MINER",name:"Data Miner",icon:Zt,color:"text-emerald-400",bg:"bg-emerald-950/50",border:"border-emerald-600",passive:"Draw 2 cards instead of 1 at start of turn.",glitch:"Jackpot: Draw 3 cards immediately."},GHOST:{id:"GHOST",name:"Ghost Process",icon:Wt,color:"text-purple-400",bg:"bg-purple-950/50",border:"border-purple-600",passive:"Cannot be targeted by Glitch effects.",glitch:"Haunt: Swap your entire hand with target player."},ADMIN:{id:"ADMIN",name:"Sys Admin",icon:Ft,color:"text-yellow-400",bg:"bg-yellow-950/50",border:"border-yellow-600",passive:"Hand Limit increased by 2.",glitch:"Sudo: Force target player to discard 2 random cards."}},_={COLLECTOR:{id:"COLLECTOR",name:"The Collector",desc:"Win if you have 5 INTEL cards in hand.",icon:ze,color:"text-cyan-400"},SABOTEUR:{id:"SABOTEUR",name:"The Saboteur",desc:"Win if you hold at least 1 of each card type: INTEL, VIRUS, PING, PATCH.",icon:_e,color:"text-lime-400"},SURVIVOR:{id:"SURVIVOR",name:"The Survivor",desc:"Win if you survive 1 Crash. (Anyone crashes first, you win.)",icon:Oe,color:"text-orange-400"},CORRUPTOR:{id:"CORRUPTOR",name:"The Corruptor",desc:"Win if you hold 4 VIRUS cards. (Overrides Elimination).",icon:Ae,color:"text-fuchsia-400"},HACKER:{id:"HACKER",name:"The Hacker",desc:"Win if you use the PING card 3 times.",icon:ts,color:"text-indigo-400"},ANTIVIRUS:{id:"ANTIVIRUS",name:"Antivirus",desc:"Win if you successfully use a PATCH to remove a VIRUS 2 times.",icon:ot,color:"text-teal-400"}},os={name:"Encrypted Signal",desc:"This player's objective is hidden. It will be revealed if they activate their Glitch.",icon:oe,color:"text-slate-500"},ee={INTEL:{id:"INTEL",name:"Intel Packet",type:"RESOURCE",desc:"Collect these. Trade to swap data.",icon:dt,color:"text-cyan-300"},VIRUS:{id:"VIRUS",name:"Corrupt File",type:"HAZARD",desc:"3 Viruses = Crash. Trade to pass the bomb.",icon:_e,color:"text-lime-400"},PING:{id:"PING",name:"Ping",type:"ACTION",desc:"Target player reveals 1 random card.",icon:Se,color:"text-yellow-400"},PATCH:{id:"PATCH",name:"Patch",type:"ACTION",desc:"Discard this to remove 1 Virus from your hand.",icon:K,color:"text-blue-400"}},at=[...Array(18).fill("INTEL"),...Array(10).fill("VIRUS"),...Array(6).fill("PING"),...Array(6).fill("PATCH")],A=o=>{let u=o.length,j;for(;u!==0;)j=Math.floor(Math.random()*u),u--,[o[u],o[j]]=[o[j],o[u]];return o},re=U.memo(()=>{const o=U.useMemo(()=>[...Array(20)].map((u,j)=>{const v=Object.keys(ee),N=ee[v[j%v.length]].icon;return e.jsx("div",{className:"absolute animate-float text-white/60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${10+Math.random()*20}s`,transform:`scale(${.5+Math.random()})`},children:e.jsx(N,{size:32})},j)}),[]);return e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,var(--tw-gradient-stops))] from-yellow-900/20 via-gray-950 to-black"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:o}),e.jsx("style",{children:`
        @keyframes float {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(10deg); }
        }
        .animate-float { animation: float infinite ease-in-out; }
      `})]})}),Ie=()=>e.jsxs("div",{className:"flex items-center justify-center gap-2 opacity-60 mt-auto pb-4 pt-2 relative z-10 pointer-events-none",children:[e.jsx(ie,{size:16,className:"text-cyan-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black tracking-[0.2em] text-cyan-500 uppercase font-mono shadow-cyan-500/50 drop-shadow-md",children:"MASQUERADE PROTOCOL"})]}),nt=()=>e.jsxs("div",{className:"flex items-center justify-center gap-2 opacity-60 mt-auto pb-4 pt-2 relative z-10 pointer-events-none",children:[e.jsx(ie,{size:22,className:"text-cyan-500 animate-pulse"}),e.jsx("span",{className:"text-[20px] font-black tracking-[0.2em] text-cyan-500 uppercase font-mono shadow-cyan-500/50 drop-shadow-md",children:"MASQUERADE PROTOCOL"})]}),ds=({players:o,onSelect:u,onSkip:j})=>e.jsx("div",{className:"fixed inset-0 bg-black/30 z-190 flex items-center justify-center p-4 animate-in fade-in zoom-in duration-200",children:e.jsxs("div",{className:"bg-slate-900 border-2 border-blue-500/50 p-6 rounded-xl max-w-sm w-full shadow-[0_0_30px_rgba(59,130,246,0.3)] text-center relative",children:[e.jsxs("h3",{className:"text-xl font-black text-blue-400 mb-4 uppercase tracking-widest flex items-center justify-center gap-2",children:[e.jsx(as,{size:24})," Passive Scan"]}),e.jsx("p",{className:"text-slate-400 text-xs mb-6",children:"Search Engine Protocol: Select a target to reveal one random data packet from their hand."}),e.jsx("div",{className:"grid gap-2 mb-4",children:o.map(v=>e.jsxs("button",{onClick:()=>u(v.id),className:"w-full p-3 bg-slate-800 hover:bg-blue-900/30 border border-slate-700 hover:border-blue-500 rounded flex items-center justify-between group transition-all",children:[e.jsx("span",{className:"font-bold text-slate-200 group-hover:text-blue-300",children:v.name}),e.jsxs("div",{className:"text-[10px] bg-slate-950 px-2 py-1 rounded text-slate-500",children:[v.hand.length," Cards"]})]},v.id))}),e.jsx("button",{onClick:j,className:"text-slate-500 hover:text-white text-xs underline",children:"Skip Scan"})]})}),cs=({targetPlayer:o,onSelect:u,onCancel:j})=>e.jsx("div",{className:"fixed inset-0 bg-black/95 z-200 flex items-center justify-center p-4 animate-in fade-in zoom-in duration-200",children:e.jsxs("div",{className:"bg-slate-900 border-2 border-fuchsia-500 p-6 rounded-xl max-w-lg w-full shadow-[0_0_30px_rgba(217,70,239,0.3)] text-center relative",children:[e.jsxs("h3",{className:"text-xl font-black text-fuchsia-400 mb-2 uppercase tracking-widest flex items-center justify-center gap-2",children:[e.jsx(ze,{size:24})," INDEX & EXTRACT"]}),e.jsxs("p",{className:"text-slate-300 text-sm mb-6",children:["Viewing ",e.jsx("strong",{children:o.name}),"'s database. ",e.jsx("br",{}),e.jsx("span",{className:"text-white font-bold",children:"Select 1 packet to download (steal)."})]}),e.jsx("div",{className:"flex justify-center flex-wrap gap-4 mb-6",children:o.hand.map((v,N)=>e.jsxs("div",{className:"hover:scale-110 transition-transform cursor-pointer relative group",onClick:()=>u(v,N),children:[e.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-fuchsia-600 text-white text-[10px] px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"STEAL THIS"}),e.jsx(de,{type:v})]},N))}),e.jsx("button",{onClick:j,className:"text-slate-500 hover:text-white text-xs underline",children:"Cancel Glitch"})]})}),xs=({hand:o,limit:u,onConfirm:j,onCancel:v})=>{const[N,D]=y.useState([]),b=o.length-u,T=n=>{N.includes(n)?D(O=>O.filter($=>$!==n)):N.length<b&&D(O=>[...O,n])};return e.jsx("div",{className:"fixed inset-0 bg-black/95 z-200 flex items-center justify-center p-4 animate-in fade-in zoom-in duration-200",children:e.jsxs("div",{className:"bg-slate-900 border-2 border-red-500/50 p-6 rounded-xl max-w-lg w-full shadow-[0_0_30px_rgba(220,38,38,0.3)] text-center relative",children:[e.jsxs("h3",{className:"text-xl font-black text-red-400 mb-2 uppercase tracking-widest flex items-center justify-center gap-2",children:[e.jsx(Te,{size:24})," Memory Overflow"]}),e.jsxs("p",{className:"text-slate-300 text-sm mb-2",children:["Hand limit exceeded (",o.length,"/",u,")."]}),e.jsxs("p",{className:"text-white font-bold text-lg mb-6",children:["Select ",e.jsx("span",{className:"text-red-400",children:b})," data packet(s) to purge."]}),e.jsx("div",{className:"flex justify-center flex-wrap gap-4 mb-8",children:o.map((n,O)=>{const $=N.includes(O);return e.jsxs("div",{onClick:()=>T(O),className:`transition-all duration-200 cursor-pointer ${$?"scale-90 opacity-50 grayscale ring-2 ring-red-500 rounded-lg":"hover:scale-105"}`,children:[e.jsx(de,{type:n,small:!0}),$&&e.jsx("div",{className:"mt-1 text-[10px] text-red-500 font-bold uppercase tracking-wider",children:"Purging"})]},O)})}),e.jsx("button",{onClick:()=>j(N),disabled:N.length!==b,className:`w-full py-3 rounded font-bold uppercase tracking-wider flex items-center justify-center gap-2 transition-all ${N.length===b?"bg-red-600 hover:bg-red-500 text-white shadow-[0_0_15px_rgba(220,38,38,0.5)]":"bg-slate-800 text-slate-500 cursor-not-allowed"}`,children:N.length===b?e.jsxs(e.Fragment,{children:[e.jsx(Re,{size:18})," Confirm Purge & End Turn"]}):e.jsxs(e.Fragment,{children:["Select ",b-N.length," more"]})})]})})},ms=({item:o,onClose:u,onActivateGlitch:j,canGlitch:v})=>{if(!o)return null;const N=o.passive!==void 0;return e.jsx("div",{className:"fixed inset-0 bg-black/90 z-170 flex items-center justify-center p-4 animate-in fade-in zoom-in duration-200",onClick:u,children:e.jsxs("div",{className:"bg-slate-900 border border-cyan-500/50 p-6 rounded-xl max-w-sm w-full shadow-2xl relative",onClick:D=>D.stopPropagation(),children:[e.jsx("button",{onClick:u,className:"absolute top-2 right-2 text-slate-400 hover:text-white",children:e.jsx(Z,{})}),e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"p-4 rounded-full bg-slate-800 mb-4 border border-slate-600",children:U.createElement(o.icon,{size:48,className:o.color||"text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-1 uppercase tracking-widest",children:o.name}),e.jsx("div",{className:"text-xs text-slate-500 mb-6 uppercase tracking-wider",children:N?"Public Identity":"Hidden Agenda"}),e.jsx("div",{className:"space-y-4 w-full text-left bg-slate-950/50 p-4 rounded border border-slate-800",children:N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-cyan-400 font-bold block text-xs uppercase mb-1",children:"Passive Ability"}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:o.passive})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-fuchsia-400 font-bold block text-xs uppercase mb-1",children:"Glitch (Ultimate)"}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:o.glitch})]})]}):e.jsxs("div",{children:[e.jsx("span",{className:"text-fuchsia-400 font-bold block text-xs uppercase mb-1",children:"Win Condition"}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:o.desc})]})}),j&&e.jsx("div",{className:"mt-6 w-full",children:v?e.jsxs("button",{onClick:j,className:"w-full py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded flex items-center justify-center gap-2 animate-pulse shadow-[0_0_15px_rgba(220,38,38,0.5)]",children:[e.jsx(De,{size:18})," ACTIVATE GLITCH"]}):e.jsx("div",{className:"w-full py-3 bg-slate-800 text-slate-500 font-bold rounded flex items-center justify-center gap-2 cursor-not-allowed",children:"GLITCH UNAVAILABLE"})})]})]})})},us=({data:o,onClose:u})=>o?e.jsx("div",{className:"fixed inset-0 bg-black/95 z-180 flex items-center justify-center p-4 animate-in fade-in zoom-in duration-200",children:e.jsxs("div",{className:"bg-slate-900 border-2 border-yellow-500/50 p-6 rounded-xl max-w-sm w-full shadow-[0_0_30px_rgba(234,179,8,0.3)] text-center relative",children:[e.jsx("button",{onClick:u,className:"absolute top-2 right-2 text-slate-400 hover:text-white",children:e.jsx(Z,{})}),e.jsx("h3",{className:"text-xl font-black text-yellow-400 mb-2 uppercase tracking-widest",children:o.title}),e.jsx("p",{className:"text-slate-300 mb-6 font-bold",children:o.message}),o.cards&&o.cards.length>0&&e.jsx("div",{className:"flex justify-center gap-4 flex-wrap mb-6",children:o.cards.map((j,v)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-1 text-[10px] text-slate-500 uppercase tracking-wider",children:j.label}),e.jsx("div",{className:"scale-90 origin-top",children:e.jsx(de,{type:j.type})})]},v))}),e.jsx("button",{onClick:u,className:"w-full py-3 bg-slate-800 hover:bg-slate-700 text-white font-bold rounded uppercase tracking-wider",children:"Dismiss"})]})}):null,hs=({type:o,message:u,subtext:j,icon:v})=>e.jsx("div",{className:"fixed inset-0 z-160 flex items-center justify-center pointer-events-none animate-in fade-in zoom-in duration-300",children:e.jsxs("div",{className:`
      flex flex-col items-center justify-center p-8 md:p-12 rounded-3xl border-4 shadow-[0_0_50px_rgba(0,0,0,0.5)] backdrop-blur-xl relative overflow-hidden
      ${o==="glitch"?"bg-fuchsia-900/80 border-fuchsia-500 text-fuchsia-100":o==="success"?"bg-green-900/80 border-green-500 text-green-100":o==="failure"?"bg-red-900/80 border-red-500 text-red-100":"bg-cyan-900/80 border-cyan-500 text-cyan-100"}
    `,children:[o==="glitch"&&e.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none bg-[repeating-linear-gradient(0deg,transparent,transparent_2px,#fff_3px)]"}),v&&e.jsx("div",{className:"mb-4 p-4 bg-black/30 rounded-full border border-white/10",children:e.jsx(v,{size:64,className:"animate-pulse"})}),e.jsx("h2",{className:"text-3xl md:text-5xl font-black uppercase tracking-widest text-center drop-shadow-md mb-2 font-mono",children:u}),j&&e.jsx("p",{className:"text-lg md:text-xl font-bold opacity-90 tracking-wide text-center font-mono",children:j})]})}),de=({type:o,onClick:u,disabled:j,highlight:v,small:N,tiny:D})=>{const b=ee[o];if(!b)return e.jsx("div",{className:"w-16 h-24 bg-gray-800 rounded"});if(D)return e.jsx("div",{className:"w-5 h-7 rounded flex items-center justify-center bg-slate-800 border border-slate-600 shadow-sm",title:b.name,children:e.jsx(b.icon,{size:12,className:b.color})});const T=N?"w-16 h-24 p-1":"w-24 h-32 md:w-28 md:h-40 p-2";return e.jsxs("button",{onClick:u,disabled:j,className:`
        relative rounded-lg border border-slate-600 bg-slate-900 shadow-lg transition-all flex flex-col items-center justify-between
        ${T}
        ${v?"ring-2 ring-cyan-400 scale-105 z-10":""}
        ${j?"opacity-50 grayscale cursor-not-allowed":"hover:scale-105 cursor-pointer hover:border-slate-400"}
      `,children:[e.jsx("div",{className:"w-full text-right",children:e.jsx("div",{className:`w-2 h-2 rounded-full ${b.color.replace("text","bg")} ml-auto`})}),e.jsx(b.icon,{size:N?20:32,className:b.color}),e.jsxs("div",{className:"text-center w-full",children:[e.jsx("div",{className:"text-[10px] md:text-xs font-bold text-white leading-none mb-1 font-mono",children:b.name}),!N&&e.jsx("div",{className:"text-[8px] text-slate-400 leading-tight",children:b.type})]})]})},lt=({onClose:o})=>e.jsx("div",{className:"fixed inset-0 bg-black/95 z-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-cyan-500/30 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col shadow-[0_0_50px_rgba(6,182,212,0.2)] overflow-hidden font-mono",children:[e.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-950",children:[e.jsxs("h2",{className:"text-2xl font-bold text-cyan-400 flex items-center gap-2 tracking-wider",children:[e.jsx(Ce,{className:"text-cyan-500"})," SYSTEM MANUAL"]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-800 rounded text-slate-400 hover:text-white",children:e.jsx(Z,{})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8 text-slate-300",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-3 flex items-center gap-2 border-b border-slate-700 pb-2",children:[e.jsx(Ee,{size:20,className:"text-yellow-400"})," Objective"]}),e.jsxs("p",{className:"mb-4",children:["You are a rogue AI. Collect"," ",e.jsx("strong",{className:"text-yellow-400",children:"Golden Chips"})," by winning rounds. The first player to collect"," ",e.jsx("strong",{className:"text-yellow-400",children:"3 Chips"})," becomes the Grand Champion."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-3 flex items-center gap-2 border-b border-slate-700 pb-2",children:[e.jsx(ke,{size:20,className:"text-cyan-400"})," Public Avatars (Roles)"]}),e.jsx("p",{className:"text-xs text-slate-500 mb-4",children:'Every player is assigned a public role visible to everyone. These grant passive bonuses and powerful "Glitch" ultimates.'}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.values(R).map(u=>e.jsxs("div",{className:`p-3 rounded border border-l-4 bg-slate-800/50 ${u.border} border-l-[${u.color.replace("text-","")}]`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[U.createElement(u.icon,{size:20,className:u.color}),e.jsx("strong",{className:`uppercase ${u.color}`,children:u.name})]}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-cyan-500 font-bold min-w-[50px]",children:"PASSIVE:"}),e.jsx("span",{className:"text-slate-300",children:u.passive})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-fuchsia-500 font-bold min-w-[50px]",children:"GLITCH:"}),e.jsx("span",{className:"text-slate-300",children:u.glitch})]})]})]},u.id))})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-3 flex items-center gap-2 border-b border-slate-700 pb-2",children:[e.jsx(oe,{size:20,className:"text-fuchsia-400"})," Secret Directives"]}),e.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Your true win condition. Hidden from others until you activate your Glitch."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.values(_).map(u=>e.jsxs("div",{className:"p-3 rounded border border-l-4 border-l-fuchsia-500 border-slate-700 bg-slate-800/50 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[U.createElement(u.icon,{size:16,className:u.color}),e.jsx("strong",{className:`text-sm uppercase ${u.color}`,children:u.name})]}),e.jsx("div",{className:"text-xs text-slate-300",children:u.desc})]},u.id))})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-3 flex items-center gap-2 border-b border-slate-700 pb-2",children:[e.jsx(ze,{size:20,className:"text-green-400"})," Data Packets"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:Object.values(ee).map(u=>e.jsxs("div",{className:"bg-slate-950 p-3 rounded border border-slate-800 flex flex-col items-center text-center",children:[e.jsx(u.icon,{size:24,className:`mb-2 ${u.color}`}),e.jsx("div",{className:`font-bold text-sm mb-1 ${u.color}`,children:u.name}),e.jsx("div",{className:"text-[10px] bg-slate-900 px-2 py-0.5 rounded text-slate-400 mb-2 uppercase tracking-wider",children:u.type}),e.jsx("p",{className:"text-xs text-slate-400",children:u.desc})]},u.id))})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3 border-b border-slate-700 pb-2",children:"Core Mechanics"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm text-slate-400",children:[e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Crash:"})," Holding 3 Viruses causes Immediate Elimination."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Glitch:"})," A one-time ultimate ability. Activating it reveals your Secret Directive to everyone."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Trade:"})," Select an INTEL or VIRUS card, then select a target. You give them your card, and blindly take one random card from their hand."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Hand Limit:"})," 5 Cards (7 for Admin). You must discard or skip turn if full."]})]})]})]}),e.jsx("div",{className:"p-4 bg-slate-950 border-t border-slate-800",children:e.jsx("button",{onClick:o,className:"w-full bg-cyan-900/50 hover:bg-cyan-800 border border-cyan-500/50 text-cyan-100 py-3 rounded font-bold transition-all",children:"ACKNOWLEDGE"})})]})}),ps=({onStart:o})=>{const[u,j]=y.useState(!1),[v,N]=y.useState(!1),[D,b]=y.useState(!1);return y.useEffect(()=>{const T=localStorage.getItem("masquerade_room_id");j(!!T);const n=new Image;n.src=st,n.onload=()=>{N(!0),setTimeout(()=>{b(!0)},2e3)}},[]),e.jsxs("div",{className:"fixed inset-0 z-[200] bg-black flex flex-col items-center justify-end pb-20 md:justify-center md:pb-0 font-sans overflow-hidden",children:[!v&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-50 text-cyan-500/50",children:[e.jsx(rt,{size:48,className:"animate-spin mb-4"}),e.jsx("div",{className:"font-mono text-xs tracking-[0.3em] animate-pulse",children:"INITIALIZING SYSTEM..."})]}),e.jsxs("div",{className:`absolute inset-0 z-0 overflow-hidden transition-opacity duration-1000 ${v?"opacity-100":"opacity-0"}`,children:[e.jsx("div",{className:`w-full h-full bg-cover bg-center transition-transform duration-[2000ms] ease-out ${v?"scale-100":"scale-130"}`,style:{backgroundImage:`url(${st})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/40"})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center gap-8 animate-in fade-in slide-in-from-bottom-10 duration-1000",children:e.jsx("div",{className:`transform transition-all duration-1000 ease-out ${D?"translate-y-0 opacity-100":"translate-y-32 opacity-0"}`,children:e.jsxs("button",{onClick:o,className:"group relative px-12 py-5 bg-cyan-600/20 hover:bg-cyan-600/40 border border-cyan-500/50 hover:border-cyan-400 text-cyan-300 font-black text-2xl tracking-widest rounded-none transform transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(34,211,238,0.4)] backdrop-blur-md overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-cyan-400/10 to-transparent translate-y-[-100%] animate-[scan_2s_infinite_linear]"}),e.jsx("span",{className:"relative z-10 flex items-center gap-3 animate-pulse",children:u?e.jsxs(e.Fragment,{children:[e.jsx($t,{className:"animate-spin-slow"})," RESUME"]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{})," PLAY"]})})]})})}),e.jsxs("div",{className:"absolute bottom-4 text-slate-600 text-xs text-center",children:["Developed by ",e.jsx("strong",{children:"RAWFID K SHUVO"}),"."]}),e.jsx("style",{children:`
        @keyframes scan {
          0% { transform: translateY(-100%); }
          100% { transform: translateY(200%); }
        }
      `})]})};function fs(){const[o,u]=y.useState(null),[j,v]=y.useState("splash"),[N,D]=y.useState(""),[b,T]=y.useState(""),[n,O]=y.useState(null),[$,V]=y.useState(""),[Le,G]=y.useState(!1),[xt,Me]=y.useState(!1),[Pe,Ue]=y.useState(!1),[$e,te]=y.useState(!1),[ce,Ge]=y.useState(!1),[He,Y]=y.useState(!1),[B,xe]=y.useState(null),[J,Ve]=y.useState(null),[me,Q]=y.useState(!1),[se,F]=y.useState(null),[ue,Fe]=y.useState([]),[mt,We]=y.useState(!1),Ye=y.useRef(0),[ut,he]=y.useState(!1),[pe,fe]=y.useState(null),[ht,be]=y.useState(!1),[ae,ge]=y.useState(null),[L,pt]=y.useState(()=>localStorage.getItem("gameHub_playerName")||"");y.useEffect(()=>{L&&localStorage.setItem("gameHub_playerName",L)},[L]),y.useEffect(()=>{(async()=>typeof __initial_auth_token<"u"&&__initial_auth_token?await Dt(Ne,__initial_auth_token):await zt(Ne))();const t=Tt(Ne,u);return()=>t()},[]);const ft=()=>{const a=localStorage.getItem("masquerade_room_id");a&&(G(!0),T(a)),v("menu")},H=a=>{Fe(t=>[...t,a])};y.useEffect(()=>{if(!b)return;const a=Xe(C(S,"artifacts",k,"public","data","rooms",b),t=>{if(t.exists()){const l=t.data(),i=l.players.find(r=>r.id===o?.uid);if(o&&!i){T(""),localStorage.removeItem("masquerade_room_id"),v("menu"),V("Disconnected from server.");return}O(l),l.status==="lobby"?v("lobby"):(l.status==="playing"||l.status==="finished")&&v("game");const d=l.players.find(r=>r.id===o.uid),f=l.players.findIndex(r=>r.id===o.uid);if(d&&l.turnIndex===f&&d.avatar==="SEARCH_ENGINE"&&!d.passiveUsed?We(!0):We(!1),l.lastEvent&&l.lastEvent.id>Ye.current){const r=l.lastEvent;if(Ye.current=r.id,o&&r.targetId===o.uid){let c=null;r.type==="PING"?c={title:"SYSTEM ALERT: PINGED",message:`${r.initiatorName} revealed your data:`,cards:[{type:r.payload.revealedCard,label:"Revealed"}]}:r.type==="TRADE"?c={title:"DATA TRANSFER",message:`${r.initiatorName} traded with you.`,cards:[{type:r.payload.given,label:"You Received"},{type:r.payload.received,label:"You Gave"}]}:r.type==="GLITCH_ADMIN"?c={title:"SYSTEM BREACH: SUDO",message:`${r.initiatorName} forced deletion of data.`,cards:r.payload.deleted.map(h=>({type:h,label:"Lost"}))}:r.type==="GLITCH_GHOST"?c={title:"SYSTEM BREACH: HAUNT",message:`${r.initiatorName} swapped hands with you.`,cards:[]}:r.type==="GLITCH_SEARCH"?c={title:"SECURITY ALERT",message:`${r.initiatorName} indexed (viewed) your entire hand.`,cards:[]}:r.type==="SYSTEM_DISCARD"&&(c={title:"MEMORY OVERFLOW",message:"Hand limit exceeded. Auto-purged data:",cards:r.payload.discards.map(h=>({type:h,label:"Purged"}))}),c&&r.payload&&r.payload.discards&&r.type!=="SYSTEM_DISCARD"&&(c.message+=" (Memory Overflow Purge)",c.cards.push(...r.payload.discards.map(h=>({type:h,label:"Purged"})))),c&&H(c)}}}else v("menu"),T(""),localStorage.removeItem("masquerade_room_id"),V("Connection Terminated (Room Closed).")});return()=>a()},[b,o]),y.useEffect(()=>{const a=Xe(C(S,"game_hub_settings","config"),t=>{t.exists()&&t.data()[is]?.maintenance?Me(!0):Me(!1)});return()=>a()},[]);const q=(a,t,l,i)=>{Ve({type:a,message:t,subtext:l,icon:i}),setTimeout(()=>Ve(null),2500)},ne=(a,t,l)=>{let i=0;return a.forEach(d=>{if(d.isEliminated||d.directive==="CORRUPTOR")return;let f=3;d.avatar==="FIREWALL"&&(f=4),d.hand.filter(c=>c==="VIRUS").length>=f&&(d.isEliminated=!0,t.push(...d.hand),d.hand=[],i++)}),i},bt=async()=>{if(!L)return V("Identify yourself.");G(!0);const a="123456789ABCDEFGHIJKLMNPQRSTUVWXYZ";let t="";for(let i=0;i<6;i++)t+=a.charAt(Math.floor(Math.random()*a.length));const l={roomId:t,hostId:o.uid,status:"lobby",players:[{id:o.uid,name:L,avatar:null,directive:null,hand:[],revealed:!1,glitchUsed:!1,isEliminated:!1,ready:!1,passiveUsed:!1,pingCount:0,antivirusCount:0,chips:0}],deck:[],discardPile:[],turnIndex:0,crashCount:0,roundCount:1,logs:[],winnerId:null};await _t(C(S,"artifacts",k,"public","data","rooms",t),l),T(t),localStorage.setItem("masquerade_room_id",t),G(!1)},gt=async()=>{if(!N||!L)return V("Input credentials.");G(!0);const a=C(S,"artifacts",k,"public","data","rooms",N),t=await Ot(a);if(!t.exists()){V("Server not found."),G(!1);return}const l=t.data();if(l.status!=="lobby"){V("Session locked."),G(!1);return}if(l.players.length>=6){V("Server full."),G(!1);return}if(!l.players.find(d=>d.id===o.uid)){const d=[...l.players,{id:o.uid,name:L,avatar:null,directive:null,hand:[],revealed:!1,glitchUsed:!1,isEliminated:!1,ready:!1,passiveUsed:!1,pingCount:0,antivirusCount:0,chips:0}];await E(a,{players:d})}T(N),localStorage.setItem("masquerade_room_id",N),G(!1)},yt=async a=>{if(!b)return;const t=C(S,"artifacts",k,"public","data","rooms",b),l=n.players.filter(i=>i.id!==a);await E(t,{players:l,logs:M({text:"A player was removed from the session.",type:"danger",id:Date.now(),viewerId:"all"})})},vt=()=>{const a=n.roomId,t=()=>{Ue(!0),setTimeout(()=>Ue(!1),2e3),q&&q("neutral","COPIED!","",K)};try{navigator.clipboard.writeText(a),t()}catch{const i=document.createElement("textarea");i.value=a,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),t()}},jt=async()=>{if(n.hostId!==o.uid)return;const a=A(Object.keys(R)),t=A(Object.keys(_));let l=A([...at]);const i=n.players.map((c,h)=>{let g=[],w=!1;for(;!w;)g=[l.pop(),l.pop()],g.filter(s=>s==="VIRUS").length<2?w=!0:(l.push(...g),l=A(l),g=[]);return{...c,avatar:a[h%a.length],directive:t[h%t.length],hand:g,ready:!1,passiveUsed:!1,pingCount:0,antivirusCount:0}}),d=Math.floor(Math.random()*i.length),f=i[d];let r=1;f.avatar==="MINER"&&(r=2);for(let c=0;c<r;c++)l.length>0&&f.hand.push(l.pop());await E(C(S,"artifacts",k,"public","data","rooms",b),{status:"playing",players:i,deck:l,discardPile:[],turnIndex:d,crashCount:0,logs:[{text:`Round ${n.roundCount||1} Initialized. Safety protocols active.`,type:"neutral",id:Date.now(),viewerId:"all"}]})},Be=async()=>{if(!b)return;const a=C(S,"artifacts",k,"public","data","rooms",b);if(n.hostId===o.uid)await Lt(a);else{let l={players:n.players.filter(i=>i.id!==o.uid)};l.logs=M({text:`${n.players.find(i=>i.id===o.uid)?.name||"User"} disconnected.`,type:"danger",id:Date.now(),viewerId:"all"}),await E(a,l)}T(""),localStorage.removeItem("masquerade_room_id"),v("menu"),Y(!1)},qe=async()=>{if(n.hostId!==o.uid)return;const a=n.players.map(t=>({...t,hand:[],avatar:null,directive:null,revealed:!1,glitchUsed:!1,isEliminated:!1,ready:!1,passiveUsed:!1,pingCount:0,antivirusCount:0,chips:0}));await E(C(S,"artifacts",k,"public","data","rooms",b),{status:"lobby",players:a,deck:[],discardPile:[],winnerId:null,logs:[],lastEvent:null,crashCount:0,roundCount:1}),Y(!1)},wt=async()=>{if(n.hostId!==o.uid)return;const a=n.winnerId;let t=0;a?(t=n.players.findIndex(h=>h.id===a),t===-1&&(t=Math.floor(Math.random()*n.players.length))):t=Math.floor(Math.random()*n.players.length);const l=A(Object.keys(R)),i=A(Object.keys(_));let d=A([...at]);const f=n.players.map((h,g)=>{let w=[],m=!1;for(;!m;)w=[d.pop(),d.pop()],w.filter(x=>x==="VIRUS").length<2?m=!0:(d.push(...w),d=A(d),w=[]);return{...h,avatar:l[g%l.length],directive:i[g%i.length],hand:w,ready:!1,passiveUsed:!1,pingCount:0,antivirusCount:0,isEliminated:!1,revealed:!1,glitchUsed:!1}}),r=f[t];let c=1;r.avatar==="MINER"&&(c=2);for(let h=0;h<c;h++)d.length>0&&r.hand.push(d.pop());await E(C(S,"artifacts",k,"public","data","rooms",b),{status:"playing",players:f,deck:d,discardPile:[],turnIndex:t,crashCount:0,winnerId:null,roundCount:P(1),logs:[{text:`Round ${n.roundCount+1} Initialized. First Player: ${r.name}`,type:"neutral",id:Date.now(),viewerId:"all"}]})},Nt=async()=>{if(!b)return;const a=C(S,"artifacts",k,"public","data","rooms",b),t=n.players.findIndex(i=>i.id===o.uid);if(t===-1)return;const l=[...n.players];l[t].ready=!0,await E(a,{players:l})},X=async(a,t,l=0)=>{const i=a.filter(r=>!r.isEliminated);if(i.length===1)return i[0].id;const f=(n.crashCount||0)+l;for(const r of a){if(r.isEliminated)continue;const c=r.directive,h=r.hand;let g=!1;if(c==="COLLECTOR"?h.filter(w=>w==="INTEL").length>=5&&(g=!0):c==="CORRUPTOR"?h.filter(w=>w==="VIRUS").length>=4&&(g=!0):c==="SABOTEUR"?h.includes("INTEL")&&h.includes("VIRUS")&&h.includes("PING")&&h.includes("PATCH")&&(g=!0):c==="SURVIVOR"?f>=1&&(g=!0):c==="HACKER"?(r.pingCount||0)>=3&&(g=!0):c==="ANTIVIRUS"&&(r.antivirusCount||0)>=2&&(g=!0),g)return r.id}return null},It=async a=>{const t=pe||{players:JSON.parse(JSON.stringify(n.players)),deck:[...n.deck],discardPile:[...n.discardPile],logs:[],eventData:null},l=t.players.findIndex(d=>d.id===o.uid),i=t.players[l];a.sort((d,f)=>f-d),a.forEach(d=>{const f=i.hand.splice(d,1)[0];t.discardPile.push(f)}),t.logs.push({text:`${i.name} purged memory.`,type:"neutral",id:Date.now(),viewerId:"all"}),fe(null),he(!1),await ve(t.players,t.deck,t.discardPile,t.logs,t.eventData)},ye=async(a,t,l,i,d)=>{const f=n.players.findIndex(h=>h.id===o.uid),r=a[f],c=r.avatar==="ADMIN"?7:5;r.hand.length>c?(fe({players:a,deck:t,discardPile:l,logs:i,eventData:d}),he(!0)):await ve(a,t,l,i,d)},ve=async(a,t,l,i,d=null)=>{let f=await X(a);if(f){const s=a.findIndex(I=>I.id===f);a[s].chips=(a[s].chips||0)+1,a.forEach(I=>{I.revealed=!0});const p={players:a.map(I=>({...I,ready:!1})),status:"finished",winnerId:f,discardPile:l,logs:M(...i,{text:`Round Winner Identified: ${a[s].name}. Chip awarded.`,type:"success",id:Date.now()+2,viewerId:"all"})};d&&(p.lastEvent=d),await E(C(S,"artifacts",k,"public","data","rooms",b),p);return}let r=!1,c=(n.turnIndex+1)%a.length,h=0,g=0;const w=a.length*2;for(;!r&&g<w;){g++;let s=0;for(;a[c].isEliminated&&s<a.length;)c=(c+1)%a.length,s++;const x=a[c];if(x.passiveUsed=!1,s>=a.length)break;let p=1;x.avatar==="MINER"&&(p=2);for(let z=0;z<p;z++){if(t.length===0)if(l.length>0)t=A([...l]),l=[],i.push({text:"Deck rebooted.",type:"neutral",id:Date.now()+3+g,viewerId:"all"});else break;t.length>0&&x.hand.push(t.pop())}const I=ne(a,l);h+=I,x.isEliminated?i.push({text:`${x.name} crashed immediately upon receiving data. Passing control...`,type:"danger",id:Date.now()+5+g,viewerId:"all"}):r=!0}if(f=await X(a,i,h),f){const s=a.findIndex(I=>I.id===f);a[s].chips=(a[s].chips||0)+1;const p={players:a.map(I=>({...I,ready:!1})),status:"finished",winnerId:f,discardPile:l,logs:M(...i,{text:`Round Winner: ${a[s].name}.`,type:"success",id:Date.now()+4,viewerId:"all"}),crashCount:P(h)};d&&(p.lastEvent=d),await E(C(S,"artifacts",k,"public","data","rooms",b),p);return}i.push({text:`Processing cycle: ${a[c].name}`,type:"neutral",id:Date.now()+10,viewerId:"all"});const m={players:a,deck:t,discardPile:l,turnIndex:c,logs:M(...i),crashCount:P(h)};d&&(m.lastEvent=d),await E(C(S,"artifacts",k,"public","data","rooms",b),m)},Ke=async a=>{if(!b)return;const t=n.players.findIndex(r=>r.id===o.uid),l=n.players[t];if(l.passiveUsed)return;const i=C(S,"artifacts",k,"public","data","rooms",b),d=[...n.players];d[t].passiveUsed=!0;const f={players:d,logs:M({text:`${l.name} ${a?"ran a passive background scan.":"skipped passive scan."}`,type:"neutral",id:Date.now(),viewerId:"all"})};if(a){const r=n.players.find(c=>c.id===a);if(r&&r.hand.length>0){const c=Math.floor(Math.random()*r.hand.length),h=r.hand[c];H({title:"PASSIVE SCAN RESULT",message:`Scanner intercepted ${r.name}'s packet:`,cards:[{type:h,label:"Intercepted"}]})}}await E(i,f)},Ct=async(a,t)=>{if(!b||!ae)return;const l=n.players.findIndex(s=>s.id===o.uid),i=n.players[l],d=n.players.findIndex(s=>s.id===ae),f=n.players[d];be(!1),ge(null);const r=JSON.parse(JSON.stringify(n.players)),c=[];r[l].glitchUsed=!0,r[l].revealed=!0,r[d].hand.splice(t,1),r[l].hand.push(a),c.push({text:`⚠️ GLITCH: ${i.name} Indexed ${f.name} and extracted a card.`,type:"glitch",id:Date.now(),viewerId:"all"}),q("glitch","DOWNLOAD COMPLETE",`Acquired ${a}`,it);let h=[...n.discardPile],g=[...n.deck];const w=ne(r,h),m=await X(r,c,w);if(m){const s=r.findIndex(p=>p.id===m);r[s].chips=(r[s].chips||0)+1,r.forEach(p=>{p.revealed=!0});const x={players:r.map(p=>({...p,ready:!1})),status:"finished",winnerId:m,discardPile:h,logs:M(...c),crashCount:P(w)};await E(C(S,"artifacts",k,"public","data","rooms",b),x);return}w>0&&await E(C(S,"artifacts",k,"public","data","rooms",b),{crashCount:P(w)}),await ye(r,g,h,c)},Je=async(a=null)=>{if(B===null)return;const t=n.players.findIndex(m=>m.id===o.uid),l=n.players[t],i=l.hand[B],d=JSON.parse(JSON.stringify(n.players));let f=[...n.deck],r=[...n.discardPile||[]];const c=[];let h=null;if(d[t].hand.splice(B,1),i==="PATCH"){r.push("PATCH");const m=d[t].hand.indexOf("VIRUS");m>-1?(d[t].hand.splice(m,1),r.push("VIRUS"),d[t].antivirusCount=(d[t].antivirusCount||0)+1,c.push({text:`${l.name} ran a Patch. Virus purged.`,type:"success",id:Date.now(),viewerId:"all"})):c.push({text:`${l.name} ran a Patch but had no Virus.`,type:"neutral",id:Date.now(),viewerId:"all"})}else if(i==="PING"){if(r.push("PING"),d[t].pingCount=(d[t].pingCount||0)+1,!a)return;const m=d.find(s=>s.id===a);if(m.hand.length>0){const s=Math.floor(Math.random()*m.hand.length),x=m.hand[s];h={id:Date.now(),type:"PING",initiatorId:o.uid,initiatorName:l.name,targetId:a,payload:{revealedCard:x}},H({title:"PING RESULT",message:`You revealed ${m.name}'s data:`,cards:[{type:x,label:"Revealed"}]}),c.push({text:`PING: ${m.name} was pinged.`,type:"warning",id:Date.now(),viewerId:"all"})}}else if(!a)r.push(i),c.push({text:`${l.name} discarded ${i}.`,type:"neutral",id:Date.now(),viewerId:"all"});else{const m=d.findIndex(x=>x.id===a),s=d[m];if(s.hand.length>0){const x=Math.floor(Math.random()*s.hand.length),p=s.hand.splice(x,1)[0];s.hand.push(i),d[t].hand.push(p),h={id:Date.now(),type:"TRADE",initiatorId:o.uid,initiatorName:l.name,targetId:a,payload:{given:i,received:p}},H({title:"TRADE COMPLETE",message:`Exchange with ${s.name} successful.`,cards:[{type:i,label:"You Gave"},{type:p,label:"You Received"}]}),c.push({text:`${l.name} traded data with ${s.name}.`,type:"warning",id:Date.now(),viewerId:"all"})}else s.hand.push(i),c.push({text:`${l.name} transferred data to ${s.name} (Empty hand).`,type:"neutral",id:Date.now(),viewerId:"all"})}const g=ne(d,r);xe(null);const w=await X(d,c,g);if(w){const m=d.findIndex(p=>p.id===w);d[m].chips=(d[m].chips||0)+1,d.forEach(p=>{p.revealed=!0});const x={players:d.map(p=>({...p,ready:!1})),status:"finished",winnerId:w,discardPile:r,logs:M(...c,{text:`Round Winner: ${d[m].name}.`,type:"success",id:Date.now(),viewerId:"all"}),crashCount:P(g)};h&&(x.lastEvent=h),await E(C(S,"artifacts",k,"public","data","rooms",b),x);return}g>0&&await E(C(S,"artifacts",k,"public","data","rooms",b),{crashCount:P(g)}),await ye(d,f,r,c,h)},St=async()=>{if(!b||!n)return;const a=n.players.findIndex(d=>d.id===o.uid),t=n.players[a],l=t.avatar==="ADMIN"?7:5,i=[{text:`${t.name} skipped their turn.`,type:"neutral",id:Date.now(),viewerId:"all"}];if(t.hand.length>l){fe({players:JSON.parse(JSON.stringify(n.players)),deck:[...n.deck],discardPile:[...n.discardPile],logs:i,eventData:null}),he(!0);return}await ve(n.players,n.deck,n.discardPile,i)},Qe=async(a=null)=>{const t=n.players.findIndex(m=>m.id===o.uid),l=n.players[t];if(n.turnIndex!==t){q("failure","ACCESS DENIED","Wait for your processing cycle (Turn).",oe);return}if(l.glitchUsed)return;if(a){const m=n.players.find(s=>s.id===a);if(m&&m.avatar==="GHOST"){Q(!1),q("failure","TARGET IMMUNE","Ghost Process blocks Glitch effects.",Oe);return}}const i=JSON.parse(JSON.stringify(n.players)),d=[...n.deck];let f=[...n.discardPile||[]];const r=[];let c=null;i[t].glitchUsed=!0,i[t].revealed=!0,r.push({text:`⚠️ GLITCH DETECTED: ${l.name} is ${_[l.directive].name}!`,type:"glitch",id:Date.now(),viewerId:"all"}),q("glitch","GLITCH ACTIVATED","Directive Revealed!",De);const h=l.avatar;if(h==="FIREWALL"){const m=i[t].hand.length,s=i[t].hand.filter(I=>I!=="VIRUS"),x=m-s.length;for(let I=0;I<x;I++)f.push("VIRUS");i[t].hand=s;let p=0;for(let I=0;I<x;I++){if(d.length===0&&f.length>0){const z=A([...f]);f=[],d.push(...z)}d.length>0&&(i[t].hand.push(d.pop()),p++)}H({title:"FIREWALL PURGE",message:`Discarded ${x} Viruses. Downloaded ${p} new packets.`,cards:[]}),r.push({text:`Firewall Purge: ${l.name} discarded Virus/es and drew new card/s.`,type:"success",id:Date.now()+1,viewerId:"all"})}else if(h==="MINER"){let m=0;for(let s=0;s<3;s++){if(d.length===0&&f.length>0){const x=A([...f]);f=[],d.push(...x)}d.length>0&&(i[t].hand.push(d.pop()),m++)}H({title:"JACKPOT",message:`You mined ${m} new data packets.`,cards:[]}),r.push({text:"Miner hit the Jackpot. 3 Cards drawn.",type:"success",id:Date.now()+1,viewerId:"all"})}else if(h==="GHOST"){if(!a)return;const m=i.findIndex(x=>x.id===a),s=[...i[t].hand];i[t].hand=[...i[m].hand],i[m].hand=s,c={id:Date.now(),type:"GLITCH_GHOST",initiatorId:o.uid,initiatorName:l.name,targetId:a,payload:{}},H({title:"GHOST HAUNT",message:`Swapped hands with ${i[m].name}.`,cards:[]}),r.push({text:`Ghost Process Haunt. Hands swapped with ${i[m].name}.`,type:"warning",id:Date.now()+1,viewerId:"all"})}else if(h==="ADMIN"){if(!a)return;const m=i.findIndex(p=>p.id===a),s=i[m];let x=[];if(s.hand.length>=2){const p=s.hand.splice(0,1)[0],I=s.hand.splice(0,1)[0];f.push(p,I),x=[p,I]}else x=[...s.hand],f.push(...s.hand),s.hand=[];c={id:Date.now(),type:"GLITCH_ADMIN",initiatorId:o.uid,initiatorName:l.name,targetId:a,payload:{deleted:x}},H({title:"SUDO COMMAND",message:`Forced ${s.name} to delete ${x.length} data packets.`,cards:[]}),r.push({text:`Admin Sudo command. ${s.name} forced to delete data.`,type:"danger",id:Date.now()+1,viewerId:"all"})}else if(h==="SEARCH_ENGINE"){if(!a)return;ge(a),be(!0),Q(!1);return}Q(!1);const g=ne(i,f),w=await X(i,r,g);if(w){const m=i.findIndex(p=>p.id===w);i[m].chips=(i[m].chips||0)+1,i.forEach(p=>{p.revealed=!0});const x={players:i.map(p=>({...p,ready:!1})),status:"finished",winnerId:w,discardPile:f,logs:M(...r,{text:`Round Winner: ${i[m].name}.`,type:"success",id:Date.now(),viewerId:"all"}),crashCount:P(g)};c&&(x.lastEvent=c),await E(C(S,"artifacts",k,"public","data","rooms",b),x);return}g>0&&await E(C(S,"artifacts",k,"public","data","rooms",b),{crashCount:P(g)}),await ye(i,d,f,r,c)};if(xt)return e.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white p-4 text-center",children:[e.jsx(nt,{}),e.jsxs("div",{className:"bg-orange-500/10 p-8 rounded-2xl border border-orange-500/30",children:[e.jsx(At,{size:64,className:"text-orange-500 mx-auto mb-4 animate-bounce"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Under Maintenance"}),e.jsx("p",{className:"text-gray-400",children:"The AI is glitched. Wait for replacement hardware."})]}),e.jsx("div",{className:"h-8"}),e.jsx("a",{href:"/rawfids-gamehub/",children:e.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:e.jsx("div",{className:"text-center pb-12 animate-pulse",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-4 bg-slate-900/50 rounded-full border border-indigo-500/20 text-indigo-300 font-bold tracking-widest text-sm uppercase backdrop-blur-sm",children:[e.jsx(Ze,{size:16})," Visit Gamehub...Try our other releases..."," ",e.jsx(Ze,{size:16})]})})})}),e.jsx(Ie,{})]});if(!o)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center text-cyan-500 animate-pulse",children:"Generating data packets..."});if(b&&!n&&!$)return e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white p-4",children:[e.jsx(re,{}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur p-8 rounded-2xl border border-zinc-700 shadow-2xl flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[e.jsx(rt,{size:48,className:"text-cyan-500 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Reconnecting..."}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Resuming your session"})]})]})]});if(j==="splash")return e.jsx(ps,{onStart:ft});if(j==="menu")return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-cyan-100 flex flex-col items-center justify-center p-4 relative overflow-hidden font-mono",children:[e.jsx(re,{}),e.jsx("nav",{className:"absolute top-0 left-0 w-full p-4 z-50",children:e.jsxs("a",{href:"/rawfids-gamehub/",className:`flex items-center gap-2 text-cyan-800 rounded-lg 
			font-bold shadow-md hover:text-cyan-400 transition-colors w-fit animate-pulse`,children:[e.jsx(Pt,{}),e.jsx("span",{children:"Back to Gamehub"})]})}),$e&&e.jsx(lt,{onClose:()=>te(!1)}),e.jsxs("div",{className:"z-10 text-center mb-10",children:[e.jsx(ie,{size:64,className:"text-cyan-500 mx-auto mb-4 animate-bounce drop-shadow-[0_0_15px_rgba(6,182,212,0.5)]"}),e.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-transparent bg-clip-text bg-linear-to-b from-cyan-400 to-blue-600 tracking-widest drop-shadow-md",children:["MASQUERADE",e.jsx("br",{}),"PROTOCOL"]}),e.jsx("p",{className:"text-cyan-400/60 tracking-[0.2em] uppercase mt-2",children:"Social Hacking Simulation"})]}),e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-md border border-cyan-500/30 p-8 rounded-lg w-full max-w-md shadow-2xl z-10",children:[$&&e.jsx("div",{className:"bg-red-900/50 text-red-200 p-2 mb-4 rounded text-center text-sm border border-red-800",children:$}),e.jsx("input",{className:"w-full bg-black/50 border border-slate-700 p-3 rounded mb-4 text-cyan-100 placeholder-slate-600 focus:border-cyan-500 outline-none transition-colors",placeholder:"USER_ID",value:L,onChange:a=>pt(a.target.value)}),e.jsxs("button",{onClick:bt,disabled:Le,className:"w-full bg-cyan-900/50 hover:bg-cyan-800 border border-cyan-500/50 text-cyan-100 p-4 rounded font-bold mb-4 flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_15px_rgba(6,182,212,0.3)]",children:[e.jsx(Ht,{size:20})," INITIALIZE_SERVER"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsx("input",{className:"w-full sm:flex-1 bg-black/50 border border-slate-700 p-3 rounded text-cyan-100 placeholder-slate-600 focus:border-cyan-500 outline-none text-center tracking-widest uppercase",placeholder:"ACCESS_CODE",value:N,onChange:a=>D(a.target.value.toUpperCase())}),e.jsx("button",{onClick:gt,disabled:Le,className:"w-full sm:w-auto bg-slate-800 hover:bg-slate-700 border border-slate-600 px-6 py-3 rounded font-bold transition-colors text-slate-300",children:"CONNECT"})]}),e.jsxs("button",{onClick:()=>te(!0),className:"w-full text-sm text-slate-500 hover:text-cyan-400 flex items-center justify-center gap-2 py-2",children:[e.jsx(Ce,{size:16})," READ_MANUAL.txt"]})]})]});if(j==="lobby"&&n){const a=n.hostId===o.uid;return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-cyan-100 flex flex-col items-center justify-center p-6 relative font-mono",children:[e.jsx(re,{}),e.jsx(nt,{}),e.jsxs("div",{className:"z-10 w-full max-w-lg bg-slate-900/90 backdrop-blur p-8 rounded-lg border border-cyan-500/30 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-slate-800 pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl text-cyan-500 font-bold uppercase",children:"Server Room"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-mono text-white font-black",children:b}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:vt,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:Pe?e.jsx(K,{size:16,className:"text-green-500"}):e.jsx(Ut,{size:16})}),Pe&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-cyan-500 text-black text-xs font-bold px-2 py-1 rounded shadow-lg animate-fade-in-up whitespace-nowrap",children:"Copied!"})]})]})]}),e.jsx("button",{onClick:()=>Y(!0),className:"p-2 hover:bg-red-900/30 rounded text-red-400",children:e.jsx(we,{size:16})})]}),e.jsxs("div",{className:"bg-black/40 rounded p-4 mb-8 border border-slate-800",children:[e.jsxs("h3",{className:"text-slate-500 text-xs uppercase tracking-widest mb-4",children:["Connected Clients (",n.players.length,"/6)"]}),e.jsx("div",{className:"space-y-2",children:n.players.map(t=>e.jsxs("div",{className:"flex items-center justify-between bg-slate-800/50 p-3 rounded border border-slate-700",children:[e.jsxs("span",{className:`font-bold flex items-center gap-2 ${t.id===o.uid?"text-cyan-400":"text-slate-400"}`,children:[e.jsx(ke,{size:14})," ",t.name,t.id===n.hostId&&e.jsx(Ee,{size:14,className:"text-yellow-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[(t.chips||0)>0&&e.jsxs("div",{className:"flex items-center gap-1 bg-yellow-900/40 px-2 py-0.5 rounded border border-yellow-700/50",children:[e.jsx(le,{size:12,className:"text-yellow-400"}),e.jsx("span",{className:"text-xs text-yellow-200 font-bold",children:t.chips})]}),e.jsxs("span",{className:"text-green-500 text-xs flex items-center gap-1",children:[e.jsx(K,{size:12})," ONLINE"]}),a&&t.id!==o.uid&&e.jsx("button",{onClick:()=>yt(t.id),className:"text-red-500 hover:text-red-400 p-1 hover:bg-red-900/30 rounded",title:"Kick Player",children:e.jsx(Re,{size:14})})]})]},t.id))})]}),a?e.jsx("button",{onClick:jt,disabled:n.players.length<3,className:`w-full py-4 rounded font-bold text-lg transition-all flex items-center justify-center gap-2 ${n.players.length>=3?"bg-cyan-600 hover:bg-cyan-500 text-white shadow-[0_0_20px_rgba(6,182,212,0.4)]":"bg-slate-800 cursor-not-allowed text-slate-600"}`,children:n.players.length<3?"WAITING_FOR_USERS (Min 3)":"EXECUTE_PROTOCOL"}):e.jsx("div",{className:"text-center text-cyan-500/60 animate-pulse italic",children:"Waiting for Host execution..."})]}),He&&e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900 rounded border border-slate-700 p-6 text-center max-w-sm w-full shadow-2xl",children:[e.jsx("h3",{className:"text-white font-bold mb-4 text-lg",children:"Terminate Connection?"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6",children:a?"As host, leaving will close the server for everyone.":"You will be removed from this session."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>Y(!1),className:"bg-slate-700 hover:bg-slate-600 px-6 py-2 rounded text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Be,className:"bg-red-600 hover:bg-red-500 px-6 py-2 rounded text-white font-bold transition-colors",children:"Disconnect"})]})]})}),e.jsx(Ie,{})]})}if(j==="game"&&n){const a=n.players.findIndex(s=>s.id===o.uid),t=n.players[a],l=n.turnIndex===a,i=n.hostId===o.uid,d=B!==null?t.hand[B]:null,f=d==="PING",r=d==="INTEL"||d==="VIRUS",c=f||r,h=bs(t.avatar),g=n.players.filter(s=>s.id!==n.hostId).every(s=>s.ready),w=n.players.find(s=>s.id===n.winnerId),m=n.players.find(s=>(s.chips||0)>=3);return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-cyan-100 overflow-hidden flex flex-col relative font-mono",children:[e.jsx(re,{}),J&&e.jsx(hs,{type:J.type,message:J.message,subtext:J.subtext,icon:J.icon}),$e&&e.jsx(lt,{onClose:()=>te(!1)}),se&&e.jsx(ms,{item:se,canGlitch:se.canGlitch,onClose:()=>F(null),onActivateGlitch:se.canGlitch?()=>{F(null),Q(!0)}:null}),ue.length>0&&e.jsx(us,{data:ue[0],onClose:()=>Fe(s=>s.slice(1))}),mt&&e.jsx(ds,{players:n.players.filter(s=>s.id!==o.uid&&!s.isEliminated),onSelect:s=>Ke(s),onSkip:()=>Ke(null)}),ht&&ae&&e.jsx(cs,{targetPlayer:n.players.find(s=>s.id===ae),onSelect:Ct,onCancel:()=>{be(!1),ge(null)}}),ut&&ue.length===0&&e.jsx(xs,{hand:pe?pe.players.find(s=>s.id===o.uid).hand:n.players.find(s=>s.id===o.uid).hand,limit:n.players.find(s=>s.id===o.uid).avatar==="ADMIN"?7:5,onConfirm:It,onCancel:()=>{}}),e.jsxs("div",{className:"h-14 bg-slate-900/80 border-b border-slate-800 flex items-center justify-between px-4 z-50 backdrop-blur-md sticky top-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:18,className:"text-cyan-500"}),e.jsxs("span",{className:"font-bold tracking-wider hidden md:block text-cyan-100",children:["ROUND ",n.roundCount||1]}),e.jsxs("span",{className:"text-xs text-slate-500",children:["Deck: ",n.deck.length," | Bin:"," ",n.discardPile?.length||0]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>te(!0),className:"p-2 hover:bg-slate-800 rounded text-slate-400",children:e.jsx(Ce,{size:18})}),e.jsx("button",{onClick:()=>Ge(!ce),className:`p-2 rounded-full ${ce?"bg-cyan-900 text-cyan-400":"text-gray-400 hover:bg-gray-800"}`,children:e.jsx(Vt,{size:18})}),e.jsx("button",{onClick:()=>Y(!0),className:"p-2 hover:bg-red-900/30 rounded text-red-400",children:e.jsx(we,{size:18})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col p-4 max-w-6xl mx-auto w-full relative z-10",children:[e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3 mb-4",children:n.players.map((s,x)=>{if(s.id===o.uid)return null;const p=n.turnIndex===x,I=l&&c||me&&h;return e.jsxs("div",{onClick:()=>{l&&c&&Je(s.id),me&&h&&Qe(s.id)},className:`
            relative bg-slate-900/80 p-3 rounded border transition-all cursor-default flex flex-col h-full
            ${p?"border-cyan-500 shadow-[0_0_10px_rgba(6,182,212,0.3)]":"border-slate-700"}
            ${I?"ring-2 ring-red-500 cursor-pointer animate-pulse bg-red-900/10":""}
            ${s.isEliminated?"opacity-50 grayscale border-red-900":""}
          `,children:[p&&e.jsxs("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 bg-cyan-600 text-cyan-100 text-[9px] px-2 py-0.5 rounded-full font-bold shadow-lg animate-pulse z-10 whitespace-nowrap flex items-center gap-1",children:[e.jsx(et,{size:8})," PLAYING"]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("span",{className:"font-bold text-xs truncate flex items-center gap-1",children:[s.revealed&&e.jsx(Te,{size:12,className:"text-red-500"}),s.name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[(s.chips||0)>0&&e.jsx("div",{className:"flex items-center gap-0.5",title:`${s.chips} Chips`,children:[...Array(s.chips)].map((z,je)=>e.jsx(le,{size:10,className:"text-yellow-400 fill-yellow-900"},je))}),s.ready&&n.status==="finished"&&e.jsx(K,{size:14,className:"text-green-500"}),s.isEliminated&&e.jsx(Ae,{size:14,className:"text-red-500"})]})]}),e.jsx("div",{className:"flex gap-1 justify-center mb-2",children:s.hand.map((z,je)=>e.jsx("div",{className:"w-2 h-4 bg-slate-700 shadow-md border border-cyan-600"},je))})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-auto justify-center",children:[e.jsx("div",{onClick:z=>{z.stopPropagation(),F(R[s.avatar])},className:`w-8 h-8 rounded flex items-center justify-center border cursor-pointer hover:scale-110 transition-transform ${R[s.avatar].border} ${R[s.avatar].bg}`,children:U.createElement(R[s.avatar].icon,{size:16,className:R[s.avatar].color})}),e.jsx("div",{onClick:z=>{z.stopPropagation(),s.revealed||n.status==="finished"?F(_[s.directive]):F(os)},className:`w-8 h-8 rounded flex items-center justify-center border cursor-pointer hover:scale-110 transition-transform ${s.revealed||n.status==="finished"?"border-red-500 bg-red-900/40 animate-pulse":"border-slate-700 bg-slate-800"}`,children:s.revealed||n.status==="finished"?U.createElement(_[s.directive].icon,{size:16,className:"text-red-400"}):e.jsx(oe,{size:14,className:"text-slate-600"})})]})]},s.id)})}),e.jsx("div",{className:"flex-1 flex flex-col justify-center items-center text-center",children:n.status==="finished"?e.jsxs("div",{className:"bg-slate-900/95 p-8 rounded-xl border border-cyan-500 shadow-2xl z-50 animate-in fade-in zoom-in w-full max-w-md",children:[m?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{size:64,className:"text-yellow-400 mx-auto mb-4 animate-bounce"}),e.jsx("h2",{className:"text-4xl font-black text-transparent bg-clip-text bg-linear-to-r from-yellow-300 to-yellow-600 mb-2",children:"GRAND CHAMPION"}),e.jsx("div",{className:"text-2xl text-white mb-6",children:m.name}),e.jsx("div",{className:"text-sm text-yellow-500/80 mb-6 uppercase tracking-widest",children:"Collected 3 Golden Chips"})]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{size:48,className:"text-cyan-400 mx-auto mb-4 animate-bounce"}),e.jsxs("h2",{className:"text-3xl font-bold text-white mb-2",children:["ROUND ",n.roundCount," COMPLETE"]}),e.jsxs("div",{className:"text-xl text-cyan-400 mb-6",children:["WINNER: ",w?.name]}),e.jsxs("div",{className:"text-sm text-slate-400 mb-6",children:[w?.name," receives a Golden Chip. (",w?.chips,"/3)"]})]}),i?e.jsx("div",{className:"space-y-2",children:m?e.jsxs("button",{onClick:qe,className:"px-6 py-3 rounded font-bold bg-red-700 hover:bg-red-600 text-white shadow-lg mx-auto flex items-center gap-2",children:[e.jsx(we,{size:18})," FULL RESET TO LOBBY"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:wt,disabled:!g,className:`px-6 py-3 rounded font-bold flex items-center gap-2 mx-auto transition-all ${g?"bg-cyan-700 hover:bg-cyan-600 text-white shadow-lg":"bg-slate-800 text-slate-500 cursor-not-allowed"}`,children:[e.jsx(et,{size:18})," START ROUND"," ",(n.roundCount||0)+1]}),!g&&e.jsx("div",{className:"text-xs text-yellow-500 animate-pulse",children:"Waiting for players..."})]})}):!m&&e.jsxs("button",{onClick:Nt,disabled:t.ready,className:`px-6 py-3 rounded font-bold flex items-center gap-2 mx-auto transition-all ${t.ready?"bg-green-800 text-green-200 cursor-default":"bg-cyan-700 hover:bg-cyan-600 text-white shadow-lg animate-pulse"}`,children:[t.ready?e.jsx(K,{size:18}):e.jsx(De,{size:18}),t.ready?"WAITING FOR HOST":"READY FOR NEXT ROUND"]})]}):e.jsx("div",{className:"w-full max-w-md space-y-2 pointer-events-none",children:n.logs.filter(s=>s.viewerId==="all"||s.viewerId===o.uid).slice(-3).reverse().map((s,x)=>e.jsx("div",{className:`text-xs p-2 rounded bg-black/60 border border-slate-800 ${s.type==="danger"?"border-red-500 bg-red-900/10 text-red-300":s.type==="glitch"?"border-fuchsia-500 bg-fuchsia-900/10 text-fuchsia-300":"border-slate-600 text-slate-400"}`,style:{opacity:1-x*.3},children:`> ${s.text}`},s.id))})}),e.jsxs("div",{className:"mt-auto bg-slate-900/90 border-t border-cyan-900/30 p-4 -mx-4 md:rounded-t-2xl md:mx-0 backdrop-blur-md relative z-20",children:[e.jsxs("div",{className:"absolute top-3 left-4 right-4 flex items-center justify-between pointer-events-none z-30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"relative flex h-2 w-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}):e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-slate-700"})}),e.jsx("span",{className:`text-[9px] font-black tracking-[0.2em] uppercase font-mono ${l?"text-green-400 animate-pulse":"text-slate-600"}`,children:l?"ONLINE : AWAITING_INPUT":"OFFLINE : SYSTEM_IDLE"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-black/20 rounded-full border border-white/5 backdrop-blur-sm",children:[e.jsx("span",{className:"text-[9px] font-bold text-slate-400 font-mono tracking-wider uppercase",children:L||"GUEST_USER"}),e.jsx("div",{className:"p-1 bg-slate-800 rounded-full border border-slate-700",children:e.jsx(ke,{size:10,className:"text-cyan-500"})})]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4 pt-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{onClick:()=>{F({...R[t.avatar],canGlitch:!t.glitchUsed&&!t.isEliminated&&l})},className:`
                    flex items-center gap-3 p-2 rounded border cursor-pointer hover:bg-slate-800 transition-colors relative
                    ${R[t.avatar].border} ${R[t.avatar].bg}
                  `,children:[!t.glitchUsed&&!t.isEliminated&&e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),U.createElement(R[t.avatar].icon,{size:32,className:R[t.avatar].color}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-white uppercase",children:R[t.avatar].name}),e.jsxs("div",{className:"text-[9px] text-slate-400 flex items-center gap-1",children:[t.glitchUsed?"Glitch Offline":"Tap for Info",e.jsx(tt,{size:8})]})]})]}),e.jsxs("div",{onClick:()=>{F(_[t.directive])},className:`
    flex items-center gap-3 p-2 rounded border relative cursor-pointer transition-colors
    ${t.revealed?"bg-red-900/40 border-red-500 hover:bg-red-900/60":"bg-slate-800 border-slate-700 hover:bg-slate-700"}
  `,children:[t.directive==="HACKER"&&e.jsxs("div",{className:"absolute -top-2 -right-2 bg-indigo-900 text-indigo-100 text-[10px] px-2 py-0.5 rounded-full border border-indigo-500 font-bold shadow-lg z-10 flex items-center gap-1",children:[e.jsx(Se,{size:10})," ",t.pingCount||0,"/3"]}),t.directive==="ANTIVIRUS"&&e.jsxs("div",{className:"absolute -top-2 -right-2 bg-teal-900 text-teal-100 text-[10px] px-2 py-0.5 rounded-full border border-teal-500 font-bold shadow-lg z-10 flex items-center gap-1",children:[e.jsx(ot,{size:10})," ",t.antivirusCount||0,"/2"]}),t.directive==="SURVIVOR"&&e.jsxs("div",{className:"absolute -top-2 -right-2 bg-orange-900 text-orange-100 text-[10px] px-2 py-0.5 rounded-full border border-orange-500 font-bold shadow-lg z-10 flex items-center gap-1",children:[e.jsx(Ae,{size:10})," ",n.crashCount||0,"/1"]}),t.directive==="COLLECTOR"&&(()=>{const s=t.hand.filter(p=>p==="INTEL").length,x=s>=4;return e.jsxs("div",{className:`absolute -top-2 -right-2 text-[10px] px-2 py-0.5 rounded-full border font-bold shadow-lg z-10 flex items-center gap-1 transition-all ${x?"bg-yellow-500 text-black border-white animate-pulse":"bg-cyan-900 text-cyan-100 border-cyan-500"}`,children:[e.jsx(dt,{size:10})," ",s,"/5"]})})(),t.directive==="CORRUPTOR"&&(()=>{const s=t.hand.filter(p=>p==="VIRUS").length,x=s>=3;return e.jsxs("div",{className:`absolute -top-2 -right-2 text-[10px] px-2 py-0.5 rounded-full border font-bold shadow-lg z-10 flex items-center gap-1 transition-all ${x?"bg-red-500 text-white border-white animate-pulse":"bg-fuchsia-900 text-fuchsia-100 border-fuchsia-500"}`,children:[e.jsx(_e,{size:10})," ",s,"/4"]})})(),U.createElement(_[t.directive].icon,{size:32,className:t.revealed?"text-red-400":_[t.directive].color}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-white uppercase",children:_[t.directive].name}),e.jsxs("div",{className:"text-[9px] text-slate-400 flex items-center gap-1",children:[t.revealed?"REVEALED":"Tap for Info",e.jsx(tt,{size:8})]})]})]}),(t.chips||0)>0&&e.jsx("div",{className:"flex items-center gap-1 bg-yellow-900/30 px-3 py-1 rounded border border-yellow-600/50",children:[...Array(t.chips)].map((s,x)=>e.jsx(le,{size:16,className:"text-yellow-400 fill-yellow-900"},x))})]})}),e.jsx("div",{className:"w-full overflow-x-auto pb-4 pt-6 px-4",children:e.jsx("div",{className:"flex gap-2 w-fit mx-auto",children:t.hand.map((s,x)=>{const p=B===x;return e.jsx("div",{className:`transition-all duration-200 ${p?"-translate-y-4":"hover:-translate-y-2"}`,children:e.jsx(de,{type:s,onClick:()=>l?xe(x):null,highlight:p,disabled:!l||t.isEliminated})},x)})})}),l&&e.jsx("div",{className:"absolute top-0 left-0 right-0 -mt-16 flex justify-center gap-2 pointer-events-none",children:e.jsx("div",{className:"pointer-events-auto flex gap-2",children:d?e.jsxs(e.Fragment,{children:[c?e.jsxs("div",{className:"bg-yellow-600 text-black px-4 py-2 rounded font-bold animate-bounce shadow-lg border border-yellow-400 flex items-center gap-2",children:[r?e.jsx(Kt,{size:16}):e.jsx(Se,{size:16}),"Select Target to ",r?"Trade":"Ping"]}):e.jsxs("button",{onClick:()=>Je(),className:"bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-2 rounded shadow-lg font-bold flex items-center gap-2 transition-all hover:scale-105",children:[e.jsx(gs,{size:16})," Execute"," ",ee[d].name]}),e.jsx("button",{onClick:()=>xe(null),className:"bg-slate-700 hover:bg-slate-600 p-2 rounded text-white shadow-lg transition-colors",children:e.jsx(Z,{size:20})})]}):(()=>{const s=t.avatar==="ADMIN"?7:5,x=t.hand.length>s;return e.jsx("button",{onClick:St,className:`
                            px-6 py-2 rounded shadow-lg font-bold flex items-center gap-2 transition-all
                            ${x?"bg-red-600/30 hover:bg-red-500 text-white border border-red-400 animate-pulse":"bg-slate-700/30 hover:bg-slate-600 text-slate-200 border border-slate-500 animate-pulse"}
                          `,children:x?e.jsxs(e.Fragment,{children:[e.jsx(Re,{size:16})," DISCARD & END TURN"]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{size:16})," SKIP TURN"]})})})()})}),me&&e.jsxs("div",{className:"absolute inset-0 bg-slate-950/95 z-50 flex flex-col items-center justify-center rounded-t-2xl animate-in slide-in-from-bottom-10",children:[e.jsx(Te,{size:48,className:"text-red-500 mb-2 animate-pulse"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"WARNING: GLITCH DETECTED"}),e.jsxs("p",{className:"text-xs text-red-400 mb-4 max-w-xs text-center",children:["Activating your glitch will"," ",e.jsx("strong",{className:"text-white",children:"REVEAL YOUR DIRECTIVE"})," ","to all players. This cannot be undone."]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>Q(!1),className:"px-4 py-2 rounded border border-slate-600 text-slate-300 hover:bg-slate-800",children:"CANCEL"}),h?e.jsx("div",{className:"px-4 py-2 rounded bg-fuchsia-900/50 text-fuchsia-200 border border-fuchsia-500 animate-pulse",children:"Select Target Player"}):e.jsx("button",{onClick:()=>Qe(),className:"px-4 py-2 rounded bg-red-600 hover:bg-red-500 text-white font-bold shadow-[0_0_15px_rgba(220,38,38,0.5)]",children:"CONFIRM EXECUTION"})]})]})]})]}),ce&&e.jsx("div",{className:"fixed top-16 right-4 w-64 max-h-60 bg-gray-900/95 border border-gray-700 rounded-xl z-155 overflow-y-auto p-2 shadow-2xl",children:e.jsxs("div",{className:"bg-slate-900 rounded-lg w-full max-w-md h-[60vh] flex flex-col border border-slate-700",children:[e.jsxs("div",{className:"p-4 border-b border-slate-800 flex justify-between",children:[e.jsx("h3",{className:"text-white font-bold",children:"System Logs"}),e.jsx("button",{onClick:()=>Ge(!1),children:e.jsx(Z,{className:"text-slate-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 font-mono text-xs",children:[...n.logs].filter(s=>s.viewerId==="all"||s.viewerId===o.uid).reverse().map(s=>e.jsxs("div",{className:`p-2 border-l-2 ${s.type==="danger"?"border-red-500 bg-red-900/10 text-red-300":s.type==="glitch"?"border-fuchsia-500 bg-fuchsia-900/10 text-fuchsia-300":"border-slate-600 text-slate-400"}`,children:[e.jsxs("span",{className:"opacity-50 mr-2",children:["[",new Date(s.id).toLocaleTimeString(),"]"]}),s.text]},s.id))})]})}),He&&e.jsx("div",{className:"fixed inset-0 bg-black/90 z-200 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900 rounded border border-slate-700 p-6 text-center",children:[e.jsx("h3",{className:"text-white font-bold mb-4",children:"Disconnect from Server?"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>Y(!1),className:"bg-slate-700 px-4 py-2 rounded text-white",children:"Cancel"}),e.jsx("button",{onClick:Be,className:"bg-red-600 px-4 py-2 rounded text-white",children:"Disconnect"}),i&&e.jsxs("button",{onClick:qe,className:"bg-orange-600 px-4 py-2 rounded text-white flex items-center gap-1",children:[e.jsx(Bt,{size:16})," Lobby"]})]})]})}),e.jsx(Ie,{})]})}return null}function bs(o){return["GHOST","ADMIN","SEARCH_ENGINE"].includes(o)}const gs=Yt;Mt.createRoot(document.getElementById("root")).render(e.jsx(y.StrictMode,{children:e.jsx(fs,{})}));
